/*!
    *
    * Wijmo Library 5.20242.21
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */

"use strict";var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);t.default=e;return t};Object.defineProperty(exports,"__esModule",{value:!0});const react_1=require("react"),wijmo_react_base_1=require("@mescius/wijmo.react.base"),React=__importStar(require("react")),ReactDOM=__importStar(require("react-dom")),wjcCore=__importStar(require("@mescius/wijmo")),wjcInput=__importStar(require("@mescius/wijmo.input")),wjItemTemplatePropertyKey="$__wjItemTemplate",wjItemTemplateProperty="wjItemTemplate";function updateWjItemTemplateProp(e,t){if(e){if(!e[wjItemTemplatePropertyKey]&&t[wjItemTemplateProperty]){e[wjItemTemplatePropertyKey]=new ItemTemplate(e);e[wjItemTemplatePropertyKey].wjItemTemplate=wjcCore.asFunction(t[wjItemTemplateProperty])}else if(e[wjItemTemplatePropertyKey]&&!t[wjItemTemplateProperty]){const t=e[wjItemTemplatePropertyKey];e[wjItemTemplatePropertyKey]=null;t._detachFromControl()}if(e[wjItemTemplatePropertyKey]&&t[wjItemTemplateProperty]){e[wjItemTemplatePropertyKey].wjItemTemplate=wjcCore.asFunction(t[wjItemTemplateProperty]);e[wjItemTemplatePropertyKey]._updateTemplateItems()}}}exports.ListBoxMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"caseSensitiveSearch","checkedItems","checkedMemberPath","displayMemberPath","isContentHtml","itemFormatter","itemRole","itemsSource","maxHeight","selectedIndex","selectedItem","selectedValue","selectedValuePath","showGroups","virtualizationThreshold"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"checkedItemsChanged","formatItem","itemChecked","itemsChanged","loadedItems","loadingItems","selectedIndexChanged"]};exports.ListBox=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.ListBoxMeta.inputs,events:exports.ListBoxMeta.events,props:e,constructor:wjcInput.ListBox,initControl:t=>{updateWjItemTemplateProp(t,e)}});updateWjItemTemplateProp(o.wjControl,e);return o.renderResult}));exports.MultiSelectListBoxMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"caseSensitiveSearch","checkOnFilter","checkedItems","checkedMemberPath","delay","displayMemberPath","filterInputPlaceholder","isContentHtml","itemsSource","selectAllLabel","selectedIndex","showFilterInput","showGroups","showSelectAllCheckbox","virtualizationThreshold"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"checkedItemsChanged","selectedIndexChanged"]};exports.MultiSelectListBox=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.MultiSelectListBoxMeta.inputs,events:exports.MultiSelectListBoxMeta.events,props:e,constructor:wjcInput.MultiSelectListBox}).renderResult}));exports.DropDownMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"autoExpandSelection","clickAction","dropDownCssClass","inputType","isAnimated","isDroppedDown","isReadOnly","isRequired","placeholder","showDropDownButton","text"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"isDroppedDownChanged","isDroppedDownChanging","textChanged"]};exports.ComboBoxMeta={inputs:[...exports.DropDownMeta.inputs,"caseSensitiveSearch","displayMemberPath","handleWheel","headerPath","isContentHtml","isEditable","itemFormatter","itemsSource","maxDropDownHeight","maxDropDownWidth","selectedIndex","selectedItem","selectedValue","selectedValuePath","showGroups","trimText","virtualizationThreshold"],events:[...exports.DropDownMeta.events,"formatItem","itemsSourceChanged","selectedIndexChanged"]};exports.ComboBox=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.ComboBoxMeta.inputs,events:exports.ComboBoxMeta.events,props:e,constructor:wjcInput.ComboBox,initControl:t=>{updateWjItemTemplateProp(t,e)}});updateWjItemTemplateProp(o.wjControl,e);return o.renderResult}));exports.AutoCompleteMeta={inputs:[...exports.ComboBoxMeta.inputs,"beginsWithSearch","cssMatch","delay","itemsSourceFunction","maxItems","minLength","searchMemberPath"],events:[...exports.ComboBoxMeta.events]};exports.AutoComplete=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.AutoCompleteMeta.inputs,events:exports.AutoCompleteMeta.events,props:e,constructor:wjcInput.AutoComplete,initControl:t=>{updateWjItemTemplateProp(t,e)}});updateWjItemTemplateProp(o.wjControl,e);return o.renderResult}));exports.CalendarMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"displayMonth","firstDayOfWeek","formatDayHeaders","formatDays","formatMonths","formatYear","formatYearMonth","handleWheel","isReadOnly","itemFormatter","itemValidator","max","min","monthCount","monthView","rangeEnd","rangeMax","rangeMin","repeatButtons","selectionMode","showHeader","showMonthPicker","showYearPicker","value","weeksAfter","weeksBefore"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"displayMonthChanged","formatItem","rangeChanged","rangeEndChanged","valueChanged"]};exports.Calendar=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.CalendarMeta.inputs,events:exports.CalendarMeta.events,props:e,constructor:wjcInput.Calendar}).renderResult}));exports.ColorPickerMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"palette","showAlphaChannel","showColorString","value"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"valueChanged"]};exports.ColorPicker=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.ColorPickerMeta.inputs,events:exports.ColorPickerMeta.events,props:e,constructor:wjcInput.ColorPicker}).renderResult}));exports.InputMaskMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"inputType","isReadOnly","isRequired","mask","overwriteMode","placeholder","promptChar","rawValue","value"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"valueChanged"]};exports.InputMask=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputMaskMeta.inputs,events:exports.InputMaskMeta.events,props:e,constructor:wjcInput.InputMask}).renderResult}));exports.InputColorMeta={inputs:[...exports.DropDownMeta.inputs,"palette","showAlphaChannel","showColorString","text","value"],events:[...exports.DropDownMeta.events,"valueChanged"]};exports.InputColor=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputColorMeta.inputs,events:exports.InputColorMeta.events,props:e,constructor:wjcInput.InputColor}).renderResult}));exports.MultiSelectMeta={inputs:[...exports.ComboBoxMeta.inputs,"caseSensitiveSearch","checkOnFilter","checkedItems","checkedMemberPath","delay","filterInputPlaceholder","headerFormat","headerFormatter","maxHeaderItems","selectAllLabel","showFilterInput","showSelectAllCheckbox"],events:[...exports.ComboBoxMeta.events,"checkedItemsChanged"]};exports.MultiSelect=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.MultiSelectMeta.inputs,events:exports.MultiSelectMeta.events,props:e,constructor:wjcInput.MultiSelect,initControl:t=>{updateWjItemTemplateProp(t,e)}});updateWjItemTemplateProp(o.wjControl,e);return o.renderResult}));exports.MultiAutoCompleteMeta={inputs:[...exports.AutoCompleteMeta.inputs,"maxSelectedItems","selectedItems","selectedMemberPath","showDropDownButton"],events:[...exports.AutoCompleteMeta.events,"selectedItemsChanged"]};exports.MultiAutoComplete=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.MultiAutoCompleteMeta.inputs,events:exports.MultiAutoCompleteMeta.events,props:e,constructor:wjcInput.MultiAutoComplete}).renderResult}));exports.InputNumberMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"format","handleWheel","inputType","isReadOnly","isRequired","max","min","placeholder","repeatButtons","showSpinner","step","text","value"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"textChanged","valueChanged"]};exports.InputNumber=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputNumberMeta.inputs,events:exports.InputNumberMeta.events,props:e,constructor:wjcInput.InputNumber}).renderResult}));exports.InputDateMeta={inputs:[...exports.DropDownMeta.inputs,"alwaysShowCalendar","closeOnSelection","format","handleWheel","inputType","itemFormatter","itemValidator","mask","max","min","monthCount","predefinedRanges","rangeEnd","rangeMax","rangeMin","repeatButtons","selectionMode","separator","showHeader","showMonthPicker","showYearPicker","text","value","weeksAfter","weeksBefore","keepInvalidText"],events:[...exports.DropDownMeta.events,"rangeChanged","rangeEndChanged","valueChanged"]};exports.InputDate=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputDateMeta.inputs,events:exports.InputDateMeta.events,props:e,constructor:wjcInput.InputDate}).renderResult}));exports.InputTimeMeta={inputs:[...exports.ComboBoxMeta.inputs,"format","inputType","mask","max","min","step","text","value"],events:[...exports.ComboBoxMeta.events,"valueChanged"]};exports.InputTime=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputTimeMeta.inputs,events:exports.InputTimeMeta.events,props:e,constructor:wjcInput.InputTime}).renderResult}));exports.InputDateTimeMeta={inputs:[...exports.InputDateMeta.inputs,"timeFormat","timeMax","timeMin","timeStep"],events:[...exports.InputDateMeta.events]};exports.InputDateTime=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputDateTimeMeta.inputs,events:exports.InputDateTimeMeta.events,props:e,constructor:wjcInput.InputDateTime}).renderResult}));exports.InputDateRangeMeta={inputs:[...exports.InputDateMeta.inputs],events:[...exports.InputDateMeta.events]};exports.InputDateRange=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.InputDateRangeMeta.inputs,events:exports.InputDateRangeMeta.events,props:e,constructor:wjcInput.InputDateRange}).renderResult}));exports.MenuMeta={inputs:[...exports.ComboBoxMeta.inputs,"closeOnLeave","command","commandParameterPath","commandPath","header","isButton","openOnHover","owner","subItemsPath","ariaLabel","autoSelectOnFocus"],events:[...exports.ComboBoxMeta.events,"itemClicked"]};function getReactDOM(){return ReactDOM}function _getContextMenuElements(e){const t=[];(wjcCore.isArray(e)?e:[e]).forEach(e=>{if(e){let o=null;if("string"==typeof e)o=document.getElementById(e);else if("object"==typeof e){const t=e.hostElement?e.hostElement:e.current;if(t)if(t instanceof HTMLElement)o=t;else if(t instanceof wjcCore.Control)o=t.hostElement;else if(t.control&&t.control instanceof wjcCore.Control)o=t.control.hostElement;else{const e=getReactDOM().findDOMNode;e&&(o=e(t))}}o&&t.push(o)}});return t}exports.Menu=react_1.forwardRef((function(e,t){const o=React.useRef({}),updateHeader=e=>{e.header=e._definedHeader||"";const t=e.selectedItem;if(null!=e.selectedValue&&t&&e.displayMemberPath){let o=null;if(t instanceof _MenuItem){const r=t.itemRoot;o=r?r.innerHTML:t[e.displayMemberPath]}null!=o&&(e.header+=": <b>"+o+"</b>")}},r=wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.MenuMeta.inputs,events:exports.MenuMeta.events,props:e,constructor:wjcInput.Menu,prePropsInit:t=>{t._definedHeader=e.header;t.listBox.formatItem.addHandler((e,t)=>{if(t.data instanceof _MenuItem||t.data instanceof _MenuSeparator){t.item.textContent="";t.data.updateItem(t.item)}});queueMicrotask(()=>updateHeader(t))},initControl:t=>{updateWjItemTemplateProp(t,e);t._definedHeader=e.header;t.selectedIndexChanged.addHandler(()=>{updateHeader(t)});if(t.itemsSource&&t.itemsSource.length){Array.from(t.itemsSource).find(e=>e instanceof _MenuItem);t.itemsSource[0]instanceof _MenuItem&&1==t.itemsSource.length&&t.selectedIndex<0&&(t.selectedIndex=0)}},customProps:{header:(e,t)=>{if(e._definedHeader!=t){e._definedHeader=t;e.header=t;updateHeader(e)}},contextMenuOf:(e,t)=>{o.current.contextMenuOf||(o.current.contextMenuOf=[]);e.hostElement.style.display=t?"none":"inline-table";const r=o.current.contextMenuOf;for(let e of r)e.el.removeEventListener("contextmenu",e.handler);o.current.contextMenuOf=[];if(!t)return;const n=_getContextMenuElements(t);for(let t of n){const listener=o=>{if(wjcCore.closest(o.target,"[disabled]"))return;const r=e;if(r&&r.dropDown){o.preventDefault();o.stopPropagation();r.owner=t;r.show(o)}};t.addEventListener("contextmenu",listener);o.current.contextMenuOf.push({el:t,handler:listener})}},value:(e,t)=>{e.selectedValue=t;updateHeader(e)}}});r.wjControl&&(r.wjControl._definedHeader=e.header);updateWjItemTemplateProp(r.wjControl,e);if(r.wjControl&&r.wjControl.itemsSource)for(let e of r.wjControl.itemsSource)if(e instanceof _MenuItem){r.wjControl.listBox.loadList();break}return r.renderResult}));exports.MenuItemMeta={inputs:["children","cmd","cmdParam","value"],events:[]};class _MenuItem{constructor(e,t){this.children=[];this.value=null;this.cmd=null;this.cmdParam=null;this._parent=e;wjcCore.copy(this,t);this._init(t)}_init(e){this._parent.displayMemberPath||(this._parent.displayMemberPath="header");this._parent.selectedValuePath||(this._parent.selectedValuePath="value");this._parent.commandPath||(this._parent.commandPath="cmd");this._parent.commandParameterPath||(this._parent.commandParameterPath="cmdParam")}updateItem(e){wijmo_react_base_1.selectiveDomUnmount(e);wijmo_react_base_1.selectiveDomRender(this.children,e);this.itemRoot=e}}exports.MenuItem=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentChildBase({ref:t,properties:exports.MenuItemMeta.inputs,events:exports.MenuItemMeta.events,props:e,constructor:_MenuItem,needParentInstance:!0,parentProp:"itemsSource",isParentPropArray:!0,assignedToParent:!0});return Object.assign({$_wjComponent:!0},o)}));exports.MenuSeparator=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentChildBase({ref:t,properties:[],events:[],props:e,constructor:_MenuSeparator,needParentInstance:!0,parentProp:"itemsSource",isParentPropArray:!0,assignedToParent:!0});return Object.assign({$_wjComponent:!0},o)}));class _MenuSeparator{constructor(e,t){}updateItem(e){wjcCore.createElement("<div></div>",e,{width:"100%",height:"1px",backgroundColor:"lightgray"});wjcCore.addClass(e,"wj-state-disabled");wjcCore.setAttribute(e,"role","separator",!1)}}exports.PopupMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"content","dialogResult","dialogResultEnter","dialogResultSubmit","fadeIn","fadeOut","hideTrigger","isDraggable","isResizable","isVisible","modal","owner","position","removeOnHide","showTrigger"],events:[...wijmo_react_base_1.ControlBaseMeta.events,"dragged","dragging","hidden","hiding","positionChanged","positionChanging","resized","resizing","showing","shown","sizeChanged","sizeChanging"]};function updatePopupContent(e,t){wijmo_react_base_1.selectiveDomRender(t,e.hostElement)}exports.Popup=react_1.forwardRef((function(e,t){const o=wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.PopupMeta.inputs,events:exports.PopupMeta.events,props:e,constructor:wjcInput.Popup,initControl:t=>{t.removeOnHide=!1;updatePopupContent(t,e.children)}});o.wjControl&&updatePopupContent(o.wjControl,e.children);return o.renderResult}));exports.CollectionViewNavigatorMeta={inputs:[...wijmo_react_base_1.ControlBaseMeta.inputs,"byPage","cv","headerFormat","repeatButtons"],events:[...wijmo_react_base_1.ControlBaseMeta.events]};exports.CollectionViewNavigator=react_1.forwardRef((function(e,t){return wijmo_react_base_1.useWjComponentBase({ref:t,properties:exports.CollectionViewNavigatorMeta.inputs,events:exports.CollectionViewNavigatorMeta.events,props:e,constructor:wjcInput.CollectionViewNavigator}).renderResult}));class ItemTemplate{constructor(e){this._templateItems=[];this.ownerControl=e;this.listBox=this._getListBox(this.ownerControl);this._attachToControl()}_updateTemplateItems(){this._templateItems.forEach(e=>{wijmo_react_base_1.selectiveDomRender(this._createItemElTpl(e),e.itemEl)})}_attachToControl(){this.listBox.formatItem.addHandler(this._fmtItem,this);this.listBox.loadingItems.addHandler(this._destroyTemplateItems,this);this.ownerControl.invalidate()}_detachFromControl(){this.listBox.formatItem.removeHandler(this._fmtItem,this);this._destroyTemplateItems()}_fmtItem(e,t){const o=t.item,r={control:e,item:t.data,itemIndex:t.index};this._templateItems.push(Object.assign({},r,{itemEl:o}));if(wjcCore.isFunction(this.wjItemTemplate)){wijmo_react_base_1.selectiveDomUnmount(o);wijmo_react_base_1.selectiveDomRender(this._createItemElTpl(r),o)}}_getListBox(e){return e instanceof wjcInput.ListBox?e:e.listBox}_destroyTemplateItems(){this._templateItems.forEach(e=>{wijmo_react_base_1.selectiveDomUnmount(e.itemEl)});this._templateItems=[]}_createItemElTpl(e){return React.createElement("div",{},this.wjItemTemplate({control:e.control,item:e.item,itemIndex:e.itemIndex}))}}