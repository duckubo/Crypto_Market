/*!
    *
    * Wijmo Library 5.20242.21
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */

var __extends=this&&this.__extends||function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}();import{Point,Size,Rect,asEnum,asString,isNumber,asNumber,isString,assert,asBoolean,tryCast,DataType,isDate,isArray,Event,asType,copy,asFunction,Binding,EventArgs,asCollectionView,asInt,ObservableArray,Globalize,asDate,removeChild,setCss,isIE,hasClass,addClass,asArray,clamp,isUndefined,getElementRect,toggleClass,removeClass,isFunction,format,Control,Tooltip,CancelEventArgs,Color,mouseToPage,animate,_registerModule}from"@mescius/wijmo";import*as selfModule from"@mescius/wijmo.chart";var _VolumeHelper=function(){function _VolumeHelper(t,e,i,n,r){this._volumes=asArray(t);this._xVals=asArray(e);this._xDataMin=asNumber(i,!0,!1);this._xDataMax=asNumber(n,!0,!1);this._xDataType=asEnum(r,DataType,!0);this._calcData=[];this._init()}_VolumeHelper.prototype.convert=function(t,e,i){var n=void 0,r=this._calcData.length,s=-1;if(this._hasXs&&this._xDataType===DataType.Date){if(-1===(s=this._xVals.indexOf(t)))for(var a=0;a<this._xVals.length;a++){if(a<this._xVals.length-1&&this._xVals[a]<=t&&t<=this._xVals[a+1]){s=a;break}if(0===a&&t<=this._xVals[a]){s=a;break}if(a===this._xVals.length-1&&this._xVals[a]<=t){s=a;break}}if(-1===s){s=this._xVals.indexOf(Math.floor(t));s=clamp(s,0,r-1)}}else if(this._hasXs){if(-1===(s=this._xVals.indexOf(t))){s=this._xVals.indexOf(Math.floor(t));s=clamp(s,0,r-1)}}else s=clamp(Math.round(t),0,r-1);if(0<=s&&s<r){this._hasXs&&(t=_VolumeHelper.convertToRange(t,0,r-1,this._xDataMin,this._xDataMax));n=((n=this._calcData[s].value+(t-s)*this._calcData[s].width-.5*this._calcData[s].width)-(e=this._getXVolume(e)))/((i=this._getXVolume(i))-e)}return n};_VolumeHelper.prototype.convertBack=function(t,e,i){var n,r=void 0,s=this._calcData.length,a=-1;for(n=0;n<s;n++)if(this._calcData[n].x1<=t&&t<=this._calcData[n].x2||0===n&&t<=this._calcData[n].x2||n===s-1&&this._calcData[n].x1<=t){a=n;break}if(0<=a&&a<s){r=t/this._calcData[a].width-this._calcData[a].value/this._calcData[a].width+.5+n;this._hasXs&&(r=_VolumeHelper.convertToRange(r,this._xDataMin,this._xDataMax,0,s-1))}return r};_VolumeHelper.prototype._init=function(){this._hasXs=null!==this._xVals&&this._xVals.length>0;this._hasXs&&!isNumber(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals));this._hasXs&&!isNumber(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals));this._hasXs&&(this._hasXs=isNumber(this._xDataMin)&&isNumber(this._xDataMax));this._hasXs&&this._xDataType===DataType.Date&&this._fillGaps();var t=0,e=0,i=null!==this._volumes&&this._volumes.length>0?this._volumes.length:0;for(e=0;e<i;e++)t+=this._volumes[e]||0;var n,r,s=0;for(e=0;e<i;e++){n=s+(r=(this._volumes[e]||0)/t);this._calcData.push({value:n,width:r,x1:s,x2:n});s=this._calcData[e].value}};_VolumeHelper.prototype._getXVolume=function(t){var e=this._calcData.length,i=-1;if(this._hasXs){i=this._xVals.indexOf(t);for(var n=0;n<this._xVals.length;n++){if(n<this._xVals.length-1&&this._xVals[n]<=t&&t<=this._xVals[n+1]){i=n;break}if(0===n&&t<=this._xVals[n]){i=n;break}if(n===this._xVals.length-1&&this._xVals[n]<=t){i=n;break}}}this._hasXs&&(t=_VolumeHelper.convertToRange(t,0,e-1,this._xDataMin,this._xDataMax));-1===i&&(i=clamp(Math.round(t),0,e-1));return this._calcData[i].value+(t-i)*this._calcData[i].width-.5*this._calcData[i].width};_VolumeHelper.convertToRange=function(t,e,i,n,r){return e===i||n===r?0:(t-n)*(i-e)/(r-n)+e};_VolumeHelper.prototype._fillGaps=function(){if(!(this._xDataType!==DataType.Date||null===this._xVals||this._xVals.length<=0)){var t,e=this._xDataMin,i=this._xDataMax;for(t=1;e<i;t++){(e=new Date(e)).setDate(e.getDate()+1);if((e=e.valueOf())!==this._xVals[t]){this._xVals.splice(t,0,e);this._volumes.splice(t,0,0)}}}};return _VolumeHelper}();export{_VolumeHelper};var _Curve=function(){function _Curve(t,e,i,n){this.monoX=!1;this.monoY=!1;var r=i||Math.min(t.length,e.length),s=0,a=0,o=0,h=0;if(r>3)for(var l=0;l<r-1;l++)if(l>0){a=Math.min(a,t[l]-t[l-1]);s=Math.max(s,t[l]-t[l-1]);h=Math.min(h,e[l]-e[l-1]);o=Math.max(o,e[l]-e[l-1])}this.monoX=s>0&&0===a||a<0&&0===s;this.monoY=o>0&&0===h||h<0&&0===o;this.monoX&&"spline"!==n?this.calc=a<0?new _SplineMono(t.reverse(),e.reverse(),i):new _SplineMono(t,e,i):this.calc=new _Spline(t,e,i)}_Curve.prototype.calculate=function(){return this.calc.calculate()};return _Curve}();export{_Curve};var _Spline=function(){function _Spline(t,e,i){this.k=.002;this._a=[];this._b=[];this._c=[];this._d=[];this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]];this._x=t;this._y=e;var n=this._len=i||Math.min(t.length,e.length);if(n>3)for(var r=0;r<n-1;r++){var s=0==r?new Point(t[r],e[r]):new Point(t[r-1],e[r-1]),a=new Point(t[r],e[r]),o=new Point(t[r+1],e[r+1]),h=r==n-2?new Point(t[r+1],e[r+1]):new Point(t[r+2],e[r+2]),l=new Point,_=new Point,u=new Point,c=new Point;l.x=s.x*this.m[0][0]+a.x*this.m[0][1]+o.x*this.m[0][2]+h.x*this.m[0][3];_.x=s.x*this.m[1][0]+a.x*this.m[1][1]+o.x*this.m[1][2]+h.x*this.m[1][3];u.x=s.x*this.m[2][0]+a.x*this.m[2][1]+o.x*this.m[2][2]+h.x*this.m[2][3];c.x=s.x*this.m[3][0]+a.x*this.m[3][1]+o.x*this.m[3][2]+h.x*this.m[3][3];l.y=s.y*this.m[0][0]+a.y*this.m[0][1]+o.y*this.m[0][2]+h.y*this.m[0][3];_.y=s.y*this.m[1][0]+a.y*this.m[1][1]+o.y*this.m[1][2]+h.y*this.m[1][3];u.y=s.y*this.m[2][0]+a.y*this.m[2][1]+o.y*this.m[2][2]+h.y*this.m[2][3];c.y=s.y*this.m[3][0]+a.y*this.m[3][1]+o.y*this.m[3][2]+h.y*this.m[3][3];this._a.push(l);this._b.push(_);this._c.push(u);this._d.push(c)}}_Spline.prototype.calculatePoint=function(t){var e=Math.floor(t);e<0&&(e=0);e>this._len-2&&(e=this._len-2);var i=t-e;return{x:((this._a[e].x*i+this._b[e].x)*i+this._c[e].x)*i+this._d[e].x,y:((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y}};_Spline.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};var t=[],e=[],i=this.calculatePoint(0);t.push(i.x);e.push(i.y);for(var n=Math.min(this._len*this.k,.2),r=n;r<=this._len-1;r+=n){var s=Math.ceil(r),a=this.calculatePoint(r);if(Math.abs(i.x-a.x)>=3||Math.abs(i.y-a.y)>=3){t.push(a.x);e.push(a.y);i=a}if(r+n>=s){t.push(this._x[s]);e.push(this._y[s])}}return{xs:t,ys:e}};return _Spline}();export{_Spline};var _SplineMono=function(){function _SplineMono(t,e,i){this._x=[];this._y=[];this._c1s=[];this._c2s=[];this._c3s=[];for(var n=this._len=i||Math.min(t.length,e.length),r=0;r<n;r++){this._x.push(t[r]);this._y.push(e[r])}t=this._x;e=this._y;if(!(this._len<=3)){var s=[],a=[],o=[];for(r=0;r<n-1;r++){var h=t[r+1]-t[r],l=e[r+1]-e[r];a[r]=h;s[r]=l;o[r]=l/h}var _=this._c1s;_.push(o[0]);for(r=0;r<a.length-1;r++){var u=o[r],c=o[r+1];if(u*c<=0)_.push(0);else{var p=a[r],f=a[r+1],d=p+f;_.push(3*d/((d+f)/u+(d+p)/c))}}_.push(o[o.length-1]);var g=this._c2s,m=this._c3s;for(r=0;r<_.length-1;r++){var x=_[r],y=o[r],b=1/a[r],v=x+_[r+1]-y-y;g[r]=(y-x-v)*b;m[r]=v*b*b}}}_SplineMono.prototype.interpolate=function(t){var e=this._x.length-1;if(t>=this._x[e])return this._y[e];for(var i,n=0,r=this._c3s.length-1;n<=r;){i=Math.floor(.5*(n+r));var s=this._x[i];if(s<t)n=i+1;else{if(!(s>t))return this._y[i];r=i-1}}e=Math.max(0,r);var a=t-this._x[e];return this._y[e]+a*(this._c1s[e]+a*(this._c2s[e]+a*this._c3s[e]))};_SplineMono.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};for(var t=[],e=[],i=this._len,n=this._x[0],r=this._x[i-1],s=Math.min(.001*this._len,.2),a=n;a<=r;a+=s){t.push(a);e.push(this.interpolate(a))}return{xs:t,ys:e}};return _SplineMono}(),Palettes=function(){function Palettes(){}Palettes._isExtended=function(t){return-1!==this._values(Palettes.Diverging).indexOf(t)||-1!==this._values(Palettes.Qualitative).indexOf(t)||-1!==this._values(Palettes.SequentialSingle).indexOf(t)||-1!==this._values(Palettes.SequentialMulti).indexOf(t)};Palettes._values=function(t){return Object.keys(t).map((function(e){return t[e]}))};Palettes.standard=["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"];Palettes.cocoa=["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872","#73b22b","#b87320","#141414"];Palettes.coral=["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2","#ede9d0","#e96b7d","#888888"];Palettes.dark=["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c","#d5a211","#dc0127","#000000"];Palettes.highcontrast=["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a","#607efd","#1b7700","#000000"];Palettes.light=["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7","#9e95c7","#95b0c7","#9b9b9b"];Palettes.midnight=["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7","#d89c54","#e86996","#2c343b"];Palettes.modern=["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6","#d0c041","#e35855","#68706a"];Palettes.organic=["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0","#61bbd8","#e2d76f","#80715a"];Palettes.slate=["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4","#bacc5c","#e5746a","#505d65"];Palettes.zen=["#7bb5ae","#e2d287","#92b8da","#eac4cb","#7b8bbd","#c7d189","#b9a0c8","#dfb397","#a9a9a9"];Palettes.cyborg=["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3","#3d6dcc","#525252","#000000"];Palettes.superhero=["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c","#b6b86e","#4e5d6c","#2b3e4b"];Palettes.flatly=["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5","#e74c3c","#8a9899","#2c3e50"];Palettes.darkly=["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3","#b08725","#4a4949","#000000"];Palettes.cerulan=["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323","#e3bb00","#cccccc","#222222"];Palettes.Qualitative={Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"]};Palettes.Diverging={BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]};Palettes.SequentialSingle={Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]};Palettes.SequentialMulti={BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]};return Palettes}();export{Palettes};export var empty={};var PlotArea=function(){function PlotArea(t){this._row=0;this._col=0;this._rect=new Rect(0,0,0,0);copy(this,t)}Object.defineProperty(PlotArea.prototype,"row",{get:function(){return this._row},set:function(t){if(t!=this._row){this._row=asInt(t,!0,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(PlotArea.prototype,"column",{get:function(){return this._col},set:function(t){if(t!=this._col){this._col=asInt(t,!0,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(PlotArea.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=asString(t,!0))},enumerable:!0,configurable:!0});Object.defineProperty(PlotArea.prototype,"width",{get:function(){return this._width},set:function(t){if(t!=this._width){this._width=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(PlotArea.prototype,"height",{get:function(){return this._height},set:function(t){if(t!=this._height){this._height=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(PlotArea.prototype,"style",{get:function(){return this._style},set:function(t){if(t!=this._style){this._style=t;this._invalidate()}},enumerable:!0,configurable:!0});PlotArea.prototype._invalidate=function(){this._chart&&this._chart.invalidate()};PlotArea.prototype._render=function(t){t.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)};PlotArea.prototype._setPlotX=function(t,e){this._rect.left=t;this._rect.width=e};PlotArea.prototype._setPlotY=function(t,e){this._rect.top=t;this._rect.height=e};return PlotArea}();export{PlotArea};var _GridUnitType,PlotAreaCollection=function(t){__extends(PlotAreaCollection,t);function PlotAreaCollection(){return null!==t&&t.apply(this,arguments)||this}PlotAreaCollection.prototype.getPlotArea=function(t){var e=this.indexOf(t);return e>-1?this[e]:null};PlotAreaCollection.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1};PlotAreaCollection.prototype._getWidth=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.column==t&&0==i.row)return i.width}};PlotAreaCollection.prototype._getHeight=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.row==t&&0==i.column)return i.height}};PlotAreaCollection.prototype._calculateWidths=function(t,e){if(e<=0)throw"ncols";for(var i=[],n=0;n<e;n++){var r=this._getWidth(n);i[n]=new _GridLength(r)}return this._calculateLengths(t,e,i)};PlotAreaCollection.prototype._calculateHeights=function(t,e){if(e<=0)throw"nrows";for(var i=[],n=0;n<e;n++){var r=this._getHeight(n);i[n]=new _GridLength(r)}return this._calculateLengths(t,e,i)};PlotAreaCollection.prototype._calculateLengths=function(t,e,i){for(var n=[e],r=0,s=0,a=0;a<e;a++)if(i[a].isAbsolute){n[a]=i[a].value;r+=n[a]}else i[a].isStar?s+=i[a].value:i[a].isAuto&&s++;var o=(t-r)/s;for(a=0;a<e;a++){i[a].isStar?n[a]=o*i[a].value:i[a].isAuto&&(n[a]=o);n[a]<0&&(n[a]=0)}return n};return PlotAreaCollection}(ObservableArray);export{PlotAreaCollection};!function(t){t[t.Auto=0]="Auto";t[t.Pixel=1]="Pixel";t[t.Star=2]="Star"}(_GridUnitType||(_GridUnitType={}));var _GridLength=function(){function _GridLength(t){void 0===t&&(t=null);this._unitType=_GridUnitType.Auto;if(t)if((t=t.toString()).indexOf("*")>=0){this._unitType=_GridUnitType.Star;t=t.replace("*","");this._value=parseFloat(t);isNaN(this._value)&&(this._value=1)}else{this._unitType=_GridUnitType.Pixel;this._value=parseFloat(t);if(isNaN(this._value)){this._unitType=_GridUnitType.Auto;this._value=1}}}Object.defineProperty(_GridLength.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});Object.defineProperty(_GridLength.prototype,"isStar",{get:function(){return this._unitType==_GridUnitType.Star},enumerable:!0,configurable:!0});Object.defineProperty(_GridLength.prototype,"isAbsolute",{get:function(){return this._unitType==_GridUnitType.Pixel},enumerable:!0,configurable:!0});Object.defineProperty(_GridLength.prototype,"isAuto",{get:function(){return this._unitType==_GridUnitType.Auto},enumerable:!0,configurable:!0});return _GridLength}(),_SvgRenderEngine=function(){function _SvgRenderEngine(t){this._STROKE_JOIN="round";this._strokeWidth=1;this._fontSize=null;this._fontFamily=null;this._savedGradient={};this._bbCache={};this._baseUrl="";this._cssPriority=!0;this._readOnly=!1;this._isRtl=!1;this._precision=1;this._options=null;this._htmlText=!1;this._element=t;this._create();this._element&&this._element.appendChild(this._svg);var e=navigator.userAgent.toLowerCase();void 0===_SvgRenderEngine._isff&&(_SvgRenderEngine._isff=e.indexOf("firefox")>=0);void 0===_SvgRenderEngine._isSafari&&(_SvgRenderEngine._isSafari=e.indexOf("safari")>-1&&-1==e.indexOf("chrome"))}_SvgRenderEngine.prototype.attach=function(t){this._element=t;if(t){t.insertBefore(this._svg,t.childNodes[0]);t.appendChild(this._svg)}};_SvgRenderEngine.prototype.detach=function(){this._element&&this._element.removeChild(this._svg);for(;this._svg.firstChild;)removeChild(this._svg.firstChild)};_SvgRenderEngine.prototype.beginRender=function(){for(;this._svg.firstChild;)removeChild(this._svg.firstChild);this._savedGradient={};this._bbCache={};this._svg.appendChild(this._defs);this._svg.appendChild(this._textGroup);this._isRtl=this._checkRtl()};_SvgRenderEngine.prototype.endRender=function(){removeChild(this._textGroup)};_SvgRenderEngine.prototype.setViewportSize=function(t,e){this._svg.setAttribute("width",t.toString());this._svg.setAttribute("height",e.toString())};Object.defineProperty(_SvgRenderEngine.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=void 0===t?null:t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"textFill",{get:function(){return this._textFill},set:function(t){this._textFill=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"cssPriority",{get:function(){return this._cssPriority},set:function(t){this._cssPriority=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=t},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"precision",{get:function(){return this._precision},set:function(t){this._precision=asNumber(t)},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0});Object.defineProperty(_SvgRenderEngine.prototype,"options",{get:function(){return this._options},set:function(t){this._options=t},enumerable:!0,configurable:!0});_SvgRenderEngine.prototype.addClipRect=function(t,e){if(t&&e){var i=this.precision,n=document.createElementNS(_SvgRenderEngine.svgNS,"clipPath"),r=document.createElementNS(_SvgRenderEngine.svgNS,"rect");r.setAttribute("x",(t.left-1).toFixed(i));r.setAttribute("y",(t.top-1).toFixed(i));r.setAttribute("width",(t.width+2).toFixed(i));r.setAttribute("height",(t.height+2).toFixed(i));n.appendChild(r);n.setAttribute("id",e);this._svg.appendChild(n)}};_SvgRenderEngine.prototype.drawEllipse=function(t,e,i,n,r,s){var a=document.createElementNS(_SvgRenderEngine.svgNS,"ellipse"),o=this.precision;this._applyColor(a,"stroke",this._stroke);null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString());this._applyColor(a,"fill",this._fill);a.setAttribute("cx",t.toFixed(o));a.setAttribute("cy",e.toFixed(o));a.setAttribute("rx",i.toFixed(o));a.setAttribute("ry",n.toFixed(o));r&&a.setAttribute("class",r);this._applyStyle(a,s);this._appendChild(a);return a};_SvgRenderEngine.prototype.drawRect=function(t,e,i,n,r,s,a){var o=document.createElementNS(_SvgRenderEngine.svgNS,"rect"),h=this.precision;this._applyColor(o,"fill",this._fill);this._applyColor(o,"stroke",this._stroke);null!==this._strokeWidth&&this._setAttribute(o,"stroke-width",this._strokeWidth.toString());o.setAttribute("x",t.toFixed(h));isNaN(Number(e))||o.setAttribute("y",e.toFixed(h));i>0&&i<.05?o.setAttribute("width","0.1"):o.setAttribute("width",i.toFixed(h));n>0&&n<.05?o.setAttribute("height","0.1"):o.setAttribute("height",n.toFixed(h));a&&this._setClipPath(o,a);r&&o.setAttribute("class",r);this._applyStyle(o,s);this._appendChild(o);return o};_SvgRenderEngine.prototype.drawLine=function(t,e,i,n,r,s){var a=document.createElementNS(_SvgRenderEngine.svgNS,"line"),o=this.precision;this._applyColor(a,"stroke",this._stroke);null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString());a.setAttribute("x1",t.toFixed(o));a.setAttribute("x2",i.toFixed(o));a.setAttribute("y1",e.toFixed(o));a.setAttribute("y2",n.toFixed(o));r&&a.setAttribute("class",r);this._applyStyle(a,s);this._appendChild(a);return a};_SvgRenderEngine.prototype.drawLines=function(t,e,i,n,r,s){if(t&&e){var a=s||Math.min(t.length,e.length);if(a>0){var o=document.createElementNS(_SvgRenderEngine.svgNS,"polyline"),h=this.precision;this._applyColor(o,"stroke",this._stroke);if(null!==this._strokeWidth){this._setAttribute(o,"stroke-width",this._strokeWidth.toString());this._strokeWidth>1&&this._setAttribute(o,"stroke-linejoin",this._STROKE_JOIN)}o.setAttribute("fill","none");for(var l="",_=0;_<a;_++)l+=t[_].toFixed(h)+","+e[_].toFixed(h)+" ";o.setAttribute("points",l);i&&o.setAttribute("class",i);r&&this._setClipPath(o,r);this._applyStyle(o,n);this._appendChild(o);return o}}return null};_SvgRenderEngine.prototype.drawSplines=function(t,e,i,n,r,s){if(t&&e){var a=new _Curve(t,e,s,this._options&&this._options.spline).calculate(),o=a.xs,h=a.ys,l=Math.min(o.length,h.length);if(l>0){var _=document.createElementNS(_SvgRenderEngine.svgNS,"polyline"),u=this.precision;this._applyColor(_,"stroke",this._stroke);if(null!==this._strokeWidth){this._setAttribute(_,"stroke-width",this._strokeWidth.toString());this._strokeWidth>1&&this._setAttribute(_,"stroke-linejoin",this._STROKE_JOIN)}_.setAttribute("fill","none");for(var c="",p=0;p<l;p++)c+=o[p].toFixed(u)+","+h[p].toFixed(u)+" ";_.setAttribute("points",c);i&&_.setAttribute("class",i);r&&this._setClipPath(_,r);this._applyStyle(_,n);this._appendChild(_);return _}}return null};_SvgRenderEngine.prototype.drawPolygon=function(t,e,i,n,r){if(t&&e){var s=Math.min(t.length,e.length);if(s>0){var a=document.createElementNS(_SvgRenderEngine.svgNS,"polygon"),o=this.precision;this._applyColor(a,"stroke",this._stroke);if(null!==this._strokeWidth){this._setAttribute(a,"stroke-width",this._strokeWidth.toString());this._strokeWidth>1&&this._setAttribute(a,"stroke-linejoin",this._STROKE_JOIN)}this._applyColor(a,"fill",this._fill);for(var h="",l=0;l<s;l++)h+=t[l].toFixed(o)+","+e[l].toFixed(o)+" ";a.setAttribute("points",h);i&&a.setAttribute("class",i);r&&this._setClipPath(a,r);this._applyStyle(a,n);this._appendChild(a);return a}}return null};_SvgRenderEngine.prototype.drawPieSegment=function(t,e,i,n,r,s,a,o){if(r>=2*Math.PI)return this.drawEllipse(t,e,i,i,s,a);var h=document.createElementNS(_SvgRenderEngine.svgNS,"path"),l=this.precision;this._applyColor(h,"fill",this._fill);this._applyColor(h,"stroke",this._stroke);null!==this._strokeWidth&&this._setAttribute(h,"stroke-width",this._strokeWidth.toString());var _=new Point(t,e);_.x+=i*Math.cos(n);_.y+=i*Math.sin(n);var u=n+r,c=new Point(t,e);c.x+=i*Math.cos(u);c.y+=i*Math.sin(u);var p=" 0 0,1 ";Math.abs(r)>Math.PI&&(p=" 0 1,1 ");var f="M "+_.x.toFixed(l)+","+_.y.toFixed(l);f+=" A "+i.toFixed(l)+","+i.toFixed(l)+p;f+=c.x.toFixed(l)+","+c.y.toFixed(l);f+=" L "+t.toFixed(l)+","+e.toFixed(l)+" z";h.setAttribute("d",f);o&&this._setClipPath(h,o);s&&h.setAttribute("class",s);this._applyStyle(h,a);this._appendChild(h);return h};_SvgRenderEngine.prototype.drawDonutSegment=function(t,e,i,n,r,s,a,o,h){var l=!1;if(s>=2*Math.PI){l=!0;s-=.001}var _=document.createElementNS(_SvgRenderEngine.svgNS,"path"),u=this.precision+2;this._applyColor(_,"fill",this._fill);this._applyColor(_,"stroke",this._stroke);null!==this._strokeWidth&&this._setAttribute(_,"stroke-width",this._strokeWidth.toString());var c=new Point(t,e);c.x+=i*Math.cos(r);c.y+=i*Math.sin(r);var p=r+s,f=new Point(t,e);f.x+=i*Math.cos(p);f.y+=i*Math.sin(p);var d=new Point(t,e);d.x+=n*Math.cos(p);d.y+=n*Math.sin(p);var g=new Point(t,e);g.x+=n*Math.cos(r);g.y+=n*Math.sin(r);var m=" 0 0,1 ",x=" 0 0,0 ";if(Math.abs(s)>Math.PI){m=" 0 1,1 ";x=" 0 1,0 "}var y="M "+c.x.toFixed(u)+","+c.y.toFixed(u);y+=" A "+i.toFixed(u)+","+i.toFixed(u)+m;y+=f.x.toFixed(u)+","+f.y.toFixed(u);y+=l?" M "+d.x.toFixed(u)+","+d.y.toFixed(u):" L "+d.x.toFixed(u)+","+d.y.toFixed(u);y+=" A "+n.toFixed(u)+","+n.toFixed(u)+x;y+=g.x.toFixed(u)+","+g.y.toFixed(u);l||(y+=" z");_.setAttribute("d",y);h&&this._setClipPath(_,h);a&&_.setAttribute("class",a);this._applyStyle(_,o);this._appendChild(_);return _};_SvgRenderEngine.prototype.drawString=function(t,e,i,n){return this._isHtmlString(t)?this._drawStringHtml(t,e,i,n):this._drawString(t,e,i,n)};_SvgRenderEngine.prototype._isHtmlString=function(t){return this._htmlText&&/<\/?[a-z][\s\S]*>/i.test(t)};_SvgRenderEngine.prototype._drawString=function(t,e,i,n){var r=this._createText(e,t),s=this.precision;i&&r.setAttribute("class",i);this._applyStyle(r,n);this._appendChild(r);var a,o=this._getKey(t,i,this._groupCls);if(this._bbCache[o]){a=this._bbCache[o];r.setAttribute("y",(e.y-(a.y+a.height)).toFixed(s))}else{a=this._getBBox(r);r.setAttribute("y",(e.y-(a.y+a.height-e.y)).toFixed(s))}this._isRtl&&!isIE()&&r.setAttribute("x",(e.x+a.width).toFixed(s));return r};_SvgRenderEngine.prototype._drawStringHtml=function(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");r.setAttribute("width","1000");r.setAttribute("height","100");r.setAttribute("x",e.x.toFixed(2));var s=document.createElement("span"),a=this._groupCls;a&&addClass(s,a);i&&addClass(s,i);this._applyStyle(s,n);s.innerHTML=t;r.appendChild(s);this._appendChild(r);var o=s.getBoundingClientRect();r.setAttribute("width",Math.ceil(o.width+2).toFixed(2));r.setAttribute("height",Math.ceil(o.height+1).toFixed(2));r.setAttribute("y",(e.y-o.height).toFixed(2));return r};_SvgRenderEngine.prototype.drawStringRotated=function(t,e,i,n,r,s){return this._isHtmlString(t)?this._drawStringRotatedHtml(t,e,i,n,r,s):this._drawStringRotated(t,e,i,n,r,s)};_SvgRenderEngine.prototype._drawStringRotated=function(t,e,i,n,r,s){var a=this._createText(e,t),o=this.precision;r&&a.setAttribute("class",r);this._applyStyle(a,s);var h=document.createElementNS(_SvgRenderEngine.svgNS,"g");h.setAttribute("transform","rotate("+n.toFixed(o)+","+i.x.toFixed(o)+","+i.y.toFixed(o)+")");h.appendChild(a);this._appendChild(h);var l=this._getBBox(a);a.setAttribute("y",(e.y-(l.y+l.height-e.y)).toFixed(o));this._isRtl&&!isIE()&&a.setAttribute("x",(e.x+l.width).toFixed(o));return a};_SvgRenderEngine.prototype._drawStringRotatedHtml=function(t,e,i,n,r,s){var a=this.precision,o=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");o.setAttribute("width","1000");o.setAttribute("height","100");o.setAttribute("x",e.x.toFixed(2));var h=document.createElement("span"),l=this._groupCls;l&&addClass(h,l);r&&addClass(h,r);this._applyStyle(h,s);h.innerHTML=t;o.appendChild(h);this._appendChild(o);var _=h.getBoundingClientRect();o.setAttribute("width",Math.ceil(_.width+2).toFixed(2));o.setAttribute("height",Math.ceil(_.height+1).toFixed(2));o.setAttribute("y",(e.y-_.height).toFixed(2));var u=document.createElementNS(_SvgRenderEngine.svgNS,"g");u.setAttribute("transform","rotate("+n.toFixed(a)+","+i.x.toFixed(a)+","+i.y.toFixed(a)+")");u.appendChild(o);this._appendChild(u);return o};_SvgRenderEngine.prototype.measureString=function(t,e,i,n){return this._isHtmlString(t)?this._measureStringHtml(t,e,i,n):this._measureString(t,e,i,n)};_SvgRenderEngine.prototype._measureString=function(t,e,i,n){var r=new Size(0,0);if(!this._fontFamily&&!this._fontSize){var s=this._getKey(t,e,i);if(this._bbCache[s])return this._bbCache[s]}if(this.cssPriority){this._fontSize&&this._text.setAttribute("font-size",this._fontSize);this._fontFamily&&this._text.setAttribute("font-family",this._fontFamily)}else{var a="";this._fontSize&&(a+="font-size:"+this._fontSize+";");this._fontFamily&&(a+="font-family:"+this._fontFamily+";");a.length>0&&this._text.setAttribute("style",a)}e&&this._text.setAttribute("class",e);i&&this._textGroup.setAttribute("class",i);this._applyStyle(this._text,n);this._setText(this._text,t);var o=this._getBBox(this._text);r.width=o.width;r.height=o.height;this._text.removeAttribute("font-size");this._text.removeAttribute("font-family");this._text.removeAttribute("class");this._text.removeAttribute("style");if(n)for(var h in n)this._text.removeAttribute(this._deCase(h));this._textGroup.removeAttribute("class");this._text.textContent=null;if(!this._fontFamily&&!this._fontSize){var l=this._getKey(t,e,i);this._bbCache[l]={x:o.x,y:o.y+1e3,width:o.width,height:o.height}}return r};_SvgRenderEngine.prototype._measureStringHtml=function(t,e,i,n){var r=new Size(0,0),s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");s.setAttribute("width","1000");s.setAttribute("height","100");s.setAttribute("x","-1000");s.setAttribute("y","-1000");var a=document.createElement("span");i&&addClass(a,i);e&&addClass(a,e);this._applyStyle(a,n);a.innerHTML=t;s.appendChild(a);e&&this._text.setAttribute("class",e);this._applyStyle(this._text,n);this._appendChild(s);var o=a.getBoundingClientRect();r.width=o.width;r.height=o.height;s.remove();return r};_SvgRenderEngine.prototype.startGroup=function(t,e,i){void 0===i&&(i=!1);var n=document.createElementNS(_SvgRenderEngine.svgNS,"g");if(t){n.setAttribute("class",t);this._groupCls=t}e&&this._setClipPath(n,e);this._appendChild(n);i&&n.transform.baseVal.appendItem(this._svg.createSVGTransform());this._group=n;return n};_SvgRenderEngine.prototype.endGroup=function(){if(this._group){var t=this._group.parentNode;if(t==this._svg){this._group=null;this._groupCls=null}else{this._group=t;this._groupCls=this._getClass(this._group)}}};_SvgRenderEngine.prototype.drawImage=function(t,e,i,n,r){var s=document.createElementNS(_SvgRenderEngine.svgNS,"image"),a=this.precision;s.setAttributeNS(_SvgRenderEngine.xlinkNS,"href",t);s.setAttribute("x",e.toFixed(a));s.setAttribute("y",i.toFixed(a));s.setAttribute("width",n.toFixed(a));s.setAttribute("height",r.toFixed(a));this._appendChild(s);return s};_SvgRenderEngine.prototype._setClipPath=function(t,e){t.setAttribute("clip-path","url(#"+e+")");_SvgRenderEngine._isSafari&&setCss(t,{"-webkit-clip-path":"url(#"+e+")"})};_SvgRenderEngine.prototype._appendChild=function(t){if(!this.readOnly){var e=this._group;e||(e=this._svg);e.appendChild(t)}};_SvgRenderEngine.prototype._create=function(){this._svg=document.createElementNS(_SvgRenderEngine.svgNS,"svg");this._defs=document.createElementNS(_SvgRenderEngine.svgNS,"defs");this._svg.appendChild(this._defs);this._text=this._createText(new Point(-1e3,-1e3),"");this._textGroup=document.createElementNS(_SvgRenderEngine.svgNS,"g");this._textGroup.appendChild(this._text);this._svg.appendChild(this._textGroup)};_SvgRenderEngine.prototype._setText=function(t,e){var i=e?e.toString():null;if(i&&i.indexOf("tspan")>=0)try{t.textContent=null;for(var n=new DOMParser,r='<svg xmlns="http://www.w3.org/2000/svg">'+i+"</svg>",s=n.parseFromString(r,"text/xml").documentElement.firstChild;s;){t.appendChild(t.ownerDocument.importNode(s,!0));s=s.nextSibling}}catch(t){throw new Error("Error parsing XML string.")}else t.textContent=i};_SvgRenderEngine.prototype._getKey=function(t,e,i){return t+(e||"")+(i||"")};_SvgRenderEngine.prototype._createText=function(t,e){var i=document.createElementNS(_SvgRenderEngine.svgNS,"text"),n=this.precision;this._setText(i,e);i.setAttribute("x",t.x.toFixed(n));i.setAttribute("y",t.y.toFixed(n));if(this.cssPriority){null!=this._textFill&&i.setAttribute("fill",this._textFill);this._fontSize&&i.setAttribute("font-size",this._fontSize);this._fontFamily&&i.setAttribute("font-family",this._fontFamily)}else{var r="";null!=this._textFill&&(r+="fill:"+this._textFill+";");this._fontSize&&(r+="font-size:"+this._fontSize+";");this._fontFamily&&(r+="font-family:"+this._fontFamily+";");r.length>0&&i.setAttribute("style",r)}return i};_SvgRenderEngine.prototype._applyStyle=function(t,e){if(e)for(var i in e)"fill"===i||"stroke"===i?this._applyColor(t,i,e[i]):t.setAttribute(this._deCase(i),e[i])};_SvgRenderEngine.prototype._deCase=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))};_SvgRenderEngine.prototype._getClass=function(t){var e;if(t)for(var i=t;i&&!(e=i.getAttribute("class"));i=i.parentNode);return e};_SvgRenderEngine.prototype._getBBox=function(t){if(!_SvgRenderEngine._isff)return t.getBBox();try{return t.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}};_SvgRenderEngine.prototype._applyColor=function(t,e,i){var n=_GradientColorUtil.tryParse(i);if(null!=n){if(!isString(n)){if(null==this._savedGradient[i]){var r,s="gc"+(1e6*Math.random()).toFixed();if(null!=n.x1){r=document.createElementNS(_SvgRenderEngine.svgNS,"linearGradient");["x1","y1","x2","y2","gradientUnits"].forEach((function(t){null!=n[t]&&r.setAttribute(t,n[t])}))}else if(null!=n.r){r=document.createElementNS(_SvgRenderEngine.svgNS,"radialGradient");["cx","cy","r","fx","fy","fr","gradientUnits"].forEach((function(t){null!=n[t]&&r.setAttribute(t,n[t])}))}n.colors&&n.colors&&n.colors.length>0&&n.colors.forEach((function(t){var e=document.createElementNS(_SvgRenderEngine.svgNS,"stop");null!=t.color&&e.setAttribute("stop-color",t.color);null!=t.offset&&e.setAttribute("offset",t.offset);null!=t.opacity&&e.setAttribute("stop-opacity",t.opacity);r.appendChild(e)}));r.setAttribute("id",s);this._defs.appendChild(r);this._savedGradient[i]=s}n="url("+this._baseUrl+"#"+this._savedGradient[i]+")"}this.cssPriority?t.setAttribute(e,n):this._addInlineStyle(t,e,n)}};_SvgRenderEngine.prototype._addInlineStyle=function(t,e,i){var n=t.getAttribute("style");n?t.setAttribute("style",n+e+":"+i+";"):t.setAttribute("style",e+":"+i+";")};_SvgRenderEngine.prototype._setAttribute=function(t,e,i){this.cssPriority?t.setAttribute(e,i):this._addInlineStyle(t,e,i)};_SvgRenderEngine.prototype._checkRtl=function(){return this._element&&hasClass(this._element,"wj-rtl")};_SvgRenderEngine.svgNS="http://www.w3.org/2000/svg";_SvgRenderEngine.xlinkNS="http://www.w3.org/1999/xlink";return _SvgRenderEngine}();export{_SvgRenderEngine};var _GradientColorUtil=function(){function _GradientColorUtil(){}_GradientColorUtil.tryParse=function(t){if(_GradientColorUtil.parsedColor[t])return _GradientColorUtil.parsedColor[t];if(null==t||-1===t.indexOf("-")||-1!==t.indexOf("var("))return t;var e,i=t.replace(/\s+/g,"").split(/\-/g),n=i[0][0],r=!1,s=i[0].match(/\(\S+\)/);if(!s||0==s.length)return t;var a=s[0].replace(/[\(\\)]/g,"").split(/\,/g);if("l"===n||"L"===n){e={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]};"l"===n&&(r=!0);["x1","y1","x2","y2"].forEach((function(t,i){null!=a[i]&&(e[t]=r?100*+a[i]+"%":a[i]+"")}))}else if("r"===n||"R"===n){e={cx:"0",cy:"0",r:"0",colors:[]};"r"===n&&(r=!0);["cx","cy","r","fx","fy","fr"].forEach((function(t,i){null!=a[i]&&""!==a[i]&&(e[t]=r?100*+a[i]+"%":a[i]+"")}))}r||(e.gradientUnits="userSpaceOnUse");_GradientColorUtil.parsedColor[t]=e;var o=i.length-1;i.forEach((function(t,i){t.indexOf(")")>-1&&(t=t.match(/\)\S+/)[0].replace(")",""));var n=t.split(":"),s={color:"black"};null!=n[0]&&(s.color=n[0]);null!=n[1]?s.offset=r?100*+n[1]+"%":n[1]+"":s.offset=i/o*100+"%";null!=n[2]&&(s.opacity=n[2]);e.colors.push(s)}));return e};_GradientColorUtil.parsedColor={};return _GradientColorUtil}(),SvgRenderEngine=function(t){__extends(SvgRenderEngine,t);function SvgRenderEngine(){return null!==t&&t.apply(this,arguments)||this}return SvgRenderEngine}(_SvgRenderEngine);export{SvgRenderEngine};var Legend=function(){function Legend(t){this._position=Position.Right;this._title="";this._titleAlign="left";this._titlePadding=5;this._areas=new Array;this._sz=new Size;this._colRowLens=[];this._orient=Orientation.Auto;this._scrollbar=!1;this._chart=t}Object.defineProperty(Legend.prototype,"position",{get:function(){return this._position},set:function(t){if((t=asEnum(t,Position))!=this._position){this._position=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Legend.prototype,"reverse",{get:function(){return this._reverse},set:function(t){if(t!=this._reverse){this._reverse=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Legend.prototype,"title",{get:function(){return this._title},set:function(t){if(t!=this._title){this._title=asString(t,!1);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Legend.prototype,"titleAlign",{get:function(){return this._titleAlign},set:function(t){if(t!=this._titleAlign){var e=asString(t,!1);this._titleAlign="right"===e?"right":"center"===e?"center":"left";this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Legend.prototype,"orientation",{get:function(){return this._orient},set:function(t){if((t=asEnum(t,Orientation))!=this._orient){this._orient=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Legend.prototype,"maxSize",{get:function(){return this._maxSz},set:function(t){if(t!=this._maxSz){if(isNumber(t))this._maxSz=t;else if(isString(t)){var e=asString(t);assert(FlexChartBase._endsWith(e,"px")||FlexChartBase._endsWith(e,"%"),"number with unit (px or %) expected.");this._maxSz=e}else t&&assert(!1,"number or string expected.");this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Legend.prototype,"scrollbar",{get:function(){return this._scrollbar},set:function(t){if(t!=this._scrollbar){this._scrollbar=asBoolean(t,!1);this._invalidate()}},enumerable:!0,configurable:!0});Legend.prototype._getDesiredSize=function(t,e,i,n){if(e==Position.None)return null;var r=this.orientation==Orientation.Auto?e==Position.Right||e==Position.Left||e==Position.LeftTop||e==Position.LeftBottom||e==Position.RightTop||e==Position.RightBottom:this.orientation==Orientation.Vertical,s=new Size;this.title.length>0&&(n-=(s=t.measureString(this.title,"wj-title","wj-legend")).height+this._titlePadding);var a=this._chart._getDesiredLegendSize(t,r,i,n);if(null!=a){if(this.title.length>0){a.height+=s.height+this._titlePadding;s.width>a.width&&(a.width=s.width)}this._sz=a.clone();if(this.scrollbar&&a.height>n){r&&(a.width+=18);a.height=n}}return a};Legend.prototype._getPosition=function(t,e){return this.position==Position.Auto?t>=e?Position.Right:Position.Bottom:this.position};Legend.prototype._render=function(t,e,i,n,r){this._areas=[];var s=this.orientation==Orientation.Auto?i==Position.Right||i==Position.Left||i==Position.LeftTop||i==Position.LeftBottom||i==Position.RightTop||i==Position.RightBottom:this.orientation==Orientation.Vertical,a=0;t.fill="transparent";t.stroke=null;t.drawRect(e.x,e.y,n,r);if(this.title.length){var o=e.clone(),h=t.measureString(this.title,"wj-title`");o.y+=h.height;"right"===this.titleAlign?o.x=e.x+n-h.width:"center"===this.titleAlign&&(o.x=e.x+.5*(n-h.width));t.drawString(this.title,o,"wj-title");a=h.height+this._titlePadding;e.y+=a;r-=a}var l=!1;this.scrollbar&&this._sz.height>r&&(l=!0);this._chart._renderLegend(t,e,this._areas,s,l?n-18:n,r);if(l){e.y-=a;r+=a;this._addScrollbar(t,e,n,r,this._sz.height)}};Legend.prototype._hitTest=function(t){for(var e=this._areas,i=0;i<e.length;i++)if(e[i]&&FlexChartBase._contains(e[i],t))return i;return null};Legend.prototype._addScrollbar=function(t,e,i,n,r){t.endGroup();var s=t.element,a=s.children.item(s.children.length-1);a.removeAttribute("clip-path");a.remove();Array.from(a.querySelectorAll("text,rect")).forEach((function(t){t.setAttribute("x",(+t.getAttribute("x")-e.x).toFixed(2));t.setAttribute("y",(+t.getAttribute("y")-e.y).toFixed(2))}));Array.from(a.querySelectorAll("ellipse")).forEach((function(t){t.setAttribute("cx",(+t.getAttribute("cx")-e.x).toFixed(2));t.setAttribute("cy",(+t.getAttribute("cy")-e.y).toFixed(2))}));Array.from(a.querySelectorAll("line")).forEach((function(t){t.setAttribute("x1",(+t.getAttribute("x1")-e.x).toFixed(2));t.setAttribute("y1",(+t.getAttribute("y1")-e.y).toFixed(2));t.setAttribute("x2",(+t.getAttribute("x2")-e.x).toFixed(2));t.setAttribute("y2",(+t.getAttribute("y2")-e.y).toFixed(2))}));var o=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");o.setAttribute("x",e.x.toFixed(2));o.setAttribute("y",e.y.toFixed(2));o.setAttribute("width",i.toFixed(2));o.setAttribute("height",n.toFixed(2));var h=document.createElement("div");h.setAttribute("style","height:100%;overflow-x:hidden;overflow-y:scroll;");var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width",i.toFixed(2));l.setAttribute("height",r.toFixed(2));l.appendChild(a);h.appendChild(l);o.appendChild(h);s.appendChild(o)};Legend.prototype._invalidate=function(){this._chart&&this._chart.invalidate()};Legend.prototype._getMaxSize=function(t){var e=this.maxSize;if(isNumber(e)){if((n=asNumber(e,!0))>0)return Math.min(n,t)}else{var i=asString(e,!0);if(i)if(FlexChartBase._endsWith(i,"px")){if((n=parseFloat(i.replace("px","")))>0)return Math.min(n,t)}else if(FlexChartBase._endsWith(i,"%")){var n;if((n=parseFloat(i.replace("%","")))>0)return t*Math.min(n,100)/100}}return.5*t};return Legend}();export{Legend};var DataPoint=function DataPoint(t,e){void 0===t&&(t=0);void 0===e&&(e=0);this.x=t;this.y=e};export{DataPoint};var RenderEventArgs=function(t){__extends(RenderEventArgs,t);function RenderEventArgs(e){var i=t.call(this)||this;i._engine=e;return i}Object.defineProperty(RenderEventArgs.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0});return RenderEventArgs}(CancelEventArgs);export{RenderEventArgs};var SeriesRenderingEventArgs=function(t){__extends(SeriesRenderingEventArgs,t);function SeriesRenderingEventArgs(e,i,n){var r=t.call(this,e)||this;r._index=i;r._count=n;return r}Object.defineProperty(SeriesRenderingEventArgs.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0});Object.defineProperty(SeriesRenderingEventArgs.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});return SeriesRenderingEventArgs}(RenderEventArgs);export{SeriesRenderingEventArgs};export var ImageFormat;!function(t){t[t.Png=0]="Png";t[t.Jpeg=1]="Jpeg";t[t.Svg=2]="Svg"}(ImageFormat||(ImageFormat={}));export var SelectionMode;!function(t){t[t.None=0]="None";t[t.Series=1]="Series";t[t.Point=2]="Point"}(SelectionMode||(SelectionMode={}));export var Position;!function(t){t[t.None=0]="None";t[t.Left=1]="Left";t[t.Top=2]="Top";t[t.Right=3]="Right";t[t.Bottom=4]="Bottom";t[t.Auto=5]="Auto";t[t.TopLeft=6]="TopLeft";t[t.TopRight=7]="TopRight";t[t.BottomLeft=8]="BottomLeft";t[t.BottomRight=9]="BottomRight";t[t.LeftTop=10]="LeftTop";t[t.LeftBottom=11]="LeftBottom";t[t.RightTop=12]="RightTop";t[t.RightBottom=13]="RightBottom"}(Position||(Position={}));export var Orientation;!function(t){t[t.Auto=0]="Auto";t[t.Vertical=1]="Vertical";t[t.Horizontal=2]="Horizontal"}(Orientation||(Orientation={}));var FlexChartBase=function(t){__extends(FlexChartBase,t);function FlexChartBase(){var e=null!==t&&t.apply(this,arguments)||this;e._palette=null;e._selectionMode=SelectionMode.None;e._defPalette=Palettes.standard;e._notifyCurrentChanged=!0;e._legendHost=null;e._needBind=!1;e._skipLightClr=!1;e.rendering=new Event;e.rendered=new Event;e.itemsSourceChanging=new Event;e.itemsSourceChanged=new Event;e.selectionChanged=new Event;return e}Object.defineProperty(FlexChartBase.prototype,"itemsSource",{get:function(){return this._items},set:function(t){if(this._items!=t){var e=new CancelEventArgs;if(!this.onItemsSourceChanging(e))return;if(this._cv){this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this);this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this);this._cv=null}this._items=t;this._cv=asCollectionView(t);if(null!=this._cv){this._cv.currentChanged.addHandler(this._cvCurrentChanged,this);this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)}this._clearCachedValues();this.onItemsSourceChanged(e);this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"palette",{get:function(){return this._palette},set:function(t){if(t!=this._palette){this._palette=asArray(t);this._skipLightClr=Palettes._isExtended(this._palette);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(t){if(t!=this._plotMargin){this._plotMargin=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"legend",{get:function(){return this._legend},set:function(t){if(t!=this._legend){this._legend=asType(t,Legend);null!=this._legend&&(this._legend._chart=this)}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"header",{get:function(){return this._header},set:function(t){if(t!=this._header){this._header=asString(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"footer",{get:function(){return this._footer},set:function(t){if(t!=this._footer){this._footer=asString(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(t){if(t!=this._headerStyle){this._headerStyle=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(t){if(t!=this._footerStyle){this._footerStyle=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){if((t=asEnum(t,SelectionMode))!=this._selectionMode){this._selectionMode=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){if(t!=this._itemFormatter){this._itemFormatter=asFunction(t);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartBase.prototype,"options",{get:function(){return this._options},set:function(t){if(t!=this._options){this._options=t;this.invalidate()}},enumerable:!0,configurable:!0});FlexChartBase.prototype.onRendering=function(t){this.rendering.raise(this,t)};FlexChartBase.prototype.onRendered=function(t){this.rendered.raise(this,t)};FlexChartBase.prototype.onItemsSourceChanging=function(t){this.itemsSourceChanging.raise(this,t);return!t.cancel};FlexChartBase.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)};FlexChartBase.prototype.saveImageToFile=function(t){var e,i,n,r;t&&0!==t.length&&-1!==t.indexOf(".")||(t="image.png");r=t.split(".");e=r[0];i=r[1].toLowerCase();n=ImageFormat[i[0].toUpperCase()+i.substring(1)];this.saveImageToDataUrl(n,(function(t){ExportHelper.downloadImage(t,e,i)}))};FlexChartBase.prototype.saveImageToDataUrl=function(t,e){var i=asEnum(t,ImageFormat,!1),n=ImageFormat[i].toLowerCase();n&&n.length&&this._exportToImage(n,(function(t){e.call(e,t)}))};FlexChartBase.prototype.saveSvgToDataUrl=function(t,e){void 0===e&&(e=!0);this._exportToImage("svg",(function(e){t.call(t,e)}),{embedCss:e})};FlexChartBase.prototype.saveSvgToFile=function(t,e){void 0===e&&(e=!0);this.saveSvgToDataUrl((function(e){ExportHelper.downloadImage(e,t,"svg")}),e)};FlexChartBase.prototype._exportToImage=function(t,e,i){var n=this;void 0===i&&(i=null);var r=this._currentRenderEngine.element;i&&!1===i.embedCss?ExportHelper.getDataUri2(r,this,(function(i){n.prepareDataUri(r,t,i,e)})):ExportHelper.getDataUri(r,this,(function(i){n.prepareDataUri(r,t,i,e)}))};FlexChartBase.prototype.prepareDataUri=function(t,e,i,n){var r=this;if("svg"===e)n.call(null,i);else{var s=new Image;s.onload=function(){var i,a=document.createElement("canvas"),o=t.parentNode||t,h=getElementRect(o);a.width=h.width;a.height=h.height;var l=a.getContext("2d"),_=r._bgColor(r.hostElement);r._isTransparent(_)&&(_="#ffffff");l.fillStyle=_;l.fillRect(0,0,h.width,h.height);var u=window.getComputedStyle(o,null).getPropertyValue("padding-left").replace("px",""),c=window.getComputedStyle(o,null).getPropertyValue("padding-top").replace("px","");l.drawImage(s,+u||0,+c||0);i=a.toDataURL("image/"+e);n.call(null,i);a=null};s.src=i}};FlexChartBase.prototype.refresh=function(e){void 0===e&&(e=!0);t.prototype.refresh.call(this,e);this.isUpdating||this._refreshChart()};FlexChartBase.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)};FlexChartBase.prototype.onLostFocus=function(e){this._tooltip&&this._tooltip.isVisible&&!this.isTouching&&this._tooltip.hide();t.prototype.onLostFocus.call(this,e)};FlexChartBase.prototype._cvCollectionChanged=function(t,e){this._clearCachedValues();this._bindChart()};FlexChartBase.prototype._cvCurrentChanged=function(t,e){this._notifyCurrentChanged&&this._bindChart()};FlexChartBase.prototype._bgColor=function(t){if(!t)return"transparent";var e=getComputedStyle(t).backgroundColor;return this._isTransparent(e)?this._bgColor(t.parentElement):e};FlexChartBase.prototype._isTransparent=function(t){var e=new Color(t);return 0==e.a&&0==e.b&&0==e.g&&0==e.r};FlexChartBase.prototype._getColor=function(t){var e=this._defPalette;null!=this._palette&&this._palette.length>0&&(e=this._palette);return e[t%e.length]};FlexChartBase.prototype._getColorLight=function(t){var e=this._getColor(t);this._skipLightClr||(e=this._getLightColor(e));return e};FlexChartBase.prototype._getLightColor=function(t){var e=new Color(t);if(null!=e&&-1===t.indexOf("-")){1==e.a&&-1==t.indexOf("rgba")&&-1==t.indexOf("hsla")&&(e.a*=.7);t=e.toString()}return t};FlexChartBase.prototype._bindChart=function(){this._needBind=!0;this.invalidate()};FlexChartBase.prototype._clearCachedValues=function(){};FlexChartBase.prototype._renderEls=function(t,e,i,n,r){void 0===i&&(i=!0);void 0===n&&(n=null);void 0===r&&(r=!1);var s=e.width,a=e.height;if(0!=s){(isNaN(s)||s<0)&&(s=FlexChartBase._WIDTH);(a<=0||isNaN(a))&&(a=FlexChartBase._HEIGHT);var o=s>0&&a>0;o&&t.setViewportSize(s,a);var h=0;if(this.legend.scrollbar&&this._legendHost){(c=this._legendHost.closest("div"))&&(h=c.scrollTop)}this._currentRenderEngine._htmlText=this._isHtmlText();t.beginRender();t.cssPriority=!0;if(o){this._rectChart=new Rect(0,0,s,a);this._prepareRender();if(n){var l=t.stroke,_=t.fill;t.fill=n;t.stroke=null;t.drawRect(0,0,s,a);t.fill=_;t.stroke=l}var u=new Rect(0,0,s,a);this._chartRectId="chartRect"+(1e6*Math.random()).toFixed();t.addClipRect(u,this._chartRectId);this._renderHeader(t,u);this._renderFooter(t,u);this._renderLegends(t,u);this._renderChart(t,u,i);if(this.legend.scrollbar&&this._legendHost){var c;(c=this._legendHost.closest("div"))&&(c.scrollTop=h)}}t.endRender()}};FlexChartBase.prototype._render=function(t,e,i){void 0===e&&(e=!0);void 0===i&&(i=null);var n=this._getHostSize();if(this._h){var r=n.height-this._h;r>=4&&r<=6&&!1!==this._isPCUnit("height")&&(n.height=this._h)}this._h=n.height;this._renderEls(t,n,e,i)};FlexChartBase.prototype._isPCUnit=function(t){var e=null,i=this.hostElement;if(i&&i.computedStyleMap){var n=i.computedStyleMap();if(n){var r=n.get(t);r&&(e="percent"==r.unit)}}return e};FlexChartBase.prototype._renderHidden=function(t,e){void 0===t&&(t=null);void 0===e&&(e=null);var i=document.createElement("div");addClass(i,this.hostElement.getAttribute("class")||"");i.style.visibility="hidden";var n=new _SvgRenderEngine(i);document.body.appendChild(i);if(!t){var r=this._getHostComputedStyle(),s=0,a=0;if(r){s=this._parsePx(r.width);a=this._parsePx(r.height);0==s&&(s=FlexChartBase._WIDTH);0==a&&(a=FlexChartBase._HEIGHT);s-=this._parsePx(r.paddingLeft);s-=this._parsePx(r.paddingRight);a-=this._parsePx(r.paddingTop);a-=this._parsePx(r.paddingBottom);s-=this._parsePx(r.borderLeftWidth);s-=this._parsePx(r.borderRightWidth);a-=this._parsePx(r.borderTopWidth);a-=this._parsePx(r.borderBottomWidth)}0==s&&(s=FlexChartBase._WIDTH);0==a&&(a=FlexChartBase._HEIGHT);t=new Size(s,a)}this._renderEls(n,t,!0,e,!0);removeChild(i);return n.element};FlexChartBase.prototype._renderHeader=function(t,e){t.startGroup(FlexChartBase._CSS_HEADER,this._chartRectId);e=this._drawTitle(t,e,this.header,this.headerStyle,!1);t.endGroup()};FlexChartBase.prototype._renderFooter=function(t,e){t.startGroup(FlexChartBase._CSS_FOOTER,this._chartRectId);e=this._drawTitle(t,e,this.footer,this.footerStyle,!0);t.endGroup()};FlexChartBase.prototype._renderLegends=function(t,e){var i,n,r=this.legend,s=e.width,a=e.height,o=r._getPosition(s,a),h=s,l=a;o==Position.Left||o==Position.Right||o==Position.LeftTop||o==Position.LeftBottom||o==Position.RightTop||o==Position.RightBottom?h=this._getLegendSize(s,h):l=this._getLegendSize(a,l);if(i=r._getDesiredSize(t,o,h,l)){o==Position.Left||o==Position.Right||o==Position.LeftTop||o==Position.LeftBottom||o==Position.RightTop||o==Position.RightBottom?i.width=this._getLegendSize(s,i.width):i.height=this._getLegendSize(a,i.height);i.height>e.height&&(i.height=e.height);switch(o){case Position.Right:s-=i.width;n=new Point(s,e.top+.5*(a-i.height));break;case Position.RightTop:s-=i.width;n=new Point(s,e.top);break;case Position.RightBottom:s-=i.width;n=new Point(s,e.top+(a-i.height));break;case Position.Left:e.left+=i.width;s-=i.width;n=new Point(0,e.top+.5*(a-i.height));break;case Position.LeftTop:e.left+=i.width;s-=i.width;n=new Point(0,e.top);break;case Position.LeftBottom:e.left+=i.width;s-=i.width;n=new Point(0,e.top+(a-i.height));break;case Position.Top:a-=i.height;n=new Point(.5*(s-i.width),e.top);e.top+=i.height;break;case Position.TopLeft:a-=i.height;n=new Point(0,e.top);e.top+=i.height;break;case Position.TopRight:a-=i.height;n=new Point(s-i.width,e.top);e.top+=i.height;break;case Position.Bottom:a-=i.height;n=new Point(.5*(s-i.width),e.top+a);break;case Position.BottomLeft:a-=i.height;n=new Point(0,e.top+a);break;case Position.BottomRight:a-=i.height;n=new Point(s-i.width,e.top+a)}e.width=s;e.height=a;this._rectLegend=new Rect(n.x,n.y,i.width,i.height);var _="legRect"+(1e6*Math.random()).toFixed();t.addClipRect(this._rectLegend,_);this._legendHost=t.startGroup(FlexChartBase._CSS_LEGEND,_);this.legend._render(t,n,o,i.width,i.height);t.endGroup()}else{this._legendHost=null;this._rectLegend=null}};FlexChartBase.prototype._prepareRender=function(){};FlexChartBase.prototype._renderChart=function(t,e,i){};FlexChartBase.prototype._performBind=function(){};FlexChartBase.prototype._getDesiredLegendSize=function(t,e,i,n){return null};FlexChartBase.prototype._renderLegend=function(t,e,i,n,r,s){};FlexChartBase.prototype._getHitTestItem=function(t){return null};FlexChartBase.prototype._getHitTestValue=function(t,e){return null};FlexChartBase.prototype._getHitTestLabel=function(t){return null};FlexChartBase.prototype._refreshChart=function(){if(this._needBind){this._needBind=!1;this._performBind()}this.hostElement&&this._render(this._currentRenderEngine)};FlexChartBase.prototype._drawTitle=function(t,e,i,n,r){var s=FlexChartBase._CSS_TITLE,a=r?FlexChartBase._CSS_FOOTER:FlexChartBase._CSS_HEADER,o=null;r?this._rectFooter=null:this._rectHeader=null;if(null!=i){var h=null,l=null,_=null,u=null;if(n){n.fontSize&&(h=n.fontSize);n.foreground&&(l=n.foreground);n.fill&&(l=n.fill);n.fontFamily&&(_=n.fontFamily);n.halign&&(u=n.halign)}t.fontSize=h;t.fontFamily=_;o=t.measureString(i,s,a,n);e.height-=o.height;l||(l=FlexChartBase._FG);t.textFill=l;if(r){"left"==u?FlexChartBase._renderText(t,i,new Point(e.left,e.bottom),0,0,s,a,n):"right"==u?FlexChartBase._renderText(t,i,new Point(e.left+e.width,e.bottom),2,0,s,a,n):FlexChartBase._renderText(t,i,new Point(e.left+.5*e.width,e.bottom),1,0,s,a,n);this._rectFooter=new Rect(e.left,e.bottom,e.width,o.height)}else{this._rectHeader=new Rect(e.left,e.top,e.width,o.height);e.top+=o.height;"left"==u?FlexChartBase._renderText(t,i,new Point(e.left,0),0,0,s,a,n):"right"==u?FlexChartBase._renderText(t,i,new Point(e.left+e.width,0),2,0,s,a,n):FlexChartBase._renderText(t,i,new Point(e.left+.5*e.width,0),1,0,s,a,n)}t.textFill=null;t.fontSize=null;t.fontFamily=null}return e};FlexChartBase.prototype.pageToControl=function(t,e){return this._toControl(t,e)};FlexChartBase.prototype._toControl=function(t,e){isNumber(t)&&isNumber(e)?t=new Point(t,e):t instanceof MouseEvent&&(t=mouseToPage(t));asType(t,Point);var i=t.clone(),n=this._getHostOffset();i.x-=n.x;i.y-=n.y;var r=this._currentRenderEngine?this._currentRenderEngine.element:null;if(null!=r){var s=r.getBoundingClientRect(),a=parseFloat(r.getAttribute("width")),o=parseFloat(r.getAttribute("height"));s.width!=a&&(i.x*=a/s.width);s.height!=o&&(i.y*=o/s.height)}var h=this._getHostComputedStyle();if(h){var l=parseInt(h.paddingLeft.replace("px",""));l&&!isNaN(l)&&(i.x-=l);var _=parseInt(h.paddingTop.replace("px",""));_&&!isNaN(_)&&(i.y-=_)}return i};FlexChartBase.prototype._highlightItems=function(t,e,i){if(i)for(var n=0;n<t.length;n++)addClass(t[n],e);else for(n=0;n<t.length;n++)removeClass(t[n],e)};FlexChartBase.prototype._parseMargin=function(t){var e={};if(isNumber(t)&&!isNaN(t))e.top=e.bottom=e.left=e.right=asNumber(t);else if(isString(t)){var i=asString(t).split(" ",4),n=NaN,r=NaN,s=NaN,a=NaN;if(i){if(4==i.length){n=parseFloat(i[0]);a=parseFloat(i[1]);r=parseFloat(i[2]);s=parseFloat(i[3])}else if(2==i.length){n=r=parseFloat(i[0]);s=a=parseFloat(i[1])}else 1==i.length&&(n=r=s=a=parseFloat(i[1]));isNaN(n)||(e.top=n);isNaN(r)||(e.bottom=r);isNaN(s)||(e.left=s);isNaN(a)||(e.right=a)}}return e};FlexChartBase.prototype._showToolTip=function(t,e){var i=this,n=this._tooltip.showDelay;i._clearTimeouts();if(!i.isDisabled){t||i._tooltip.hide();if(n>0)i._toShow=setTimeout((function(){i._tooltip.show(i.hostElement,t,e);i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))}),n);else{i._tooltip.show(i.hostElement,t,e);i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))}}};FlexChartBase.prototype._hideToolTip=function(){this._clearTimeouts();this._tooltip.hide()};FlexChartBase.prototype._clearTimeouts=function(){if(this._toShow){clearTimeout(this._toShow);this._toShow=null}if(this._toHide){clearTimeout(this._toHide);this._toHide=null}};FlexChartBase.prototype._getHostOffset=function(){var t=getElementRect(this.hostElement);return new Point(t.left,t.top)};FlexChartBase.prototype._getHostSize=function(){var t=new Size,e=this.hostElement,i=this._getHostComputedStyle(),n=e.offsetWidth,r=e.offsetHeight;if(i){n-=this._parsePx(i.paddingLeft);n-=this._parsePx(i.paddingRight);r-=this._parsePx(i.paddingTop);r-=this._parsePx(i.paddingBottom);n-=this._parsePx(i.borderLeftWidth);n-=this._parsePx(i.borderRightWidth);r-=this._parsePx(i.borderTopWidth);r-=this._parsePx(i.borderBottomWidth);t.width=n;t.height=r}return t};FlexChartBase.prototype._parsePx=function(t){var e=parseFloat(t.replace("px",""));return isNaN(e)?0:e};FlexChartBase.prototype._getHostComputedStyle=function(){var t=this.hostElement;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(this.hostElement):null};FlexChartBase.prototype._find=function(t,e){for(var i=[],n=0;n<t.childElementCount;n++){var r=t.childNodes.item(n);if(e.indexOf(r.nodeName)>=0)i.push(r);else{var s=this._find(r,e);if(s.length>0)for(var a=0;a<s.length;a++)i.push(s[a])}}return i};FlexChartBase.prototype._getLegendSize=function(t,e){return Math.min(e,this.legend._getMaxSize(t))};FlexChartBase.prototype._isHtmlText=function(){return this._options&&this._options.htmlText};FlexChartBase._contains=function(t,e){return!(!t||!e)&&(e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)};FlexChartBase._intersects=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)};FlexChartBase._toOADate=function(t){return t.valueOf()};FlexChartBase._fromOADate=function(t){return new Date(t)};FlexChartBase._renderText=function(t,e,i,n,r,s,a,o,h){var l=t.measureString(e,s,a,o),_=i.x,u=i.y;switch(n){case 1:_-=.5*l.width;break;case 2:_-=l.width}switch(r){case 1:u+=.5*l.height;break;case 0:u+=l.height}var c=new Rect(_,u-l.height,l.width,l.height);if(h){if(h(c)){t.drawString(e,new Point(_,u),s,o);return c}return null}t.drawString(e,new Point(_,u),s,o);return c};FlexChartBase._renderRotatedText=function(t,e,i,n,r,s,a,o,h,l){var _=t.measureString(e,o,h,l),u=i.x,c=i.y;switch(n){case 1:u-=.5*_.width;break;case 2:u-=_.width}switch(r){case 1:c+=.5*_.height;break;case 0:c+=_.height}return t.drawStringRotated(e,new Point(u,c),s,a,o,l)};FlexChartBase._endsWith=function(t,e){if(t&&e){var i=t.length-e.length;return i>=0&&t.indexOf(e,i)===i}return!1};FlexChartBase._WIDTH=300;FlexChartBase._HEIGHT=200;FlexChartBase._SELECTION_THRESHOLD=15;FlexChartBase._CSS_LEGEND="wj-legend";FlexChartBase._CSS_HEADER="wj-header";FlexChartBase._CSS_FOOTER="wj-footer";FlexChartBase._CSS_TITLE="wj-title";FlexChartBase._CSS_LABEL="wj-label";FlexChartBase._CSS_SELECTION="wj-state-selected";FlexChartBase._CSS_PLOT_AREA="wj-plot-area";FlexChartBase._FG="#666";FlexChartBase._epoch=new Date(1899,11,30).getTime();FlexChartBase._msPerDay=864e5;return FlexChartBase}(Control);export{FlexChartBase};var _KeyWords=function(){function _KeyWords(){this._keys={};this._keys.seriesName=null;this._keys.pointIndex=null;this._keys.x=null;this._keys.y=null;this._keys.value=null;this._keys.name=null}_KeyWords.prototype.replace=function(t,e){var i=this;return format(t,{},(function(t,n,r,s){return i.getValue(n,e,r)}))};_KeyWords.prototype.getValue=function(t,e,i){switch(t){case"seriesName":return e.series?e.series.name:"";case"pointIndex":return null!=e.pointIndex?e.pointIndex.toFixed():"";case"x":return i?Globalize.format(e.x,i):e._xfmt;case"y":return i?Globalize.format(e.y,i):e._yfmt;case"value":return i?Globalize.format(e.value,i):e._getValueFmt();case"name":return e.name}if(e.item){0==t.indexOf("item.")&&(t=t.substr(5));var n=e.item[t];if(!isUndefined(n))return i?Globalize.format(n,i):n}return""};return _KeyWords}();export{_KeyWords};var ExportHelper=function(){function ExportHelper(){}ExportHelper.downloadImage=function(t,e,i){var n=document.createElement("a"),r="image/"+i;if(navigator.msSaveOrOpenBlob){t=t.substring(t.indexOf(",")+1);var s,a,o,h=atob(t),l=[];for(s=0;s<h.length;s+=512){a=h.slice(s,s+512);for(var _=new Array(a.length),u=0;u<a.length;u++)_[u]=a.charCodeAt(u);var c=new Uint8Array(_);l.push(c)}o=new Blob(l,{type:r});navigator.msSaveOrOpenBlob(o,e+"."+i)}else{n.download=e+"."+i;n.href=t;document.body.appendChild(n);n.addEventListener("click",(function(t){removeChild(n)}));n.click()}};ExportHelper.getDataUri=function(t,e,i){var n,r,s,a,o,h,l,_,u,c,p=document.createElement("div"),f=t.cloneNode(!0),d=!1;if("svg"==t.tagName){r=(n=getElementRect(t.parentNode||t)).width||0;s=n.height||0;0==r&&(d=!0);a=t.viewBox.baseVal&&0!==t.viewBox.baseVal.width?t.viewBox.baseVal.width:r;o=t.viewBox.baseVal&&0!==t.viewBox.baseVal.height?t.viewBox.baseVal.height:s}else{r=(h=t.getBBox()).x+h.width;s=h.y+h.height;f.setAttribute("transform",f.getAttribute("transform").replace(/translate\(.*?\)/,""));a=r;o=s;(_=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(f);f=_}if(d){var g=e._renderHidden(),m=e._getHostComputedStyle(),x=0,y=0;if(m){x=e._parsePx(m.width);y=e._parsePx(m.height)}0==x&&(x=FlexChartBase._WIDTH);0==y&&(y=FlexChartBase._HEIGHT);a=r=x;o=s=y;f=g.cloneNode(!0)}f.setAttribute("version","1.1");f.setAttributeNS(ExportHelper.xmlns,"xmlns","http://www.w3.org/2000/svg");f.setAttributeNS(ExportHelper.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink");f.setAttribute("width",r);f.setAttribute("height",s);f.setAttribute("viewBox","0 0 "+a+" "+o);addClass(f,t.parentNode&&t.parentNode.getAttribute("class")||"");p.appendChild(f);l=ExportHelper.getStyles(t);l+=".wj-flexchart{margin:0px;padding:0px;border:none;width:"+r+"px;height:"+s+"px;}\n";(u=document.createElement("style")).setAttribute("type","text/css");u.innerHTML="<![CDATA[\n"+l+"\n]]>";(c=document.createElementNS("http://www.w3.org/2000/svg","defs")).appendChild(u);f.insertBefore(c,f.firstChild);isIE()||f.querySelectorAll("foreignObject").forEach((function(t){if(f===t.parentNode)f.removeChild(t);else for(var e=0,i=t.children;e<i.length;e++){i[e].setAttribute("xmlns","http://www.w3.org/1999/xhtml")}}));var b=e._currentRenderEngine.canvas;if(b){var v=document.createElementNS("http://www.w3.org/2000/svg","image");v.setAttribute("width",b.width);v.setAttribute("height",b.height);v.setAttribute("href",b.toDataURL());f.insertBefore(v,f.firstChild);e.invalidate()}this.convertImagesToDataUrl(f,(function(){var t="data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(ExportHelper.doctype+p.innerHTML)));i.call(null,t)}))};ExportHelper.convertImagesToDataUrl=function(t,e){var i=t.querySelectorAll("image");if(0!==i.length){var n=Array.from(i);Array.from(i).forEach((function(t){var i=new Image;i.onload=function(){var r=document.createElement("canvas");r.width=+t.getAttribute("width");r.height=+t.getAttribute("height");var s=r.getContext("2d"),a=i.width/i.height;a<r.width/r.height?s.drawImage(i,0,0,i.width,i.height,.5*(r.width-a*r.height),0,a*r.height,r.height):s.drawImage(i,0,0,i.width,i.height,0,.5*(r.height-r.width/a),r.width,r.width/a);t.setAttribute("href",r.toDataURL());i.remove();n.splice(n.indexOf(t),1);0==n.length&&e()};i.src=t.getAttribute("href")}))}else e()};ExportHelper.getDataUri2=function(t,e,i){var n,r,s,a,o,h,l,_=document.createElement("div"),u=this.cloneWithComputedStyles(t),c=!1;if("svg"==t.tagName){r=(n=getElementRect(t.parentNode||t)).width||0;s=n.height||0;0==r&&(c=!0);a=t.viewBox.baseVal&&0!==t.viewBox.baseVal.width?t.viewBox.baseVal.width:r;o=t.viewBox.baseVal&&0!==t.viewBox.baseVal.height?t.viewBox.baseVal.height:s}else{r=(h=t.getBBox()).x+h.width;s=h.y+h.height;u.setAttribute("transform",u.getAttribute("transform").replace(/translate\(.*?\)/,""));a=r;o=s;(l=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(u);u=l}if(c){var p=e._renderHidden(),f=e._getHostComputedStyle(),d=0,g=0;if(f){d=e._parsePx(f.width);g=e._parsePx(f.height)}0==d&&(d=FlexChartBase._WIDTH);0==g&&(g=FlexChartBase._HEIGHT);a=r=d;o=s=g;u=this.cloneWithComputedStyles(p)}u.setAttribute("version","1.1");u.setAttributeNS(ExportHelper.xmlns,"xmlns","http://www.w3.org/2000/svg");u.setAttributeNS(ExportHelper.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink");u.setAttribute("width",r);u.setAttribute("height",s);u.setAttribute("viewBox","0 0 "+a+" "+o);_.appendChild(u);var m=e._currentRenderEngine.canvas;if(m){var x=document.createElementNS("http://www.w3.org/2000/svg","image");x.setAttribute("width",m.width);x.setAttribute("height",m.height);x.setAttribute("href",m.toDataURL());u.insertBefore(x,u.firstChild);e.invalidate()}this.convertImagesToDataUrl(u,(function(){var t="data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(ExportHelper.doctype+_.innerHTML)));i.call(null,t)}))};ExportHelper.computeAttributes=function(t,e,i){var n=getComputedStyle(t);i.forEach((function(t){var i=n.getPropertyValue(t);i&&i.length>0&&e.setAttribute(t,i)}))};ExportHelper.cloneWithComputedStyles=function(t){var e=this,i=t.cloneNode();Array.from(t.childNodes).forEach((function(t){var n=e.cloneWithComputedStyles(t);1===t.nodeType&&("text"===t.nodeName?e.computeAttributes(t,n,e.textAttrs):"line"===t.nodeName&&e.computeAttributes(t,n,e.lineAttrs));i.appendChild(n)}));return i};ExportHelper.getStyles=function(t){var e="",i=document.styleSheets;if(null==i||0===i.length)return null;[].forEach.call(i,(function(i){var n;try{if(null==i.cssRules||0===i.cssRules.length)return!0}catch(t){if("SecurityError"==t.name){console.log("SecurityError. Can't read: "+i.href);return!0}}n=i.cssRules;[].forEach.call(n,(function(i){var n,r=i.style;if(null==r)return!0;var s=i.selectorText;if(isIE()&&s){var a=s.match(/\[(.*?)\]/g);a&&a.forEach((function(t){return s=s.replace(t,t.replace(":","\\:"))}))}try{n=".wj-flexchart"==s||t.querySelector(s)}catch(t){console.warn('Invalid CSS selector "'+i.selectorText+'"',t)}n?e+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(e+=i.cssText+"\n")}))}));var n=getComputedStyle(t),r=n?n.getPropertyValue("font"):null;r&&(e+=".wj-flexchart{font:"+r+"}\n");return e};ExportHelper.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';ExportHelper.xmlns="http://www.w3.org/2000/xmlns/";ExportHelper.textAttrs=["font-family","font-size","font-style","font-weight","fill"];ExportHelper.lineAttrs=["stroke","stroke-width","stroke-dasharray"];return ExportHelper}(),ChartTooltip=function(t){__extends(ChartTooltip,t);function ChartTooltip(){var e=t.call(this)||this;e._content="<b>{seriesName}</b><br/>{x} {y}";e._threshold=15;return e}Object.defineProperty(ChartTooltip.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t)},enumerable:!0,configurable:!0});Object.defineProperty(ChartTooltip.prototype,"threshold",{get:function(){return this._threshold},set:function(t){t!=this._threshold&&(this._threshold=asNumber(t))},enumerable:!0,configurable:!0});ChartTooltip.prototype.show=function(e,i,n){t.prototype.show.call(this,e,i,n);var r=ChartTooltip._eTip;r&&r.style&&(r.style.pointerEvents="none")};return ChartTooltip}(Tooltip);export{ChartTooltip};export var ChartType;!function(t){t[t.Column=0]="Column";t[t.Bar=1]="Bar";t[t.Scatter=2]="Scatter";t[t.Line=3]="Line";t[t.LineSymbols=4]="LineSymbols";t[t.Area=5]="Area";t[t.Bubble=6]="Bubble";t[t.Candlestick=7]="Candlestick";t[t.HighLowOpenClose=8]="HighLowOpenClose";t[t.Spline=9]="Spline";t[t.SplineSymbols=10]="SplineSymbols";t[t.SplineArea=11]="SplineArea";t[t.Funnel=12]="Funnel";t[t.Step=13]="Step";t[t.StepSymbols=14]="StepSymbols";t[t.StepArea=15]="StepArea"}(ChartType||(ChartType={}));export var Stacking;!function(t){t[t.None=0]="None";t[t.Stacked=1]="Stacked";t[t.Stacked100pc=2]="Stacked100pc"}(Stacking||(Stacking={}));var FlexChartCore=function(t){__extends(FlexChartCore,t);function FlexChartCore(e,i){var n=t.call(this,e,null,!0)||this;n._series=new ObservableArray;n._axes=new AxisCollection;n._pareas=new PlotAreaCollection;n._interpolateNulls=!1;n._legendToggle=!1;n._symbolSize=10;n._dataInfo=new _DataInfo;n.__barPlotter=null;n.__linePlotter=null;n.__areaPlotter=null;n.__bubblePlotter=null;n.__financePlotter=null;n.__funnelPlotter=null;n._plotters=[];n._rotated=!1;n._stacking=Stacking.None;n._xlabels=[];n._xvals=[];n._lblAreas=[];n._colRowLens=[];n._selectedEls=[];n._markers=[];n._bindingSeparator=",";n.seriesVisibilityChanged=new Event;n.applyTemplate("wj-control wj-flexchart",null,null);var r=n;r._series.collectionChanged.addHandler((function(){for(var t=r._series,e=0;e<t.length;e++){var i=tryCast(t[e],SeriesBase);if(!i)throw"chartSeries array must contain SeriesBase objects.";i._chart=r;if(i.axisX&&null==i.axisX._chart){i.axisX._chart=r;r.axes.push(i.axisX)}if(i.axisY&&null==i.axisY._chart){i.axisY._chart=r;r.axes.push(i.axisY)}}r.invalidate()}));n._currentRenderEngine=new _SvgRenderEngine(n.hostElement);n._hitTester=new _HitTester(n);n._legend=new Legend(n);n._tooltip=new ChartTooltip;n._tooltip.showDelay=0;n._lbl=new DataLabel;n._lbl._chart=n;n._initAxes();r._axes.collectionChanged.addHandler((function(){for(var t=r._axes,e=0;e<t.length;e++){var i=tryCast(t[e],Axis);if(!i)throw"axes array must contain Axis objects.";i._chart=r}r.invalidate()}));r._pareas.collectionChanged.addHandler((function(){for(var t=r._pareas,e=0;e<t.length;e++){var i=tryCast(t[e],PlotArea);if(!i)throw"plotAreas array must contain PlotArea objects.";i._chart=r}r.invalidate()}));n._keywords=new _KeyWords;n.hostElement.addEventListener("click",(function(t){var e=r._tooltip;e.content&&r.isTouching&&r._updateTooltip(e,t)}));n.hostElement.addEventListener("mousemove",(function(t){var e=r._tooltip;e.content&&!r.isTouching&&r._updateTooltip(e,t)}));n.hostElement.addEventListener("mouseleave",(function(t){r._hideToolTip()}));n.hostElement.addEventListener("click",(function(t){if(r.selectionMode!=SelectionMode.None){var e=r._hitTestData(t),i=FlexChartCore._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(i=r.tooltip.threshold);e.distance<=i&&e.series?r._select(e.series,e.pointIndex):r.selectionMode==SelectionMode.Series&&(e=r.hitTest(t)).chartElement==ChartElement.Legend&&e.series?r._select(e.series,null):r._select(null,null)}if(!0===r.legendToggle&&(e=r.hitTest(t)).chartElement==ChartElement.Legend&&e.series){e.series.visibility==SeriesVisibility.Legend?e.series.visibility=SeriesVisibility.Visible:e.series.visibility==SeriesVisibility.Visible&&(e.series.visibility=SeriesVisibility.Legend);r.focus()}}));n.deferUpdate((function(){return n.initialize(i)}));return n}FlexChartCore.prototype.initialize=function(e){if(e&&e.renderEngine){var i=asType(this._currentRenderEngine,_SvgRenderEngine,!0);i&&i.detach();this._currentRenderEngine=null}t.prototype.initialize.call(this,e)};FlexChartCore.prototype._initAxes=function(){this._axisX=new Axis(Position.Bottom);this._axisY=new Axis(Position.Left);this._axisX.majorGrid=!1;this._axisX.name="axisX";this._axisY.majorGrid=!0;this._axisY.majorTickMarks=TickMark.None;this._axisY.name="axisY";this._axisX._chart=this;this._axisY._chart=this;this._axes.push(this._axisX);this._axes.push(this._axisY)};Object.defineProperty(FlexChartCore.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){var e=this._axisX=asType(t,Axis);this.beginUpdate();if(e){void 0===e.majorGrid&&(e.majorGrid=!1);void 0===e.name&&(e.name="axisX");e._axisType=AxisType.X;null!=e.position&&e.position!=Position.Left&&e.position!=Position.Right&&e.position!=Position.BottomLeft&&e.position!=Position.BottomRight&&e.position!=Position.TopLeft&&e.position!=Position.TopRight&&e.position!=Position.LeftTop&&e.position!=Position.LeftBottom&&e.position!=Position.RightTop&&e.position!=Position.RightBottom||(e.position=Position.Bottom);e._chart=this}this.endUpdate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){var e=this._axisY=asType(t,Axis);this.beginUpdate();if(e){void 0===e.majorGrid&&(e.majorGrid=!0);void 0===e.name&&(e.name="axisY");void 0===e.majorTickMarks&&(e.majorTickMarks=TickMark.None);e._axisType=AxisType.Y;null!=e.position&&e.position!=Position.Top&&e.position!=Position.Bottom&&e.position!=Position.BottomLeft&&e.position!=Position.BottomRight&&e.position!=Position.TopLeft&&e.position!=Position.TopRight&&e.position!=Position.LeftTop&&e.position!=Position.LeftBottom&&e.position!=Position.RightTop&&e.position!=Position.RightBottom||(e.position=Position.Left);e._chart=this}this.endUpdate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"binding",{get:function(){return this._binding},set:function(t){if(t!=this._binding){this._binding=asString(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"bindingX",{get:function(){return this._bindingX},set:function(t){if(t!=this._bindingX){this._bindingX=asString(t,!0);this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){if(t!=this._symbolSize){this._symbolSize=asNumber(t,!1,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(t){if(t!=this._interpolateNulls){this._interpolateNulls=asBoolean(t);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(t){t!=this._legendToggle&&(this._legendToggle=asBoolean(t))},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){if(t!=this._lbl){this._lbl=asType(t,DataLabel);this._lbl&&(this._lbl._chart=this)}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"selection",{get:function(){return this._selection},set:function(t){if(t!=this._selection){this._selection=asType(t,SeriesBase,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"renderEngine",{get:function(){return this._currentRenderEngine},set:function(t){if(t!=this._currentRenderEngine){var e=asType(this._currentRenderEngine,_SvgRenderEngine,!0);e&&e.detach();this._currentRenderEngine=t;var i=asType(this._currentRenderEngine,_SvgRenderEngine,!0);i&&i.attach(this.hostElement);this.refresh()}},enumerable:!0,configurable:!0});FlexChartCore.prototype.onSeriesVisibilityChanged=function(t){this.seriesVisibilityChanged.raise(this,t)};FlexChartCore.prototype.hitTest=function(t,e){var i=this._toControl(t,e),n=new HitTestInfo(this,i),r=null;if(FlexChartCore._contains(this._rectHeader,i))n._chartElement=ChartElement.Header;else if(FlexChartCore._contains(this._rectFooter,i))n._chartElement=ChartElement.Footer;else if(FlexChartCore._contains(this._rectLegend,i)){n._chartElement=ChartElement.Legend;var s=i.clone();if(this.legend.scrollbar&&this._legendHost){var a=this._legendHost.closest("div");s.y+=a.scrollTop}null!==(r=this.legend._hitTest(s))&&r>=0&&r<this.series.length&&n._setData(this.series[r])}else if(FlexChartCore._contains(this._rectChart,i)){var o=this._hitTestLabels(i);if(o){n._chartElement=ChartElement.DataLabel;n._dist=0;n._setDataPoint(o.tag)}else{for(var h=this._hitTester.hitTest(i),l=null,_=null,u=this.series.length-1;u>=0;u--)if(this.series[u].hitTest!==Series.prototype.hitTest){var c=this.series[u].hitTest(t);if(c){if(!l||c.distance<l.distance){l=c;_=u}if(0===c.distance)break}}if(h&&h.area)if(l&&l.distance<h.distance)n=l;else if(l&&l.distance==h.distance&&_>h.area.tag.seriesIndex)n=l;else{n._setDataPoint(h.area.tag);n._dist=h.distance}else l&&(n=l);var p=!1;this.axes.some((function(t){if(FlexChartCore._contains(t._axrect,i)){var e=void 0;if(t.axisType===AxisType.X){n._chartElement=ChartElement.AxisX;e=t._hitTest(i)}else{n._chartElement=ChartElement.AxisY;e=t._hitTest(i)}e?n._setName(e.label):n._setName("");p=!0;return!0}}));p||(FlexChartCore._contains(this._plotRect,i)?n._chartElement=ChartElement.PlotArea:FlexChartCore._contains(this._rectChart,i)&&(n._chartElement=ChartElement.ChartArea))}}else n._chartElement=ChartElement.None;return n};FlexChartCore.prototype.pointToData=function(t,e){isNumber(t)&&isNumber(e)&&(t=new Point(t,e));if(t instanceof MouseEvent){t=new Point(t.pageX,t.pageY);t=this._toControl(t)}else t=t.clone();t.x=this.axisX.convertBack(t.x);t.y=this.axisY.convertBack(t.y);return t};FlexChartCore.prototype.dataToPoint=function(t,e){isNumber(t)&&isNumber(e)&&(t=new Point(t,e));asType(t,Point);var i=t.clone();i.x=this.axisX.convert(i.x);i.y=this.axisY.convert(i.y);return i};FlexChartCore.prototype.dispose=function(){this._markers.forEach((function(t){return t.remove()}));this._markers=[];t.prototype.dispose.call(this)};FlexChartCore.prototype._copy=function(t,e){if("series"==t){this.series.clear();for(var i=asArray(e),n=0;n<i.length;n++){var r=this._createSeries();copy(r,i[n]);this.series.push(r)}return!0}return!1};FlexChartCore.prototype._createSeries=function(){return new Series};FlexChartCore.prototype._clearCachedValues=function(){for(var t=0;t<this._series.length;t++){var e=this._series[t];null==e.itemsSource&&e._clearValues()}};FlexChartCore.prototype._performBind=function(){this._xDataType=null;this._xlabels.splice(0);this._xvals.splice(0);if(this._cv){var t=this._cv.items;if(t){for(var e=t.length,i=this.bindingX?new Binding(this.bindingX):null,n=0;n<e;n++){var r=t[n];if(i){var s=i.getValue(r);if(isNumber(s)){this._xvals.push(asNumber(s));this._xDataType=DataType.Number}else if(isDate(s)){this._xvals.push(asDate(s).valueOf());this._xDataType=DataType.Date}this._xlabels.push(s)}}this._xvals.length==e?this._xlabels.splice(0):this._xvals.splice(0)}}};FlexChartCore.prototype._hitTestSeries=function(t,e){var i=this._toControl(t),n=new HitTestInfo(this,i),r=this._hitTester.hitTestSeries(i,e);if(r&&r.area){n._setDataPoint(r.area.tag);n._chartElement=ChartElement.PlotArea;n._dist=r.distance}return n};FlexChartCore.prototype._hitTestData=function(t){var e=this._toControl(t),i=new HitTestInfo(this,e),n=this._hitTester.hitTest(e,!0);if(n&&n.area){i._setDataPoint(n.area.tag);i._dist=n.distance}return i};FlexChartCore.prototype._hitTestLabels=function(t){for(var e=null,i=this._lblAreas.length,n=0;n<i;n++)if(this._lblAreas[n].contains(t)){e=this._lblAreas[n];break}return e};FlexChartCore._dist2=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n};FlexChartCore._dist=function(t,e,i){return Math.sqrt(FlexChartCore._distToSegmentSquared(t,e,i))};FlexChartCore._distToSegmentSquared=function(t,e,i){var n=FlexChartCore._dist2(e,i);if(0==n)return FlexChartCore._dist2(t,e);var r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return r<0?FlexChartCore._dist2(t,e):r>1?FlexChartCore._dist2(t,i):FlexChartCore._dist2(t,new Point(e.x+r*(i.x-e.x),e.y+r*(i.y-e.y)))};FlexChartCore.prototype._isRotated=function(){return this._getChartType()==ChartType.Bar?!this._rotated:this._rotated};FlexChartCore.prototype._getChartType=function(){return null};FlexChartCore.prototype._prepareRender=function(){this._hitTester.clear()};FlexChartCore.prototype._renderChart=function(t,e,i){var n=this._rectChart.clone(),r=new Size(n.width,n.height);e.width,e.height;this._selectedEls.length=0;(g=this._getPlotter(null)).stacking=this._stacking;if(this._curPlotter!=g){this._curPlotter&&this._curPlotter.unload();this._curPlotter=g}g.load();var s=this._isRotated();this._dataInfo.analyse(this._series,s,g.stacking,this._xvals.length>0?this._xvals:null,this.axisX._getLogBase()>0,this.axisY._getLogBase()>0);var a=g.adjustLimits(this._dataInfo,e.clone());if(s){var o=this._dataInfo.getDataTypeX();o||(o=this._xDataType);this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),a.left,a.right);this.axisY._updateActualLimits(o,a.top,a.bottom,this._xlabels,this._xvals)}else{var h=this._dataInfo.getDataTypeX();h||(h=this._xDataType);this.axisX._updateActualLimits(h,a.left,a.right,this._xlabels,this._xvals);this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),a.top,a.bottom)}var l=this._getAxes();this._updateAuxAxes(l,s);this._layout(e,r,t);t.startGroup(FlexChartCore._CSS_PLOT_AREA);t.fill="transparent";t.stroke=null;if(this.plotAreas.length>0)for(var _=0;_<this.plotAreas.length;_++){this.plotAreas[_]._render(t)}else{var u=this._plotRect;t.drawRect(u.left,u.top,u.width,u.height)}t.endGroup();var c=this._series.length;this._clearPlotters();var p={};for(_=0;_<c;_++){var f=this._series[_];if(((v=f.visibility)==SeriesVisibility.Visible||v==SeriesVisibility.Plot)&&f.getValues(0)){var d=f._getAxisY(),g=this._getPlotter(f);if(!d||d==this.axisY||g instanceof _BarPlotter)g.seriesCount++;else{var m=d._uniqueId;p[m]?p[m].count+=1:p[m]={count:1,index:0}}}}this.onRendering(new RenderEventArgs(t));if(this._getChartType()!==ChartType.Funnel)for(_=0;_<l.length;_++){var x=l[_];b=x.axisType==AxisType.X?t.startGroup(FlexChartCore._CSS_AXIS_X,this._chartRectId):t.startGroup(FlexChartCore._CSS_AXIS_Y,this._chartRectId);x._hostElement=i?b:x._hostElement;x._render(t);t.endGroup()}t.startGroup("wj-series-group");this._plotrectId="plotRect"+(1e6*Math.random()).toFixed();t.addClipRect(this._plotRect,this._plotrectId);t.options=this._options&&this._options.spline?{spline:this._options.spline.approximation}:null;for(_=0;_<c;_++){var y=this._series[_];y._pointIndexes=[];g=this._getPlotter(y);y._plotter=g;var b=t.startGroup(y.cssClass,g.clipping?this._plotrectId:null);y._hostElement=i?b:y._hostElement;var v=y.visibility,S=y.axisX,C=y.axisY;S||(S=this.axisX);C||(C=this.axisY);if(v==SeriesVisibility.Visible||v==SeriesVisibility.Plot){var P,w,A=p[C._uniqueId];if(!A||g instanceof _BarPlotter){P=g.seriesIndex;w=g.seriesCount;g.seriesIndex++;y.onRendering(t,P,w)||g.plotSeries(t,S,C,y,this,P,w)}else{P=A.index;w=A.count;A.index++;y.onRendering(t,P,w)||g.plotSeries(t,S,C,y,this,P,w)}y.onRendered(t)}t.endGroup()}t.endGroup();this._lblAreas=[];this.dataLabel.content&&this.dataLabel.position!=LabelPosition.None&&this._renderLabels(t);this._highlightCurrent();this.onRendered(new RenderEventArgs(t))};FlexChartCore.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new Size,s=this.series,a=s.length,o=this.legend.scrollbar?18:0,h=0,l=0;this._colRowLens=[];for(var _=0;_<a;_++){var u=_;this._legendReversed()&&(u=a-_-1);var c=tryCast(s[u],SeriesBase),p=c.visibility;if(c.name&&p!=SeriesVisibility.Hidden&&p!=SeriesVisibility.Plot)for(var f=c.legendItemLength(),d=0;d<f;d++){var g=c.measureLegendItem(t,d);if(e){if(h+g.height>n&&!this.legend.scrollbar){r.height=n;this._colRowLens.push(l);l=0;h=0}l<g.width&&(l=g.width);h+=g.height}else{if(l+g.width>i-o){r.width=i;this._colRowLens.push(h);h=0;l=0}h<g.height&&(h=g.height);l+=g.width}}}if(e){r.height<h&&(r.height=h);this._colRowLens.push(l);r.width=this._colRowLens.reduce((function(t,e){return t+e}),0)}else{r.width<l&&(r.width=l);this._colRowLens.push(h);r.height=this._colRowLens.reduce((function(t,e){return t+e}),0)}return r};FlexChartCore.prototype._renderLegend=function(t,e,i,n,r,s){var a,o=this.series,h=o.length,l=e.clone(),_=0;if(this._legendReversed()){for(var u=h-1;u>=0;u--){a=tryCast(o[u],SeriesBase);_=this._renderLegendElements(t,a,e,l,i,n,r,s,_)}i.reverse()}else for(u=0;u<h;u++){a=tryCast(o[u],SeriesBase);_=this._renderLegendElements(t,a,e,l,i,n,r,s,_)}};FlexChartCore.prototype._legendReversed=function(){if(null==this._legend.reverse||null===this._legend.reverse){var t=!1,e=this._getChartType();(e===ChartType.Bar||e===ChartType.Column&&this._rotated)&&(this._stacking!==Stacking.None||this.axisY.reversed||(t=!0));return t}return this._legend.reverse};FlexChartCore.prototype._renderLegendElements=function(t,e,i,n,r,s,a,o,h){var l=new Rect(i.x,i.y,a,o),_=h;if(!e)return _;var u=e.visibility;if(!e.name||u==SeriesVisibility.Hidden||u==SeriesVisibility.Plot){e._legendElement=null;r.push(null);return _}var c=e.legendItemLength(),p=t.startGroup(e.cssClass);if(u==SeriesVisibility.Legend){p.setAttribute("opacity","0.5");e._legendElement=p}else u==SeriesVisibility.Visible?e._legendElement=p:e._legendElement=null;for(var f=0;f<c;f++){var d=e.measureLegendItem(t,f);if(s){if(n.y+d.height>l.bottom+1&&!this.legend.scrollbar){n.x+=this._colRowLens[_];_++;n.y=i.y}}else if(n.x+d.width>l.right+1){n.y+=this._colRowLens[_];_++;n.x=i.x}var g=new Rect(n.x,n.y,d.width,d.height);u!=SeriesVisibility.Legend&&u!=SeriesVisibility.Visible||e.drawLegendItem(t,g,f);r.push(g);s?n.y+=d.height:n.x+=d.width}t.endGroup();return _};FlexChartCore.prototype._renderLabels=function(t){var e=this.series,i=e.length;t.stroke="null";t.fill="transparent";t.strokeWidth=1;var n=FlexChartCore._CSS_DATA_LABELS;t.startGroup(n);for(var r=0;r<i;r++){var s=e[r],a=this._hitTester._map[r];a&&s._renderLabels(t,a,this,this._lblAreas)}t.endGroup()};FlexChartCore.prototype._getAxes=function(){for(var t=[this.axisX,this.axisY],e=this.series.length,i=0;i<e;i++){var n=this.series[i],r=n.axisX;r&&-1===t.indexOf(r)&&t.push(r);var s=n.axisY;s&&-1===t.indexOf(s)&&t.push(s)}return t};FlexChartCore.prototype._clearPlotters=function(){for(var t=this._plotters.length,e=0;e<t;e++)this._plotters[e].clear()};FlexChartCore.prototype._initPlotter=function(t){t.chart=this;t.dataInfo=this._dataInfo;t.hitTester=this._hitTester;this._plotters.push(t)};Object.defineProperty(FlexChartCore.prototype,"_barPlotter",{get:function(){if(null===this.__barPlotter){this.__barPlotter=new _BarPlotter;this._initPlotter(this.__barPlotter)}return this.__barPlotter},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"_linePlotter",{get:function(){if(null===this.__linePlotter){this.__linePlotter=new _LinePlotter;this._initPlotter(this.__linePlotter)}return this.__linePlotter},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"_areaPlotter",{get:function(){if(null===this.__areaPlotter){this.__areaPlotter=new _AreaPlotter;this._initPlotter(this.__areaPlotter)}return this.__areaPlotter},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"_bubblePlotter",{get:function(){if(null===this.__bubblePlotter){this.__bubblePlotter=new _BubblePlotter;this._initPlotter(this.__bubblePlotter)}return this.__bubblePlotter},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"_financePlotter",{get:function(){if(null===this.__financePlotter){this.__financePlotter=new _FinancePlotter;this._initPlotter(this.__financePlotter)}return this.__financePlotter},enumerable:!0,configurable:!0});Object.defineProperty(FlexChartCore.prototype,"_funnelPlotter",{get:function(){if(null===this.__funnelPlotter){this.__funnelPlotter=new _FunnelPlotter;this._initPlotter(this.__funnelPlotter)}return this.__funnelPlotter},enumerable:!0,configurable:!0});FlexChartCore.prototype._getPlotter=function(t){var e,i=this._getChartType(),n=!1;if(t){var r=t._getChartType();if(null!=r&&r!=i){i=r;n=!0}}switch(i){case ChartType.Column:this._barPlotter.isVolume=!1;this._barPlotter.width=.7;e=this._barPlotter;break;case ChartType.Bar:this._barPlotter.rotated=!this._rotated;this._barPlotter.isVolume=!1;this._barPlotter.width=.7;e=this._barPlotter;break;case ChartType.Line:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;this._linePlotter.isStep=!1;e=this._linePlotter;break;case ChartType.Scatter:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!1;this._linePlotter.isSpline=!1;this._linePlotter.isStep=!1;e=this._linePlotter;break;case ChartType.LineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;this._linePlotter.isStep=!1;e=this._linePlotter;break;case ChartType.Area:this._areaPlotter.isSpline=!1;this._areaPlotter.isStep=!1;e=this._areaPlotter;break;case ChartType.Bubble:e=this._bubblePlotter;break;case ChartType.Candlestick:(s=this._financePlotter).isCandle=!0;s.isEqui=!1;s.isArms=!1;s.isVolume=!1;e=s;break;case ChartType.HighLowOpenClose:var s;(s=this._financePlotter).isCandle=!1;s.isEqui=!1;s.isArms=!1;s.isVolume=!1;e=s;break;case ChartType.Spline:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;this._linePlotter.isStep=!1;e=this._linePlotter;break;case ChartType.SplineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;this._linePlotter.isStep=!1;e=this._linePlotter;break;case ChartType.SplineArea:this._areaPlotter.isSpline=!0;this._areaPlotter.isStep=!1;e=this._areaPlotter;break;case ChartType.Funnel:e=this._funnelPlotter;break;case ChartType.Step:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;this._linePlotter.isStep=!0;e=this._linePlotter;break;case ChartType.StepSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;this._linePlotter.isStep=!0;e=this._linePlotter;break;case ChartType.StepArea:this._areaPlotter.isSpline=!1;this._areaPlotter.isStep=!0;e=this._areaPlotter;break;default:throw"Invalid chart type."}e.rotated=this._rotated;i==ChartType.Bar&&(e.rotated=!e.rotated);n&&(e.rotated=this._isRotated());return e};FlexChartCore.prototype._layout=function(t,e,i){this.plotAreas.length>0?this._layoutMultiple(t,e,i):this._layoutSingle(t,e,i)};FlexChartCore.prototype._layoutSingle=function(t,e,i){var n=t.width,r=t.height,s=new Size(n,.75*r),a=new Size(r,.75*n),o=0,h=0,l=n,_=r,u=0,c=0,p=n,f=r;if(this.dataLabel.position===LabelPosition.Top?this.dataLabel.content:null){h=i.measureString(this.dataLabel.content,"wj-data-label").height}for(var d=this._getAxes(),g=this.axisY._getHeight(i,r),m=0;m<d.length;m++){var x=(A=d[m]).origin,y=A._getPosition();if(A.axisType==AxisType.X){(C=A._getHeight(i,Math.max(10,n-g)))>s.height&&(C=s.height);A._desiredSize=new Size(s.width,C);var b=A._hasOrigin=isNumber(x)&&x>this.axisY._getMinNum()&&x<this.axisY._getMaxNum(),v=Math.min(.25*n,A._annoSize.width);if(y==Position.Bottom){o=Math.max(o,.5*v);l=Math.min(l,n-.5*v);if(b){var S=this._convertY(x,c,f);f-=Math.max(0,S+C-f)}else f-=C}else if(y==Position.Top){o=Math.max(o,.5*v);l=Math.min(l,n-.5*v);if(b){S=this._convertY(x,c,f);c+=Math.max(0,c-(S-C))}else c+=C}}else if(A.axisType==AxisType.Y){var C;(C=A===this.axisX?g:A._getHeight(i,r))>a.height&&(C=a.height);A._desiredSize=new Size(a.width,C);b=A._hasOrigin=isNumber(x)&&x>this.axisX._getMinNum()&&x<this.axisX._getMaxNum();if(y==Position.Left){if(A._actualAngle<0)_=Math.min(_,r-A._annoSize.height);else if(A._actualAngle>0)h=Math.max(h,A._annoSize.height);else{h=Math.max(h,A._annoSize.height);_=Math.min(_,r-A._annoSize.height)}if(b){var P=this._convertX(x,u,p);u+=Math.max(0,u-(P-C))}else u+=C}else if(y==Position.Right){if(A._actualAngle>0)_=Math.min(_,r-A._annoSize.height);else if(A._actualAngle<0)h=Math.max(h,A._annoSize.height);else{h=Math.max(h,A._annoSize.height);_=Math.min(_,r-A._annoSize.height)}if(b){P=this._convertX(x,u,p);p-=Math.max(0,P+C-p)}else p-=C}}}var w=this._parseMargin(this.plotMargin);o=u=isNaN(w.left)?Math.max(o,u)+t.left:w.left;l=p=isNaN(w.right)?Math.min(l,p)+t.left:e.width-w.right;h=c=isNaN(w.top)?Math.max(h,c)+t.top:w.top;_=f=isNaN(w.bottom)?Math.min(_,f)+t.top:e.height-w.bottom;n=Math.max(1,l-o);r=Math.max(1,_-h);this._plotRect=new Rect(o,h,n,r);_<=h&&(f=c+1);i.stroke=null;for(m=0;m<d.length;m++){var A;x=(A=d[m]).origin,y=A._getPosition();if(A.axisType==AxisType.X){var T;if(A._hasOrigin){S=this._convertY(x,this._plotRect.top,this._plotRect.bottom);if(y==Position.Bottom){T=new Rect(o,S,n,A._desiredSize.height);f+=Math.max(0,T.bottom-this._plotRect.bottom)}else if(y==Position.Top){T=new Rect(o,S-A._desiredSize.height,n,A._desiredSize.height);c-=Math.max(0,this._plotRect.top-T.top)}else T=new Rect(o,S,n,1)}else if(y==Position.Bottom){T=new Rect(o,f,n,A._desiredSize.height);f+=A._desiredSize.height}else if(y==Position.Top){T=new Rect(o,c-A._desiredSize.height,n,A._desiredSize.height);c-=A._desiredSize.height}else T=new Rect(o,c,n,1);A._layout(T,this._plotRect)}else if(A.axisType==AxisType.Y){var M;if(A._hasOrigin){P=this._convertX(x,this._plotRect.left,this._plotRect.right);if(y==Position.Left){M=new Rect(P-A._desiredSize.height,h,r,A._desiredSize.height);u-=A._desiredSize.height}else if(y==Position.Right){M=new Rect(P,h,r,A._desiredSize.height);p+=A._desiredSize.height}else M=new Rect(P,h,r,1)}else if(y==Position.Left){M=new Rect(u-A._desiredSize.height,h,r,A._desiredSize.height);u-=A._desiredSize.height}else if(y==Position.Right){M=new Rect(p,h,r,A._desiredSize.height);p+=A._desiredSize.height}else M=new Rect(u,h,r,1);A._layout(M,this._plotRect)}}};FlexChartCore.prototype._layoutMultiple=function(t,e,i){for(var n=t.width,r=t.height,s=[],a=[],o=this._getAxes(),h=o.length,l=0;l<h;l++){(P=o[l])._plotrect=null;if(P.axisType==AxisType.X){for(var _=P.plotArea?P.plotArea.column:0;s.length<=_;)s.push(new _AreaDef);s[_].axes.push(P)}else if(P.axisType==AxisType.Y){for(var u=P.plotArea?P.plotArea.row:0;a.length<=u;)a.push(new _AreaDef);a[u].axes.push(P)}}for(var c=s.length,p=a.length,f=new Size(n,.3*r),d=new Size(r,.3*n),g=0,m=0,x=n,y=r,b=0;b<c;b++){(E=s[b]).right=n;E.bottom=r;for(l=0;l<E.axes.length;l++){var v=(P=E.axes[l])._getHeight(i,P.axisType==AxisType.X?n:r);v>f.height&&(v=f.height);var S=new Size(f.width,v);P._desiredSize=S;0==b&&(E.left=Math.max(E.left,.5*P._annoSize.width));b==c-1&&(E.right=Math.min(E.right,n-.5*P._annoSize.width));(B=P._getPosition())==Position.Bottom?E.bottom-=S.height:B==Position.Top&&(E.top+=S.height)}}for(var C=0;C<p;C++){(E=a[C]).right=n;E.bottom=r;for(l=0;l<E.axes.length;l++){var P=E.axes[l],w=new Size(d.width,P._getHeight(i,P.axisType==AxisType.X?n:r));w.height>d.height&&(w.height=d.height);P._desiredSize=w;0==C&&(E.top=Math.max(E.top,.5*P._annoSize.width));C==p-1&&(E.bottom=Math.min(E.bottom,r-.5*P._annoSize.width));(B=P._getPosition())==Position.Left?E.left+=w.height:B==Position.Right&&(E.right-=w.height)}}var A=0,T=0,M=n,L=r;for(b=0;b<c;b++){var E=s[b];A=Math.max(A,E.left);T=Math.max(T,E.top);M=Math.min(M,E.right);L=Math.min(L,E.bottom)}for(C=0;C<p;C++){E=a[C];A=Math.max(A,E.left);T=Math.max(T,E.top);M=Math.min(M,E.right);L=Math.min(L,E.bottom)}A=g=Math.max(g,A);M=x=Math.min(x,M);T=m=Math.max(m,T);L=y=Math.min(y,L);this._plotRect=new Rect(g,m,x-g,y-m);var F=this._plotRect.clone(),k=g,I=this.plotAreas._calculateWidths(this._plotRect.width,c);for(b=0;b<c;b++){L=y;T=m;E=s[b];var N=I[b];for(l=0;l<E.axes.length;l++){var R,B=(P=E.axes[l])._getPosition(),D=new Rect(k,F.top,N,F.height);if(B==Position.Bottom){R=new Rect(k,L,N,P._desiredSize.height);L+=P._desiredSize.height}else if(B==Position.Top){R=new Rect(k,T-P._desiredSize.height,N,P._desiredSize.height);T-=P._desiredSize.height}P._layout(R,D)}for(l=0;l<this.plotAreas.length;l++){(G=this.plotAreas[l]).column==b&&G._setPlotX(k,N)}k+=N}var O=m,V=this.plotAreas._calculateHeights(this._plotRect.height,p);for(C=0;C<p;C++){A=g;M=x;E=a[C];var j=V[C];for(l=0;l<E.axes.length;l++){var H;B=(P=E.axes[l])._getPosition(),D=new Rect(F.left,O,F.width,j);if(P._plotrect){D.left=P._plotrect.left;D.width=P._plotrect.width}else I&&I.length>0&&(D.width=I[0]);if(B==Position.Left){H=new Rect(A-P._desiredSize.height,O,j,P._desiredSize.height);A-=P._desiredSize.height}else if(B==Position.Right){H=new Rect(M,O,j,P._desiredSize.height);M+=P._desiredSize.height}P._layout(H,D)}for(l=0;l<this.plotAreas.length;l++){var G;(G=this.plotAreas[l]).row==C&&G._setPlotY(O,j)}O+=j}};FlexChartCore.prototype._convertX=function(t,e,i){var n=this.axisX;return n.reversed?i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())};FlexChartCore.prototype._convertY=function(t,e,i){var n=this.axisY;return n.reversed?e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())};FlexChartCore.prototype._getLabelContent=function(t,e){return t.chartElement!==ChartElement.AxisX&&t.chartElement!==ChartElement.AxisY||!t.name?isString(e)?this._keywords.replace(e,t):isFunction(e)?e(t):null:t.name};FlexChartCore.prototype._select=function(t,e){var i=this.selectionMode,n=!1;(t!=this._selection||i==SelectionMode.Point&&e!=this._selectionIndex)&&(n=!0);this._selection&&this._highlight(this._selection,!1,this._selectionIndex);this._selection=t;this._selectionIndex=e;this._selection&&this._highlight(this._selection,!0,this._selectionIndex);if(i==SelectionMode.Point){var r=t?t.collectionView:this._cv;if(r){this._notifyCurrentChanged=!1;r.moveCurrentToPosition(t?e:-1);this._notifyCurrentChanged=!0}}n&&this.onSelectionChanged()};FlexChartCore.prototype._highlightCurrent=function(){if(this.selectionMode!=SelectionMode.None){var t=this._selection,e=-1;if(t){var i=t.collectionView;i||(i=this._cv);i&&(e=i.currentPosition);this._highlight(t,!0,e)}}};FlexChartCore.prototype._highlight=function(t,e,i){t=asType(t,SeriesBase,!0);if(this.selectionMode==SelectionMode.Series){var n=this.series.indexOf(t),r=t.hostElement;e?r.parentNode.appendChild(r):r.parentNode.insertBefore(r,r.parentNode.childNodes.item(n));var s=this._find(r,["rect","ellipse","polyline","polygon","line","path"]);this._highlightItems(s,FlexChartCore._CSS_SELECTION,e);t.legendElement&&this._highlightItems(this._find(t.legendElement,["rect","ellipse","line"]),FlexChartCore._CSS_SELECTION,e)}else if(this.selectionMode==SelectionMode.Point){n=this.series.indexOf(t),r=t.hostElement;if(e){r.parentNode.appendChild(r);var a=t.getPlotElement(i);if(a)if(a instanceof SVGElement){if("g"!=a.nodeName){this._highlightItems([a],FlexChartCore._CSS_SELECTION,e);this._selectedEls.push(a)}if((s=this._find(a,["line","rect","ellipse","path","polygon"])).length>0){this._highlightItems(s,FlexChartCore._CSS_SELECTION,e);for(var o=0;o<s.length;o++)this._selectedEls.push(s[o])}}else if(Array.isArray(a)){this._highlightItems(a,FlexChartCore._CSS_SELECTION,e);for(o=0;o<a.length;o++)this._selectedEls.push(a[o])}}else{r.parentNode.insertBefore(r,r.parentNode.childNodes.item(n));if(this._selectedEls.length>0){this._highlightItems(this._selectedEls,FlexChartCore._CSS_SELECTION,e);this._selectedEls.length=0}}}};FlexChartCore.prototype._updateTooltip=function(t,e){var i,n=this.hitTest(e);if(n.distance<=t.threshold){var r=t.content;if(n.series){var s=n.series.tooltipContent;(s||""===s)&&(r=s)}i=this._getLabelContent(n,r)}i?this._showToolTip(i,new Rect(e.clientX,e.clientY,5,5)):this._hideToolTip()};FlexChartCore.prototype._updateAuxAxes=function(t,e){for(var i=2;i<t.length;i++){var n=t[i];n._chart=this;for(var r,s,a=[],o=0;o<this.series.length;o++){var h=this.series[o];h.axisX!=n&&h.axisY!=n||a.push(h)}for(o=0;o<a.length;o++){var l=a[o].getDataRect()||a[o]._getDataRect();if(l)if(n.axisType==AxisType.X&&!e||n.axisType==AxisType.Y&&e){(void 0===r||l.left<r)&&(r=l.left);(void 0===s||l.right>s)&&(s=l.right)}else{(void 0===r||l.top<r)&&(r=l.top);(void 0===s||l.bottom>s)&&(s=l.bottom)}}var _=a[0].getDataType(0);null==_&&(_=DataType.Number);t[i]._updateActualLimits(_,r,s)}};FlexChartCore._CSS_AXIS_X="wj-axis-x";FlexChartCore._CSS_AXIS_Y="wj-axis-y";FlexChartCore._CSS_LINE="wj-line";FlexChartCore._CSS_GRIDLINE="wj-gridline";FlexChartCore._CSS_TICK="wj-tick";FlexChartCore._CSS_GRIDLINE_MINOR="wj-gridline-minor";FlexChartCore._CSS_TICK_MINOR="wj-tick-minor";FlexChartCore._CSS_DATA_LABELS="wj-data-labels";return FlexChartCore}(FlexChartBase);export{FlexChartCore};var _AreaDef=function(){function _AreaDef(){this._axes=new Array;this.left=0;this.right=0;this.top=0;this.bottom=0}Object.defineProperty(_AreaDef.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0});return _AreaDef}(),_DataInfo=function(){function _DataInfo(){this.stackAbs={};this._xvals=null}_DataInfo.prototype.analyse=function(t,e,i,n,r,s){var a=this;this.minY=NaN;this.maxY=NaN;this.minX=NaN;this.maxX=NaN;this.minXp=NaN;this.minYp=NaN;this.dx=0;var o={},h={},l={};this.dataTypeX=null;this.dataTypeY=null;this._xvals=n;if(null!=n)for(var _=n.length,u=0;u<_;u++){var c=n[u];(isNaN(this.minX)||this.minX>c)&&(this.minX=c);(isNaN(this.maxX)||this.maxX<c)&&(this.maxX=c);c>0&&(isNaN(this.minXp)||this.minXp>c)&&(this.minXp=c);if(u>0){var p=Math.abs(c-n[u-1]);!isNaN(p)&&(p<this.dx||0==this.dx)&&(this.dx=p)}}var f,d,g,m,x,y,b,v,S,C,P,_loop_1=function(){f=t[u];d=f._getChartType();g=void 0!==f.chartType;if((m=f.visibility)==SeriesVisibility.Hidden||m==SeriesVisibility.Legend)return"continue";if(x=f.getDataRect()){if(!isNaN(w.minX)&&w.minX<x.left){y=x.right;x.left=w.minX;x.width=y-w.minX}!isNaN(w.maxX)&&w.maxX>x.right&&(x.width=w.maxX-x.left);if(!f._isCustomAxisY()){if(!isNaN(w.minY)&&w.minY<x.top){y=x.bottom;x.top=w.minY;x.height=y-w.minY}!isNaN(w.maxY)&&w.maxY>x.bottom&&(x.height=w.maxY-x.top)}}b=null;e?f._isCustomAxisY()||(b=f.getValues(1)):f._isCustomAxisX()||(b=f.getValues(1));if(b){w.dataTypeX||(w.dataTypeX=f.getDataType(1));for(var r=0;r<b.length;r++){v=b[r];if(isFinite(v)){(isNaN(w.minX)||w.minX>v)&&(w.minX=v);(isNaN(w.maxX)||w.maxX<v)&&(w.maxX=v);if(r>0&&(!d||d==ChartType.Column||d==ChartType.Bar)){p=Math.abs(v-b[r-1]);!isNaN(p)&&p>0&&(p<w.dx||0==w.dx)&&(w.dx=p)}}}}S=null,C=!1;if(e){C=f._isCustomAxisX();S=f.getValues(0)}else{C=f._isCustomAxisY();S=f.getValues(0)}if(S){w.dataTypeY||C||(w.dataTypeY=f.getDataType(0));isNaN(w.minX)?w.minX=0:b||n||(w.minX=Math.min(w.minX,0));isNaN(w.maxX)?w.maxX=S.length-1:b||n||(w.maxX=Math.max(w.maxX,S.length-1));if(!C)for(var s=i==Stacking.None||g,_loop_2=function(t){var e=S[t],i=b?asNumber(b[t],!0):n?asNumber(n[t],!0):t;isArray(e)?e.forEach((function(t){a._parseYVal(t,i,s,l,o,h)})):w._parseYVal(e,i,s,l,o,h)},_=0;_<S.length;_++)_loop_2(_)}if(P=f.getDataRect(new Rect(w.minX,w.minY,w.maxX-w.minX,w.maxY-w.minY),x)){w.minX=P.left;w.maxX=P.right;if(!C){w.minY=P.top;w.maxY=P.bottom}}},w=this;for(u=0;u<t.length;u++)_loop_1();if(i==Stacking.Stacked){for(var A in o)o[A]>this.maxY&&(this.maxY=o[A]);for(var A in h)h[A]<this.minY&&(this.minY=h[A])}else if(i==Stacking.Stacked100pc){this.minY=0;this.maxY=0;for(var A in l){var T=l[A];if(isFinite(T)&&0!=T){var M=o[A],L=h[A];isFinite(M)&&(M=Math.max(M/T,this.maxY))>this.maxY&&(this.maxY=M);isFinite(L)&&(L=Math.min(L/T,this.minY))<this.minY&&(this.minY=L)}}if(this.minY==this.maxY){this.minY=0;this.maxY=1}}this.stackAbs=l;r&&(e?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp);s&&(e?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)};_DataInfo.prototype._parseYVal=function(t,e,i,n,r,s){if(isFinite(t)){null!=t&&(isNaN(this.minY)||this.minY>t)&&(this.minY=t);null!=t&&(isNaN(this.maxY)||this.maxY<t)&&(this.maxY=t);t>0&&(isNaN(this.minYp)||this.minYp>t)&&(this.minYp=t);if(!i){t>0?isNaN(r[e])?r[e]=t:r[e]+=t:isNaN(s[e])?s[e]=t:s[e]+=t;isNaN(n[e])?n[e]=Math.abs(t):n[e]+=Math.abs(t)}}};_DataInfo.prototype.getMinY=function(){return this.minY};_DataInfo.prototype.getMaxY=function(){return this.maxY};_DataInfo.prototype.getMinX=function(){return this.minX};_DataInfo.prototype.getMaxX=function(){return this.maxX};_DataInfo.prototype.getMinXp=function(){return this.minXp};_DataInfo.prototype.getMinYp=function(){return this.minYp};_DataInfo.prototype.getDeltaX=function(){return this.dx};_DataInfo.prototype.getDataTypeX=function(){return this.dataTypeX};_DataInfo.prototype.getDataTypeY=function(){return this.dataTypeY};_DataInfo.prototype.getStackedAbsSum=function(t){var e=this.stackAbs[t];return isFinite(e)?e:0};_DataInfo.prototype.getXVals=function(){return this._xvals};_DataInfo.isValid=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,n=0;n<i;n++)if(!isFinite(t[n]))return!1;return!0};return _DataInfo}();export{_DataInfo};var FlexChart=function(t){__extends(FlexChart,t);function FlexChart(e,i){var n=t.call(this,e,null)||this;n._chartType=ChartType.Column;n.initialize(i);return n}FlexChart.prototype._getChartType=function(){return this._chartType};Object.defineProperty(FlexChart.prototype,"chartType",{get:function(){return this._chartType},set:function(t){if((t=asEnum(t,ChartType))!=this._chartType){this._chartType=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChart.prototype,"rotated",{get:function(){return this._rotated},set:function(t){if(t!=this._rotated){this._rotated=asBoolean(t);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChart.prototype,"stacking",{get:function(){return this._stacking},set:function(t){if((t=asEnum(t,Stacking))!=this._stacking){this._stacking=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexChart.prototype,"options",{get:function(){return this._options},set:function(t){if(t!=this._options){this._options=t;this.invalidate()}},enumerable:!0,configurable:!0});return FlexChart}(FlexChartCore);export{FlexChart};export var LabelPosition;!function(t){t[t.None=0]="None";t[t.Left=1]="Left";t[t.Top=2]="Top";t[t.Right=3]="Right";t[t.Bottom=4]="Bottom";t[t.Center=5]="Center"}(LabelPosition||(LabelPosition={}));export var PieLabelPosition;!function(t){t[t.None=0]="None";t[t.Inside=1]="Inside";t[t.Center=2]="Center";t[t.Outside=3]="Outside";t[t.Radial=4]="Radial";t[t.Circular=5]="Circular"}(PieLabelPosition||(PieLabelPosition={}));var DataLabelRenderEventArgs=function(t){__extends(DataLabelRenderEventArgs,t);function DataLabelRenderEventArgs(e,i,n,r){var s=t.call(this,e)||this;s.cancel=!1;s._ht=i;s._pt=n;s._text=r;return s}Object.defineProperty(DataLabelRenderEventArgs.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0});Object.defineProperty(DataLabelRenderEventArgs.prototype,"text",{get:function(){return this._text},set:function(t){this._text=asString(t)},enumerable:!0,configurable:!0});Object.defineProperty(DataLabelRenderEventArgs.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0});return DataLabelRenderEventArgs}(RenderEventArgs);export{DataLabelRenderEventArgs};var DataLabelBase=function(){function DataLabelBase(){this.rendering=new Event}Object.defineProperty(DataLabelBase.prototype,"content",{get:function(){return this._content},set:function(t){if(t!=this._content){this._content=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(DataLabelBase.prototype,"border",{get:function(){return this._bdr},set:function(t){if(t!=this._bdr){this._bdr=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(DataLabelBase.prototype,"offset",{get:function(){return this._off},set:function(t){if(t!=this._off){this._off=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(DataLabelBase.prototype,"connectingLine",{get:function(){return this._line},set:function(t){if(t!=this._line){this._line=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});DataLabelBase.prototype.onRendering=function(t){this.rendering.raise(this,t);return!t.cancel};DataLabelBase.prototype._invalidate=function(){this._chart&&this._chart.invalidate()};return DataLabelBase}();export{DataLabelBase};var DataLabel=function(t){__extends(DataLabel,t);function DataLabel(){var e=null!==t&&t.apply(this,arguments)||this;e._pos=LabelPosition.Top;return e}Object.defineProperty(DataLabel.prototype,"position",{get:function(){return this._pos},set:function(t){if((t=asEnum(t,LabelPosition))!=this._pos){this._pos=t;this._invalidate()}},enumerable:!0,configurable:!0});return DataLabel}(DataLabelBase);export{DataLabel};var PieDataLabel=function(t){__extends(PieDataLabel,t);function PieDataLabel(){var e=null!==t&&t.apply(this,arguments)||this;e._pos=PieLabelPosition.Center;return e}Object.defineProperty(PieDataLabel.prototype,"position",{get:function(){return this._pos},set:function(t){if((t=asEnum(t,PieLabelPosition))!=this._pos){this._pos=t;this._invalidate()}},enumerable:!0,configurable:!0});return PieDataLabel}(DataLabelBase);export{PieDataLabel};export var AxisType;!function(t){t[t.X=0]="X";t[t.Y=1]="Y"}(AxisType||(AxisType={}));export var OverlappingLabels;!function(t){t[t.Auto=0]="Auto";t[t.Show=1]="Show"}(OverlappingLabels||(OverlappingLabels={}));export var TickMark;!function(t){t[t.None=0]="None";t[t.Outside=1]="Outside";t[t.Inside=2]="Inside";t[t.Cross=3]="Cross"}(TickMark||(TickMark={}));export var AxisGroupsDisplay;!function(t){t[t.None=0]="None";t[t.Show=1]="Show";t[t.ShowGrid=2]="ShowGrid"}(AxisGroupsDisplay||(AxisGroupsDisplay={}));var Axis=function(){function Axis(t){this._GRIDLINE_WIDTH=1;this._LINE_WIDTH=1;this._TICK_WIDTH=1;this._TICK_HEIGHT=4;this._TICK_OVERLAP=1;this._TICK_LABEL_DISTANCE=4;this._minorGrid=!1;this._labels=!0;this._isTimeAxis=!1;this._labelPadding=5;this._actualLabels=[];this._labelMin=!1;this._labelMax=!1;this.rangeChanged=new Event;this._customConvert=null;this._customConvertBack=null;this.__uniqueId=Axis._id++;t==Position.BottomLeft||t==Position.BottomRight||t==Position.TopLeft||t==Position.TopRight||t==Position.LeftTop||t==Position.LeftBottom||t==Position.RightTop||t==Position.RightBottom?this._position=void 0:this._position=t;this._position==Position.Bottom||this._position==Position.Top?this._axisType=AxisType.X:this._position!=Position.Left&&this._position!=Position.Right||(this._axisType=AxisType.Y);this._minorTickMarks=TickMark.None;this._overlap=OverlappingLabels.Auto}Object.defineProperty(Axis.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"min",{get:function(){return this._min},set:function(t){if(t!=this._min){isDate(t)?this._min=asDate(t,!0):this._min=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"max",{get:function(){return this._max},set:function(t){if(t!=this._max){isDate(t)?this._max=asDate(t,!0):this._max=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"reversed",{get:function(){return this._reversed},set:function(t){if(this._reversed!=t){this._reversed=asBoolean(t);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"position",{get:function(){return this._position},set:function(t){if((t=asEnum(t,Position,!1))!=this._position){t==Position.BottomLeft||t==Position.BottomRight||t==Position.TopLeft||t==Position.TopRight||t==Position.LeftTop||t==Position.LeftBottom||t==Position.RightTop||t==Position.RightBottom?this._position=this._axisType==AxisType.X?Position.Bottom:this._axisType==AxisType.Y?Position.Left:void 0:this._position=t;this._position==Position.Bottom||this._position==Position.Top?null==this._axisType?this._axisType=AxisType.X:this._axisType==AxisType.Y&&(this._position=Position.Left):this._position!=Position.Left&&this._position!=Position.Right||(null==this._axisType?this._axisType=AxisType.Y:this._axisType==AxisType.X&&(this._position=Position.Bottom));this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(t){if(t!=this._majorUnit){this._majorUnit=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(t){if(t!=this._minorUnit){this._minorUnit=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=asString(t,!0))},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"title",{get:function(){return this._title},set:function(t){if(t!=this._title){this._title=asString(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){this._format=asString(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(t){if(t!=this._majorGrid){this._majorGrid=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(t){if((t=asEnum(t,TickMark,!0))!=this._majorTickMarks){this._majorTickMarks=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(t){if(t!=this._minorGrid){this._minorGrid=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(t){if((t=asEnum(t,TickMark,!0))!=this._minorTickMarks){this._minorTickMarks=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"axisLine",{get:function(){return void 0===this._axisLine?this.axisType==AxisType.X:this._axisLine},set:function(t){if(t!=this._axisLine){this._axisLine=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"labels",{get:function(){return this._labels},set:function(t){if(t!=this._labels){this._labels=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(t){if(t!=this._labelAlign){this._labelAlign=asString(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(t){if(t!=this._labelAngle){this._labelAngle=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"labelMin",{get:function(){return this._labelMin},set:function(t){if(t!=this._labelMin){this._labelMin=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"labelMax",{get:function(){return this._labelMax},set:function(t){if(t!=this._labelMax){this._labelMax=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"origin",{get:function(){return this._origin},set:function(t){if(t!=this._origin){this._origin=asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(t){if((t=asEnum(t,OverlappingLabels,!0))!=this._overlap){this._overlap=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"itemsSource",{get:function(){return this._items},set:function(t){if(this._items!=t){if(this._cv){this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this);this._cv=null}this._items=t;this._cv=asCollectionView(t);null!=this._cv&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"binding",{get:function(){return this._binding},set:function(t){if(t!=this._binding){this._binding=asString(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){if(this._ifmt!=t){this._ifmt=asFunction(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"logBase",{get:function(){return this._logBase},set:function(t){if(t!=this._logBase){this._logBase=asNumber(t,!0,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"groupsOptions",{get:function(){return this._groupsOptions},set:function(t){if(t!=this._groupsOptions){this._groupsOptions=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"axisLabels",{get:function(){return this._actualLabels},enumerable:!0,configurable:!0});Axis.prototype._getLogBase=function(){return this._chart&&this._chart._stacking===Stacking.Stacked100pc?0:this.logBase};Axis.prototype._isLogAxis=function(){var t=this._getLogBase();return null!=t&&t>0};Object.defineProperty(Axis.prototype,"plotArea",{get:function(){return this._parea},set:function(t){if(t!=this._parea){this._parea=asType(t,PlotArea,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(t){if(t!=this._labelPadding){this._labelPadding=asNumber(t,!0,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Axis.prototype,"_groupClass",{get:function(){return this.axisType===AxisType.X?FlexChartCore._CSS_AXIS_X:FlexChartCore._CSS_AXIS_Y},enumerable:!0,configurable:!0});Axis.prototype.onRangeChanged=function(t){this.rangeChanged.raise(this,t)};Axis.prototype._getPosition=function(){if(this.axisType==AxisType.X){if(this.position==Position.Auto)return Position.Bottom}else if(this.axisType==AxisType.Y&&this.position==Position.Auto)return Position.Left;return this.position};Axis.prototype._isOverlapped=function(t,e,i,n){var r=this._lbls;if(null!=r&&r.length>1)for(var s=r.length,a=this._values&&this._values.length==s?this._values:null,o=0,h=0,l=0;l<s;l++){var _=a?a[l]:l;if(_>=this._actualMin&&_<=this._actualMax){var u=e*(_-this._actualMin)/(this._actualMax-this._actualMin),c=t.measureString(r[l],i,this._groupClass);if(this.axisType==AxisType.X){if(l>0&&Math.abs(u-o)<.5*(c.width+h))return!0;o=u;h=c.width}else this.axisType,AxisType.Y}}return!1};Axis.prototype._getHeight=function(t,e){this._actualAngle=null;var i=FlexChartCore._CSS_LABEL,n=FlexChartCore._CSS_TITLE,r=.1*(this._actualMax-this._actualMin),s=this._lbls,a=this.labelAngle;if(this.labels&&this._chart._getChartType()!==ChartType.Funnel){r=this._updateAutoFormat(r);if(null!=s&&s.length>0){var o=s.length,h=this._values&&this._values.length==o?this._values:null;this._annoSize=new Size;for(var l=0;l<o;l++){if((p=h?h[l]:l)>=this._actualMin&&p<=this._actualMax){var _=s[l],u=i;if(this.itemFormatter){_=(f=this._getFormattedItem(t,p,_,new Point,i,!0)).text;u=f.cls}var c=t.measureString(_,u,this._groupClass);this.axisType,AxisType.X,c.width>this._annoSize.width&&(this._annoSize.width=c.width);c.height>this._annoSize.height&&(this._annoSize.height=c.height)}}null==a&&this.axisType==AxisType.X&&(this._isOverlapped(t,Math.max(10,e-this._annoSize.width),i,this.axisType)?a=this._actualAngle=-45:this._actualAngle=0)}else{var p=this._actualMin-r;_=this._formatValue(p),u=i;if(this.itemFormatter){_=(f=this._getFormattedItem(t,p,_,new Point,i,!0)).text;u=i}c=t.measureString(_,u,this._groupClass);this._annoSize=c;p=this._actualMax+r;_=this._formatValue(p);u=i;if(this.itemFormatter){var f;_=(f=this._getFormattedItem(t,p,_,new Point,i,!0)).text;u=i}(c=t.measureString(_,u,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=c.width);c.height>this._annoSize.height&&(this._annoSize.height=c.height)}this._annoSizeBase=new Size(this._annoSize.width,this._annoSize.height);if(a){a>90?a=90:a<-90&&(a=-90);var d=a*Math.PI/180,g=this._annoSize.width,m=this._annoSize.height;this._annoSize.width=g*Math.abs(Math.cos(d))+m*Math.abs(Math.sin(d));this._annoSize.height=g*Math.abs(Math.sin(d))+m*Math.abs(Math.cos(d));this._actualAngle=a}}else{this._annoSize=new Size(8,8);this._annoSizeBase=new Size(this._annoSize.width,this._annoSize.height)}var x=0;if(this.labels){x=2*(this._labelPadding||5);this._axisType==AxisType.X?x+=this._annoSize.height:x+=this._annoSize.width+this._TICK_LABEL_DISTANCE+2}var y=this._TICK_HEIGHT,b=this._TICK_OVERLAP,v=this.majorTickMarks;v==TickMark.Outside?b=1:v==TickMark.Inside?b=-1:v==TickMark.Cross&&(b=0);null==v&&(v=TickMark.Outside);v!=TickMark.None&&(x+=.5*(1+b)*y);if(this._title){_=this._title;this._szTitle=t.measureString(_,n,this._groupClass);x+=this._szTitle.height}else this._szTitle=void 0;if(this._lbls&&this.groupsOptions&&this.groupsOptions.display!==AxisGroupsDisplay.None){this._groupsPanel||(this._groupsPanel=new _AxisGroups(this));this._groupsPanel.createGroups();x+=this._groupsPanel.getHeight(t)}t.fontSize=null;return x};Axis.prototype._updateAutoFormat=function(t){if(this._isTimeAxis){var e=this.format,i=.001*this._getActualRange()/10,n=new _timeSpan(i*_timeSpan.TicksPerSecond),r=isNumber(this._majorUnit)?_timeSpan.fromDays(this._majorUnit):_timeHelper.NiceTimeSpan(n,e);e||(this._tfmt=_timeHelper.GetTimeDefaultFormat(1e3*r.TotalSeconds,0));t=r.TotalSeconds}return t};Axis.prototype._getActualRange=function(){return this._actualMax-this._actualMin};Axis.prototype._updateActualLimitsByChartType=function(t,e,i){if(t&&t.length>0&&!this._isTimeAxis){var n=this._chart._getChartType();if(n!=ChartType.Column&&n!=ChartType.Bar){e-=.5;i+=.5}}return{min:e,max:i}};Axis.prototype._updateActualLimits=function(t,e,i,n,r){void 0===n&&(n=null);void 0===r&&(r=null);var s=this._actualMin,a=this._actualMax;this._isTimeAxis=t==DataType.Date;var o=this._updateActualLimitsByChartType(n,e,i);e=o.min;i=o.max;var h=this._min,l=this._max;isDate(h)&&(h=h.valueOf());isDate(l)&&(l=l.valueOf());var _=this._chart&&this._chart._stacking!==Stacking.Stacked100pc;_||(_=this._chart._isRotated()?this.axisType==AxisType.Y:this.axisType==AxisType.X);var u=this._actualMin=null!=h&&_?h:e;if(u==(this._actualMax=null!=l&&_?l:i))if(void 0!==h&&void 0===l)this._actualMax+=1;else if(void 0===h&&void 0!==l)this._actualMin-=1;else if(0===u)this._actualMax=1;else{var c=Math.abs(u);if(c<1){this._actualMin-=c;this._actualMax+=c}else{this._actualMin-=1;this._actualMax+=1}}if(this._getLogBase()>0){var p=this.logBase,f=Math.log(p);if(!this._max){var d=Math.ceil(Math.log(this._actualMax)/f);this._actualMax=Math.pow(p,d)}if(!this._min){var g=Math.floor(Math.log(this._actualMin)/f);this._actualMin=Math.pow(p,g)}(this._actualMin<=0||!isNumber(this._actualMin))&&(this._actualMin=1);this._actualMax<this._actualMin?this._actualMax=this._actualMin+1:this._actualMax===this._actualMin&&(this._actualMin=.1*this._actualMax)}(s!=this._actualMin&&(isNumber(s)||isNumber(this._actualMin))||a!=this._actualMax&&(isNumber(a)||isNumber(this._actualMax)))&&this.onRangeChanged();if(this._items){this._values=[];this._lbls=[];var m=this._items.length,x="value",y="text";if(this.binding){var b=this.binding.split(",");if(2==b.length){x=b[0];y=b[1]}}for(var v=0;v<m;v++){var S=this._items[v],C=S[x];if(isNumber(C)){this._values.push(C);this._lbls.push(S[y])}else if(isDate(C)){this._values.push(C.getTime());this._lbls.push(S[y])}}}else{this._lbls=n;this._values=r}};Axis.prototype._layout=function(t,e){var i=this.axisType==AxisType.Y;this._plotrect=e;this._axrect=i?new Rect(t.left,t.top,t.height,t.width):t;this._groupsPanel&&this._groupsPanel.layout()};Axis.prototype._hasVisibileSeries=function(){for(var t,e=this._chart.series,i=0,n=e.length;i<n;i++)if((t=e[i].visibility)==SeriesVisibility.Plot||t==SeriesVisibility.Visible)return!0;return!1};Axis.prototype._render=function(t){if(this.position!=Position.None&&this._hasVisibileSeries()){this.axisLabels.length=0;this._vals={};var e=0;this.labelAngle&&((e=this.labelAngle)>90?e=90:e<-90&&(e=-90));null==this.labelAngle&&null!=this._actualAngle&&(e=this._actualAngle);var i=FlexChartCore._FG,n=this._actualMax-this._actualMin;if(isNumber(n)){var r=this._calcMajorUnit();0==r&&(r=.1*this._niceTickNumber(n));var s=Math.min(Axis.MAX_MAJOR,Math.floor(n/r)+1),a=[],o=[];this._rects=[];this._vals.major=a;this._vals.hasLbls=[];var h=Math.floor(this._actualMin/r)*r;h<this._actualMin&&(h+=r);var l=!1;if(this._lbls&&this._lbls.length>0){o=this._lbls;if(0==this._values.length){l=!0;for(var _=0;_<o.length;_++)a.push(_)}else a=this._values}else if(this._isTimeAxis){this._createTimeLabels(h,s,a,o);this._addMinMaxLabels(a,o)}else if(this._getLogBase()){this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,a,o,!0);this._addMinMaxLabels(a,o)}else{this._createLabels(h,s,r,a,o);this._addMinMaxLabels(a,o)}s=Math.min(a.length,o.length);t.textFill=i;var u=this._TICK_HEIGHT,c=this._TICK_OVERLAP,p=this.majorTickMarks;null==p&&(p=TickMark.Outside);p==TickMark.Outside?c=1:p==TickMark.Inside?c=-1:p==TickMark.Cross&&(c=0);var f=.5*(c-1)*u,d=.5*(1+c)*u;for(_=0;_<s;_++){var g=!0,m=a[_],x=o[_],y=this.labels;y&&(l||this.itemsSource)&&this.majorUnit&&_%this.majorUnit!=0&&(y=!1);if(m>=this._actualMin&&m<=this._actualMax){var b=t.textFill;g=this._renderLabelsAndTicks(t,_,m,x,e,p,y,f,d);t.textFill=b}this._vals.hasLbls.push(g);g&&this.axisLabels.push(x)}}(this.minorGrid||this.minorTickMarks!=TickMark.None)&&this._renderMinor(t,a,l);t.stroke=i;t.fontSize=null;this._renderLineAndTitle(t);this._lbls&&this.groupsOptions&&this.groupsOptions.display!==AxisGroupsDisplay.None&&this._groupsPanel&&this._groupsPanel.render(t);t.stroke=null;t.fontSize=null;t.textFill=null;t.strokeWidth=null}};Axis.prototype._renderLineAndTitle=function(t){var e=this._getPosition(),i=this.axisType==AxisType.Y,n=e!=Position.Top&&e!=Position.Right,r=FlexChartCore._CSS_TITLE,s=FlexChartCore._CSS_LINE;if(i)if(n){if(this._title){var a=new Point(this._axrect.left+.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);FlexChartCore._renderRotatedText(t,this._title,a,1,1,a,-90,r,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,s)}else{if(this._title){a=new Point(this._axrect.right-.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);FlexChartCore._renderRotatedText(t,this._title,a,1,1,a,90,r,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,s)}else if(n){this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,s);this._title&&FlexChartCore._renderText(t,this._title,new Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,r)}else{this.axisLine&&t.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,s);this._title&&FlexChartCore._renderText(t,this._title,new Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,r)}};Axis.prototype._renderMinor=function(t,e,i){var n=this._getPosition(),r=this.axisType==AxisType.Y,s=n!=Position.Top&&n!=Position.Right;if(this._getLogBase()){if(this.minorUnit>0){var a=[];this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,a,null,!1);for(var o=[],h=0;h<a.length;h++){var l=a[h];-1==e.indexOf(l)&&l>this._actualMin&&o.push(l)}this._renderMinors(t,o,r,s)}}else this._createMinors(t,e,r,s,i)};Axis.prototype._renderRotatedText=function(t,e,i,n,r,s,a,o,h,l,_){if(this.itemFormatter){var u=this._getFormattedItem(t,e,i,n,h);if(u){i=u.text;h=u.cls}else i=null}FlexChartCore._renderRotatedText(t,i,n,r,s,a,o,h,l,_)};Axis.prototype._getFormattedItem=function(t,e,i,n,r,s){void 0===s&&(s=!1);if(this.itemFormatter){var a=n.clone();this._plotrect&&(this.axisType==AxisType.X?this.position==Position.Top?a.y=this._plotrect.top:a.y=this._plotrect.bottom:this.position==Position.Right?a.x=this._plotrect.right:a.x=this._plotrect.left);var o={val:e,text:i,pos:a,cls:r};s&&(t.readOnly=!0);o=this.itemFormatter(t,o);s&&(t.readOnly=!1);return o}};Axis.prototype._renderLabelsAndTicks=function(t,e,i,n,r,s,a,o,h){var l=this._getPosition(),_=!1,u=this.axisType==AxisType.Y,c=l!=Position.Top&&l!=Position.Right,p=this.labelPadding||5,f=this._TICK_WIDTH,d=this._getLabelAlign(u),g=FlexChartCore._CSS_LABEL,m=FlexChartCore._CSS_GRIDLINE,x=FlexChartCore._CSS_TICK,y=FlexChartCore._FG,b=FlexChartCore._FG,v=this._GRIDLINE_WIDTH,S=i!=this._actualMin&&this.majorGrid;if(u){var C=this.convert(i);if(S){t.stroke=y;t.strokeWidth=v;t.drawLine(this._plotrect.left,C,this._plotrect.right,C,m)}t.stroke=b;t.strokeWidth=f;if(c){if(a){_=!0;var P=new Point(this._axrect.right-h-this._TICK_LABEL_DISTANCE-p,C);r>0?90==r?this._renderRotatedText(t,i,n,P,1,0,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,2,1,P,r,g,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,P,1,2,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,2,1,P,r,g,this._groupClass):_=this._renderLabel(t,i,n,P,2,d,g)}s!=TickMark.None&&_&&t.drawLine(this._axrect.right-o,C,this._axrect.right-h,C,x)}else{if(a){_=!0;P=new Point(this._axrect.left+h+this._TICK_LABEL_DISTANCE+p,C);r>0?90==r?this._renderRotatedText(t,i,n,P,1,2,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,0,1,P,r,g,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,P,1,0,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,0,1,P,r,g,this._groupClass):_=this._renderLabel(t,i,n,P,0,d,g)}s!=TickMark.None&&_&&t.drawLine(this._axrect.left+o,C,this._axrect.left+h,C,x)}}else{var w=this.convert(i);if(S&&a){t.stroke=y;t.strokeWidth=v;t.drawLine(w,this._plotrect.top,w,this._plotrect.bottom,m)}this.overlappingLabels==OverlappingLabels.Auto&&this._xCross(w)&&(a=!1);t.stroke=b;t.strokeWidth=f;if(c){if(a){P=new Point(w,this._axrect.top+h+p);_=0!=r?this._renderRotatedLabel(t,i,n,P,d,r,g,c):this._renderLabel(t,i,n,P,d,0,g)}if(s!=TickMark.None&&_){w=this.convert(i);t.drawLine(w,this._axrect.top+o,w,this._axrect.top+h,x)}}else{if(a){P=new Point(w,this._axrect.bottom-h-p);_=0!=r?this._renderRotatedLabel(t,i,n,P,d,r,g,c):this._renderLabel(t,i,n,P,d,2,g)}if(s!=TickMark.None&&_){w=this.convert(i);t.drawLine(w,this._axrect.bottom-o,w,this._axrect.bottom-h,x)}}}return _};Axis.prototype._xCross=function(t){for(var e=this._rects.length,i=0;i<e;i++){var n=this._rects[i];if(t>=n.left&&t<=n.right)return!0}return!1};Axis.prototype._createMinors=function(t,e,i,n,r){if(e){var s=this.majorUnit?this._isTimeAxis?24*this.majorUnit*3600*1e3:this.majorUnit:e.length>1?e[1]-e[0]:e[0],a=isNumber(this.minorUnit)?this._isTimeAxis?24*this.minorUnit*3600*1e3:this.minorUnit:.5*s;if(a<=0)return;for(var o=[],h=e[0];h>this._actualMin&&o.length<Axis.MAX_MINOR;h-=a)-1==e.indexOf(h)&&o.push(h);for(h=e[0]+a;h<this._actualMax&&o.length<Axis.MAX_MINOR;h+=a)-1==e.indexOf(h)?o.push(h):r&&this.majorUnit&&h%this.majorUnit!=0&&o.push(h);this._renderMinors(t,o,i,n)}};Axis.prototype._renderMinors=function(t,e,i,n){var r=this._TICK_HEIGHT,s=this._TICK_WIDTH,a=this._TICK_OVERLAP,o=FlexChartCore._FG,h=this.minorTickMarks,l=!0;this._vals.minor=e;h==TickMark.Outside?a=1:h==TickMark.Inside?a=-1:h==TickMark.Cross?a=0:l=!1;for(var _=.5*(a-1)*r,u=.5*(1+a)*r,c=e?e.length:0,p=this.minorGrid,f=this._plotrect,d=this._GRIDLINE_WIDTH,g=FlexChartCore._FG,m=FlexChartCore._CSS_GRIDLINE_MINOR,x=FlexChartCore._CSS_TICK_MINOR,y=0;y<c;y++)if(e[y]>=this.actualMin&&e[y]<=this.actualMax)if(i){var b=this.convert(e[y]);if(l){t.stroke=o;t.strokeWidth=s;n?t.drawLine(this._axrect.right-_,b,this._axrect.right-u,b,x):t.drawLine(this._axrect.left+_,b,this._axrect.left+u,b,x)}if(p){t.stroke=g;t.strokeWidth=d;t.drawLine(f.left,b,f.right,b,m)}}else{var v=this.convert(e[y]);if(l){t.stroke=o;t.strokeWidth=s;n?t.drawLine(v,this._axrect.top+_,v,this._axrect.top+u,x):t.drawLine(v,this._axrect.bottom-_,v,this._axrect.bottom-u,x)}if(p){t.stroke=g;t.strokeWidth=d;t.drawLine(v,f.top,v,f.bottom,m)}}};Axis.prototype._renderLabel=function(t,e,i,n,r,s,a){var o=!1;if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,a);if(h){i=h.text;a=h.cls}else i=null}if(i){var l=this._rects,_=this.overlappingLabels==OverlappingLabels.Auto&&!isNumber(this._actualAngle),u=FlexChartCore._renderText(t,i,n,r,s,a,this._groupClass,null,(function(t){if(_)for(var e=l.length,i=0;i<e;i++)if(FlexChartCore._intersects(l[i],t))return!1;return!0}));if(u){u.left+=4;u.width+=8;l.push(u);o=!0}}return o};Axis.prototype._renderRotatedLabel=function(t,e,i,n,r,s,a,o){if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,a);if(h){i=h.text;a=h.cls}else i=null}if(i){var l=t.measureString(i,a,this._groupClass),_=.5*l.height,u=.5*l.width*Math.abs(Math.sin(s*Math.PI/180)),c=.5*l.width,p=.5*(l.width*Math.abs(Math.cos(s*Math.PI/180))+l.height*Math.abs(Math.sin(s*Math.PI/180))),f=new Point(n.x,n.y),d=new Point(n.x,n.y);this.labelAlign||(r=90==s||-90==s?1:o?s>0?0:2:s>0?2:0);if(o){n.y+=_+u;f.y+=_+u-.5*l.height}else{n.y-=_+u-l.height;f.y-=_+u-.5*l.height}var g=0;if(2===r){f.x-=p;n.x-=c+p;g=f.x+p-l.height-2}else if(0===r){f.x+=p;n.x-=c-p;g=f.x-p}else{n.x-=c;g=f.x-l.height/2}var m=new Rect(g,d.y,l.height+2,l.width),x=this._rects;if(this.overlappingLabels==OverlappingLabels.Auto)for(var y=x.length,b=0;b<y;b++)if(FlexChartCore._intersects(x[b],m))return!1;FlexChartCore._renderRotatedText(t,i,n,0,2,f,s,a,this._groupClass);this._rects.push(m);return!0}return!1};Axis.prototype._getLabelAlign=function(t){var e=1;if(this.labelAlign){var i=this.labelAlign.toLowerCase();t?"top"==i?e=0:"bottom"==i&&(e=2):"left"==i?e=0:"right"==i&&(e=2)}return e};Axis.prototype._addMinMaxLabels=function(t,e){if(this.labelMin){var i=this.actualMin;if(isFinite(i)){e.splice(0,0,this._formatValue(i));t.splice(0,0,i)}}if(this.labelMax){var n=this.actualMax;if(isFinite(n)){e.splice(0,0,this._formatValue(n));t.splice(0,0,n)}}};Axis.prototype.convert=function(t,e,i){var n=null==e?this._actualMax:e,r=null==i?this._actualMin:i;if(n==r||!this._axrect)return 0;var s=this._axrect.left,a=this._axrect.width,o=this._axrect.top,h=this._axrect.height;if(null!=this._customConvert){var l=this._customConvert(t,r,n);return this.axisType==AxisType.Y?o+l*h:s+l*a}if(this._getLogBase()){if(t<=0)return NaN;var _=Math.log(n/r);return this._reversed?this.axisType==AxisType.Y?o+Math.log(t/r)/_*h:s+a-Math.log(t/r)/_*a:this.axisType==AxisType.Y?o+h-Math.log(t/r)/_*h:s+Math.log(t/r)/_*a}return this._reversed?this.axisType==AxisType.Y?o+(t-r)/(n-r)*h:s+a-(t-r)/(n-r)*a:this.axisType==AxisType.Y?o+h-(t-r)/(n-r)*h:s+(t-r)/(n-r)*a};Axis.prototype.convertBack=function(t){if(this._actualMax==this._actualMin)return 0;var e=this._plotrect.left,i=this._plotrect.width,n=this._plotrect.top,r=this._plotrect.height,s=this._actualMax-this._actualMin,a=this._getLogBase();if(null!=this._customConvertBack)return this.axisType==AxisType.Y?this._customConvertBack((t-n)/r,this._actualMin,this._actualMax):this._customConvertBack((t-e)/i,this._actualMin,this._actualMax);if(a){var o=0;o=this._reversed?this.axisType==AxisType.Y?(t-n)/r:1-(t-e)/i:this.axisType==AxisType.Y?1-(t-n)/r:(t-e)/i;return Math.pow(a,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*o)/Math.log(a))}return this._reversed?this.axisType==AxisType.Y?this._actualMin+(t-n)*s/r:this._actualMin+(e+i-t)*s/i:this.axisType==AxisType.Y?this._actualMax-(t-n)*s/r:this._actualMin+(t-e)*s/i};Object.defineProperty(Axis.prototype,"axisType",{get:function(){var t=this._chart;if(t){if(t.axisX==this)return AxisType.X;if(t.axisY==this)return AxisType.Y}return this._axisType},enumerable:!0,configurable:!0});Axis.prototype._getMinNum=function(){return this._actualMin};Axis.prototype._getMaxNum=function(){return this._actualMax};Axis.prototype._getTitleSize=function(){return this._szTitle?this._szTitle:new Size};Axis.prototype._invalidate=function(){this._chart&&this._chart.invalidate()};Axis.prototype._cvCollectionChanged=function(t,e){this._invalidate()};Axis.prototype._createLabels=function(t,e,i,n,r){for(var s=0;s<e;s++){var a=(t+i*s).toFixed(14),o=parseFloat(a),h=this._formatAxisValue(o),l=r.indexOf(h);if(l>=0&&!isNumber(this.majorUnit)&&!this._format){var _=parseFloat(h);Math.abs(_-o)<Math.abs(_-n[l])&&(n[l]=o)}else{n.push(o);r.push(h)}}};Axis.prototype._createLogarithmicLabels=function(t,e,i,n,r,s){var a=this._getLogBase(),o=Math.log(a),h=Math.floor(Math.log(t)/o),l=Math.ceil(Math.log(e)/o),_=a,u=!0;if(i>0){u=!1;_=i}_<a&&(_=a);var c=(l-h+1)*a/_,p=1;if(s){var f=this._getPosition(),d=this._getAnnoNumber(f==Position.Left||f==Position.Right);c>d?p=Math.floor(c/d+1):u&&(c<=.2*d?_=.2*a:c<=.1*d&&(_=.1*a))}for(var g=h;g<=l;g+=p)if(u)for(var m=Math.pow(a,g),x=0;x*_<a-1;x++){if((y=m*(1+x*_))>=t&&y<=e)if(0==x){n.unshift(y);r&&r.unshift(this._formatValue(y))}else{n.push(y);r&&r.push(this._formatValue(y))}}else{var y;if((y=Math.pow(_,g))>=t&&y<=e){n.push(y);r&&r.push(this._formatValue(y))}}};Axis.prototype._createTimeLabels=function(t,e,i,n){var r=this._actualMin,s=this._actualMax,a=new Date(r),o=new Date(s),h=this._format,l=this._getAnnoNumber(this._axisType==AxisType.Y);l>10&&(l=10);var _=.001*(this._actualMax-this._actualMin)/l,u=new _timeSpan(_*_timeSpan.TicksPerSecond),c=isNumber(this._majorUnit)?_timeSpan.fromDays(this._majorUnit):_timeHelper.NiceTimeSpan(u,h);h||(this._tfmt=h=_timeHelper.GetTimeDefaultFormat(1e3*c.TotalSeconds,0));var p=c.Ticks,f=_timeHelper.RoundTime(r,c.TotalDays,!1);isFinite(f)&&(r=f);var d=_timeHelper.RoundTime(s,c.TotalDays,!0);isFinite(d)&&(s=d);var g=new Date(r);new Date(s);if(c.TotalDays>=365&&!isNumber(this._majorUnit)){(g=new Date(a.getFullYear(),0,1))<a&&g.setFullYear(g.getFullYear()+1);var m=c.TotalDays/365;m-=m%1;for(var x=g;x<=o&&m;x.setFullYear(x.getFullYear()+m)){var y=x.valueOf();i.push(y);n.push(this._formatValue(y))}}else if(c.TotalDays>=30&&!isNumber(this._majorUnit)){(g=new Date(a.getFullYear(),a.getMonth(),1))<a&&g.setMonth(g.getMonth()+1);var b=c.TotalDays/30;b-=b%1;for(x=g;x<=o;x.setMonth(x.getMonth()+b)){y=x.valueOf();i.push(y);n.push(this._formatValue(y))}}else{var v=1e3*p/_timeSpan.TicksPerSecond,S=(x=g,a.getTime()-x.getTime());S>v&&(x=new Date(x.getTime()+Math.floor(S/v)*v));for(;x<=o&&v;x=new Date(x.getTime()+v)){if((y=x.valueOf()+S)>=a.valueOf()){i.push(y);n.push(this._formatValue(y))}}}};Axis.prototype._formatValue=function(t){if(this._isTimeAxis)return this._format?Globalize.format(new Date(t),this._format):Globalize.format(new Date(t),this._tfmt);if(this._format)return Globalize.format(t,this._format);var e=t==Math.round(t)?"n0":"n";return Globalize.format(t,e)};Axis.prototype._hitTest=function(t){return this._groupsPanel?this._groupsPanel.hitTest(t):void 0};Axis.prototype._formatAxisValue=function(t,e){void 0===e&&(e=void 0);if(this._isTimeAxis)return this._format?Globalize.format(new Date(t),this._format):Globalize.format(new Date(t),this._tfmt);if(this._format)return Globalize.format(t,this._format);if(isNumber(t)){var i=this._findFormat(t,e);return Globalize.format(t,i)}return t};Axis.prototype._findFormat=function(t,e){void 0===e&&(e=void 0);var i=t==Math.round(t)?"n0":"n";void 0!==e&&(i+=e.toString());if("n"==i){var n=t.toFixed(14),r=n.search(".");if(r>=0){e=1;for(var s=n.length-1;s>=r;s--)if("0"!=n[s]){e=s-r-1;break}i+=e.toString()}}return i};Axis.prototype._calcMajorUnit=function(){var t=this._majorUnit;if(!isNumber(t)){var e=this._actualMax-this._actualMin,i=this._nicePrecision(e),n=e/this._getAnnoNumber(this.axisType==AxisType.Y);(t=this._niceNumber(2*n,-i,!0))<n&&(t=this._niceNumber(n,1-i,!1));t<n&&(t=this._niceTickNumber(n))>n&&(t*=.5)}return t};Axis.prototype._getAnnoNumber=function(t){var e=t?this._annoSizeBase.height:this._annoSize.width,i=t?this._axrect.height:this._axrect.width;if(e>0&&i>0){var n=Math.floor(i/(e+6));n<=0&&(n=1);return n}return 10};Axis.prototype._nicePrecision=function(t){if(!isNumber(t)||t<=0)return 0;var e,i=Math.log(t)/Math.LN10;e=i>=0?Math.floor(i):Math.ceil(i);var n=t/Math.pow(10,e);if(n<3){e=1-e;(n=t/Math.pow(10,e))<3&&(e+=1)}return e};Axis.prototype._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),n=t/Math.pow(10,i),r=10;n<=1?r=1:n<=2?r=2:n<=5&&(r=5);return r*Math.pow(10,i)};Axis.prototype._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var n=t/Math.pow(10,e),r=10;i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5);return r*Math.pow(10,e)};Object.defineProperty(Axis.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0});Axis.MAX_MAJOR=1e3;Axis.MAX_MINOR=2e3;Axis._id=0;return Axis}();export{Axis};var _tmInc,AxisCollection=function(t){__extends(AxisCollection,t);function AxisCollection(){return null!==t&&t.apply(this,arguments)||this}AxisCollection.prototype.getAxis=function(t){var e=this.indexOf(t);return e>-1?this[e]:null};AxisCollection.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1};return AxisCollection}(ObservableArray);export{AxisCollection};!function(t){t[t.tickf7=-7]="tickf7";t[t.tickf6=-6]="tickf6";t[t.tickf5=-5]="tickf5";t[t.tickf4=-4]="tickf4";t[t.tickf3=-3]="tickf3";t[t.tickf2=-2]="tickf2";t[t.tickf1=-1]="tickf1";t[t.second=1]="second";t[t.minute=60]="minute";t[t.hour=3600]="hour";t[t.day=86400]="day";t[t.week=604800]="week";t[t.month=2678400]="month";t[t.year=31536e3]="year";t[t.maxtime=Number.MAX_VALUE]="maxtime"}(_tmInc||(_tmInc={}));var _timeSpan=function(){function _timeSpan(t){this.ticks=t}Object.defineProperty(_timeSpan.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0});Object.defineProperty(_timeSpan.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0});Object.defineProperty(_timeSpan.prototype,"TotalDays",{get:function(){return this.ticks/1e7/86400},enumerable:!0,configurable:!0});_timeSpan.fromSeconds=function(t){return new _timeSpan(1e7*t)};_timeSpan.fromDays=function(t){return new _timeSpan(1e7*t*24*60*60)};_timeSpan.TicksPerSecond=1e7;return _timeSpan}(),_timeHelper=function(){function _timeHelper(t){isDate(t)?this.init(t):isNumber(t)&&this.init(FlexChartCore._fromOADate(t))}_timeHelper.prototype.init=function(t){this.year=t.getFullYear();this.month=t.getMonth();this.day=t.getDate();this.hour=t.getHours();this.minute=t.getMinutes();this.second=t.getSeconds()};_timeHelper.prototype.getTimeAsDateTime=function(){if(this.hour>=24){this.hour-=24;this.day+=1}if(this.month<0){-1-this.day;this.month=1}else if(this.month>11){this.month-12;this.month=11}if(this.day<1){-1-this.day;this.day=1}else if(this.day>28&&1==this.month){this.day-28;this.day=28}else if(this.day>30&&(3==this.month||5==this.month||8==this.month||10==this.month)){this.day-30;this.day=30}else if(this.day>31){this.day-31;this.day=31}if(this.second>59){this.second-59;this.second=59}if(this.minute>59){this.minute-59;this.minute=59}return new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)};_timeHelper.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()};_timeHelper.tround=function(t,e,i){var n=t/e*e;n-=n%1;i&&n!=t&&(n+=e-=e%1);return n};_timeHelper.RoundTime=function(t,e,i){var n=24*e*60*60;if(n>0){var r=new _timeHelper(t);if(n<_tmInc.minute){r.second=this.tround(r.second,n,i);return r.getTimeAsDouble()}r.second=0;if(n<_tmInc.hour){n/=_tmInc.minute;r.minute=this.tround(r.minute,n,i);return r.getTimeAsDouble()}r.minute=0;if(n<_tmInc.day){n/=_tmInc.hour;r.hour=this.tround(r.hour,n,i);return r.getTimeAsDouble()}r.hour=0;if(n<_tmInc.month){n/=_tmInc.day;r.day=this.tround(r.day,n,i);return r.getTimeAsDouble()}r.day=1;if(n<_tmInc.year){n/=_tmInc.month;1!=r.month&&(r.month=this.tround(r.month,n,i));return r.getTimeAsDouble()}r.month=1;n/=_tmInc.year;r.year=this.tround(r.year,n,i);return r.getTimeAsDouble()}var s=t,a=s-n,o=a/e*e;i&&o!=a&&(o+=e);return s=n+o};_timeHelper.TimeSpanFromTmInc=function(t){var e=_timeSpan.fromSeconds(1);if(t!=_tmInc.maxtime)if(t>_tmInc.tickf1)e=_timeSpan.fromSeconds(t);else{var i=t,n=1;i+=7;for(;i>0;){n*=10;i--}e=new _timeSpan(n)}return e};_timeHelper.manualTimeInc=function(t){var e=_tmInc.second;if(null==t||0==t.length)return e;var i=t.indexOf("f");if(i>=0){var n=-1;if(i>0&&"%"==t.substr(i-1,1))n=-1;else for(var r=1;r<6&&!(i+r>=t.length);r++){if("f"!=t.substr(i+r,1))break;n--}e=n}else t.indexOf("s")>=0?e=_tmInc.second:t.indexOf("m")>=0?e=_tmInc.minute:t.indexOf("h")>=0||t.indexOf("H")?e=_tmInc.hour:t.indexOf("d")>=0?e=_tmInc.day:t.indexOf("M")>=0?e=_tmInc.month:t.indexOf("y")>=0&&(e=_tmInc.year);return e};_timeHelper.getNiceInc=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n]*i;if(e<=r)return r}return 0};_timeHelper.NiceTimeSpan=function(t,e){var i=_tmInc.second;null!=e&&e.length>0&&(i=_timeHelper.manualTimeInc(e));var n=0,r=0;if(i<_tmInc.second&&t.TotalSeconds<10){n=t.Ticks;r=_timeHelper.TimeSpanFromTmInc(i).Ticks;for(;n>10*r;)r*=10;var s=r;n>s&&(s*=2);n>s&&(s=5*r);n>s&&(s=10*r);return new _timeSpan(s)}if(0==(n=Math.ceil(t.TotalSeconds)))return _timeHelper.TimeSpanFromTmInc(i);r=1;if(i<_tmInc.minute){if(n<_tmInc.minute&&0!=(r=_timeHelper.getNiceInc([1,2,5,10,15,30],n,i)))return _timeSpan.fromSeconds(r);i=_tmInc.minute}if(i<_tmInc.hour){if(n<_tmInc.hour&&0!=(r=_timeHelper.getNiceInc([1,2,5,10,15,30],n,i)))return _timeSpan.fromSeconds(r);i=_tmInc.hour}if(i<_tmInc.day){if(n<_tmInc.day&&0!=(r=_timeHelper.getNiceInc([1,3,6,12],n,i)))return _timeSpan.fromSeconds(r);i=_tmInc.day}if(i<_tmInc.month){if(n<_tmInc.month&&0!=(r=_timeHelper.getNiceInc([1,2,7,14],n,i)))return _timeSpan.fromSeconds(r);i=_tmInc.month}if(i<_tmInc.year){if(n<_tmInc.year&&0!=(r=_timeHelper.getNiceInc([1,2,3,4,6],n,i)))return _timeSpan.fromSeconds(r);i=_tmInc.year}n<(r=100*_tmInc.year)&&0==(r=_timeHelper.getNiceInc([1,2,5,10,20,50],n,i))&&(r=100*_tmInc.year);return _timeSpan.fromSeconds(r)};_timeHelper.NiceTimeUnit=function(t,e){var i=_timeSpan.fromDays(t);return(i=_timeHelper.NiceTimeSpan(i,e)).TotalDays};_timeHelper.GetTimeDefaultFormat=function(t,e){if(!isNumber(t)||!isNumber(e))return"";var i="s",n=_timeSpan.fromSeconds(.001*(t-e)),r=n.TotalSeconds;if(r>=_tmInc.year)i="yyyy";else if(r>=_tmInc.month)i="MMM yyyy";else if(r>=_tmInc.day)i="MMM d";else if(r>=_tmInc.hour)i="ddd H:mm";else if(r>=.5*_tmInc.hour)i="H:mm";else if(r>=1)i="H:mm:ss";else if(r>0){var s=n.Ticks;i="s.";for(;s<_timeSpan.TicksPerSecond;){s*=10;i+="f"}}return i};_timeHelper.secInYear=86400;return _timeHelper}(),_AxisLabel=function(){function _AxisLabel(t,e,i){this._start=e-.5;this._end=e+i-.5;this._value=e+.5*(i-1);this._label=t}Object.defineProperty(_AxisLabel.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});Object.defineProperty(_AxisLabel.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0});Object.defineProperty(_AxisLabel.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0});Object.defineProperty(_AxisLabel.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0});Object.defineProperty(_AxisLabel.prototype,"rect",{get:function(){return this._rect},set:function(t){this._rect=t},enumerable:!0,configurable:!0});return _AxisLabel}();export{_AxisLabel};var _AxisGroup=function(){function _AxisGroup(t,e){this._labels=[];this._index=0;this._size=new Size;this._level=0;this._level=t;this._last=e}Object.defineProperty(_AxisGroup.prototype,"labels",{get:function(){return this._labels},enumerable:!0,configurable:!0});Object.defineProperty(_AxisGroup.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0});Object.defineProperty(_AxisGroup.prototype,"height",{get:function(){return this._size.height},set:function(t){this._size.height=t},enumerable:!0,configurable:!0});Object.defineProperty(_AxisGroup.prototype,"width",{get:function(){return this._size.width},set:function(t){this._size.width=t},enumerable:!0,configurable:!0});Object.defineProperty(_AxisGroup.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0});_AxisGroup.prototype.getSize=function(t,e,i){var n=this;this._size=new Size;this.labels.forEach((function(r){var s=t.measureString(r.label,e,i);n._size.width=Math.max(n._size.width,s.width);n._size.height=Math.max(n._size.height,s.height)}));return this._size};_AxisGroup.prototype.render=function(t,e,i,n,r){var s=this,a=e._getPosition(),o=e.axisType===AxisType.X;this.labels.forEach((function(h){var l,_=h.label,u=!1,c=o?Math.abs(e.convert(h.end)-e.convert(h.start)):s.width,p=t.measureString(_,n,r);if(p.width>c){_=s._trimText(_,p.width,c);u=!0}switch(a){case Position.Bottom:l=FlexChartCore._renderText(t,_,new Point(e.convert(h.value),i),1,2,n,r);break;case Position.Top:l=FlexChartCore._renderText(t,_,new Point(e.convert(h.value),i),1,0,n,r);break;case Position.Left:l=FlexChartCore._renderText(t,_,new Point(i+s._size.width,e.convert(h.value)),2,1,n,r);break;case Position.Right:l=FlexChartCore._renderText(t,_,new Point(i-s._size.width,e.convert(h.value)),0,1,n,r)}h.rect=u?l:void 0}));a===Position.Bottom||a===Position.Top?this.renderLinesX(t,e,i):this.renderLinesY(t,e,i)};_AxisGroup.prototype.hitTest=function(t){for(var e,i=0;i<this.labels.length;i++){var n=this.labels[i];if(n.rect&&n.rect.contains(t)){e=n;break}}return e};_AxisGroup.prototype.renderLinesX=function(t,e,i){var n=this,r=e.groupsOptions.display===AxisGroupsDisplay.ShowGrid,s=e._getPosition(),a=4,o=s===Position.Bottom?1:-1,h=i-o*(this.height+a);a*=o;if(r){var l=e.convert(e.actualMin),_=e.convert(e.actualMax);this.drawLine(t,l,i+a,_,i+a);this.drawLine(t,l,h,_,h);var u=e.convert(this.labels[0].start),c=0===this.level?1===o?e._axrect.top:e._axrect.bottom:h;this.drawLine(t,u,i+a,u,c);this.labels.forEach((function(r){var s=new Point(e.convert(r.end),i);n._last?n.drawLine(t,s.x,s.y+a,s.x,1===o?e._axrect.top:e._axrect.bottom):n.drawLine(t,s.x,s.y+a,s.x,c)}))}else this.labels.forEach((function(i){var r=e.convert(i.start)+Math.abs(a),s=e.convert(i.end)-Math.abs(a);n.drawLine(t,r,h,s,h);if(e.labels||!n._last){n.drawLine(t,r,h,r,h-2*a);n.drawLine(t,s,h,s,h-2*a)}var o=e.convert(i.value);n.drawLine(t,o,h,o,h+a)}))};_AxisGroup.prototype.renderLinesY=function(t,e,i){var n=this,r=e.groupsOptions.display===AxisGroupsDisplay.ShowGrid,s=e._getPosition(),a=4,o=s===Position.Left?-1:1,h=i-o*(this.width+a);a*=o;if(r){var l=e.convert(e.actualMin),_=e.convert(e.actualMax);this.drawLine(t,i+a,l,i+a,_);this.drawLine(t,h,l,h,_);var u=e.convert(this.labels[0].start),c=0===this.level?1===o?e._axrect.left:e._axrect.right:h;this.drawLine(t,i+a,u,c,u);this.labels.forEach((function(r){var s=e.convert(r.end);n._last?n.drawLine(t,i+a,s,1===o?e._axrect.left:e._axrect.right,s):n.drawLine(t,i+a,s,c,s)}))}else this.labels.forEach((function(i){var r=e.convert(i.start)-Math.abs(a),s=e.convert(i.end)+Math.abs(a);n.drawLine(t,h,r,h,s);n.drawLine(t,h,r,h-2*a,r);n.drawLine(t,h,s,h-2*a,s);var o=e.convert(i.value);n.drawLine(t,h,o,h+a,o)}))};_AxisGroup.prototype.drawLine=function(t,e,i,n,r){t.drawLine(e,i,n,r,FlexChartCore._CSS_LINE)};_AxisGroup.prototype._trimText=function(t,e,i){var n="",r=t.length,s=Math.floor((1-(e-i)/e)*r);t.length>0&&(n=t[0]+(s>1?t.substring(1,s-1)+"..":""));return n};return _AxisGroup}(),_AxisGroups=function(){function _AxisGroups(t){this._groups=[];this._margin=8;this._axis=t}Object.defineProperty(_AxisGroups.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0});Object.defineProperty(_AxisGroups.prototype,"axis",{get:function(){return this._axis},enumerable:!0,configurable:!0});_AxisGroups.prototype.createGroups=function(){var t=this;this._groups=[];var e=this.axis._chart.collectionView;e&&e.groups&&e.groups.length>0&&e.groups.forEach((function(e){return t.createGroup(e,0)}))};_AxisGroups.prototype.createGroup=function(t,e){var i=this;this.groups[e]||(this.groups[e]=new _AxisGroup(e,t.isBottomLevel));var n=this.groups[e],r=t.items;n.labels.push(new _AxisLabel(t.name,n.index,r.length));n.index+=r.length;t.groups.forEach((function(t){return i.createGroup(t,e+1)}))};_AxisGroups.prototype.layoutGroups=function(t){this.groups.forEach((function(e){e.width*=t}))};_AxisGroups.prototype.getHeight=function(t){var e=this,i=this._axis._getPosition(),n=0;i===Position.Bottom||i===Position.Top?this.groups.forEach((function(i){return n+=e._margin+i.getSize(t,FlexChartCore._CSS_LABEL,e._axis._groupClass).height})):this.groups.forEach((function(i){return n+=e._margin+i.getSize(t,FlexChartCore._CSS_LABEL,e._axis._groupClass).width}));if(n>0&&this._axis.labels){var r=this.groups.length;n+=this._margin*r}this._height=n;return n};_AxisGroups.prototype.layout=function(){var t=this._axis,e=t._axrect;if(t.axisType===AxisType.Y){var i=(t.labels?t._annoSize.width+t._TICK_LABEL_DISTANCE+12:4)+t._getTitleSize().height,n=e.width-i;if(n<this._height){var r=this._margin*this._groups.length;this.layoutGroups((n-r)/(this._height-r));this._height=n}}};_AxisGroups.prototype.render=function(t){var e=this,i=this._axis._getPosition(),n=this._axis._getTitleSize();if(i===Position.Bottom){var r=this.axis._axrect.bottom-n.height-this._margin;this.groups.forEach((function(i){i.render(t,e.axis,r,FlexChartCore._CSS_LABEL,e._axis._groupClass);r-=i.height+e._margin}))}else if(i===Position.Top){var s=this.axis._axrect.top+n.height+this._margin;this.groups.forEach((function(i){i.render(t,e.axis,s,FlexChartCore._CSS_LABEL,e._axis._groupClass);s+=i.height+e._margin}))}else if(i===Position.Left){var a=this.axis._axrect.left+n.height+this._margin;this.groups.forEach((function(i){i.render(t,e.axis,a,FlexChartCore._CSS_LABEL,e._axis._groupClass);a+=i.width+e._margin}))}else if(i===Position.Right){var o=this.axis._axrect.right-n.height-this._margin;this.groups.forEach((function(i){i.render(t,e.axis,o,FlexChartCore._CSS_LABEL,e._axis._groupClass);o-=i.width+e._margin}))}};_AxisGroups.prototype.hitTest=function(t){for(var e,i=0;i<this._groups.length;i++){var n=this._groups[i].hitTest(t);if(n){e=n;break}}return e};return _AxisGroups}();export{_AxisGroups};var _DataPoint=function(){function _DataPoint(t,e,i,n){this._seriesIndex=t;this._pointIndex=e;this._dataX=i;this._dataY=n}Object.defineProperty(_DataPoint.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0});Object.defineProperty(_DataPoint.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0});Object.defineProperty(_DataPoint.prototype,"dataX",{get:function(){return this._dataX},set:function(t){t!==this._dataX&&(this._dataX=t)},enumerable:!0,configurable:!0});Object.defineProperty(_DataPoint.prototype,"dataY",{get:function(){return this._dataY},set:function(t){t!==this._dataY&&(this._dataY=t)},enumerable:!0,configurable:!0});return _DataPoint}();export{_DataPoint};export var _MeasureOption;!function(t){t[t.X=0]="X";t[t.Y=1]="Y";t[t.XY=2]="XY"}(_MeasureOption||(_MeasureOption={}));var _RectArea=function(){function _RectArea(t){this._rect=t}Object.defineProperty(_RectArea.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0});_RectArea.prototype.contains=function(t){var e=this._rect;return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom};_RectArea.prototype.pointDistance=function(t,e,i){var n=e.x-t.x,r=e.y-t.y;return i==_MeasureOption.X?Math.abs(n):i==_MeasureOption.Y?Math.abs(r):Math.sqrt(n*n+r*r)};_RectArea.prototype.distance=function(t){var e=_MeasureOption.XY;isNaN(t.x)||null===t.x?e=_MeasureOption.Y:(isNaN(t.y)||null===t.y)&&(e=_MeasureOption.X);var i=this._rect;return t.x<i.left?t.y<i.top?this.pointDistance(t,new Point(i.left,i.top),e):t.y>i.bottom?this.pointDistance(t,new Point(i.left,i.bottom),e):e==_MeasureOption.Y?0:i.left-t.x:t.x>i.right?t.y<i.top?this.pointDistance(t,new Point(i.right,i.top),e):t.y>i.bottom?this.pointDistance(t,new Point(i.right,i.bottom),e):e==_MeasureOption.Y?0:t.x-i.right:e==_MeasureOption.X?0:t.y<i.top?i.top-t.y:t.y>i.bottom?t.y-i.bottom:0};return _RectArea}();export{_RectArea};var _CircleArea=function(){function _CircleArea(t,e){this._center=t;this.setRadius(e)}_CircleArea.prototype.setRadius=function(t){this._rad=t;this._rad2=t*t};Object.defineProperty(_CircleArea.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0});_CircleArea.prototype.contains=function(t){var e=this._center.x-t.x,i=this._center.y-t.y;return e*e+i*i<=this._rad2};_CircleArea.prototype.distance=function(t){var e=isNaN(t.x)?0:this._center.x-t.x,i=isNaN(t.y)?0:this._center.y-t.y,n=e*e+i*i;return n<=this._rad2?0:Math.sqrt(n)-this._rad};return _CircleArea}();export{_CircleArea};var _LinesArea=function(){function _LinesArea(t,e){this._x=[];this._y=[];this._x=t;this._y=e}_LinesArea.prototype.contains=function(t){return!1};_LinesArea.prototype.distance=function(t){for(var e=NaN,i=0;i<this._x.length-1;i++){var n=FlexChartCore._dist(t,new Point(this._x[i],this._y[i]),new Point(this._x[i+1],this._y[i+1]));(isNaN(e)||n<e)&&(e=n)}return e};return _LinesArea}();export{_LinesArea};var _HitResult=function _HitResult(){};export{_HitResult};var _HitTester=function(){function _HitTester(t){this._map={};this._chart=t}_HitTester.prototype.add=function(t,e){if(this._map[e]){t.tag||(t.tag=new _DataPoint(e,NaN,NaN,NaN));this._map[e].push(t)}};_HitTester.prototype.clear=function(){this._map={};for(var t=this._chart.series,e=0;e<t.length;e++)t[e].hitTest===Series.prototype.hitTest&&(this._map[e]=new Array)};_HitTester.prototype.hitTest=function(t,e){void 0===e&&(e=!1);for(var i=null,n=Number.MAX_VALUE,r=this._chart.series.length-1;r>=0;r--){var s=this._map[r];if(s){for(var a=s.length-1;a>=0;a--){var o=s[a];if(!tryCast(o,_LinesArea)||e){var h=o.distance(t);if(h<n){i=o;if(0==(n=h))break}}}if(0==n)break}}if(i){var l=new _HitResult;l.area=i;l.distance=n;return l}return null};_HitTester.prototype.hitTestSeries=function(t,e){var i=null,n=Number.MAX_VALUE,r=this._map[e];if(r)for(var s=r.length-1;s>=0;s--){var a=r[s],o=a.distance(t);if(o<n){i=a;if(0==(n=o))break}}if(i){var h=new _HitResult;h.area=i;h.distance=n;return h}return null};return _HitTester}();export{_HitTester};export var ChartElement;!function(t){t[t.PlotArea=0]="PlotArea";t[t.AxisX=1]="AxisX";t[t.AxisY=2]="AxisY";t[t.ChartArea=3]="ChartArea";t[t.Legend=4]="Legend";t[t.Header=5]="Header";t[t.Footer=6]="Footer";t[t.Series=7]="Series";t[t.SeriesSymbol=8]="SeriesSymbol";t[t.DataLabel=9]="DataLabel";t[t.None=10]="None"}(ChartElement||(ChartElement={}));var HitTestInfo=function(){function HitTestInfo(t,e,i){this._pointIndex=null;this._chartElement=ChartElement.None;this._chart=t;this._pt=e;this._chartElement=i}Object.defineProperty(HitTestInfo.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"item",{get:function(){if(null==this._item&&null!==this.pointIndex)if(null!=this.series)this._item=this.series._getItem(this.pointIndex);else{var t=this._chart._getHitTestItem(this.pointIndex);t&&(this._item=t)}return this._item},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"x",{get:function(){void 0===this._x&&(this._x=this._getValue(1,!1));return this._x},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"y",{get:function(){void 0===this._y&&(this._y=this._getValue(0,!1));return this._y},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"value",{get:function(){var t=this._chart._getHitTestValue(this.pointIndex,this._groupIndex);return null!=t?t:this.series&&null!=this.series._getValue?this.series._getValue(this.pointIndex):this.y},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"name",{get:function(){if(void 0===this._name){var t=this._chart._getHitTestLabel(this.pointIndex);return null==t?this.series.name:t.toString()}return this._name},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"groupIndex",{get:function(){return this._groupIndex},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"_xfmt",{get:function(){void 0===this.__xfmt&&(this.__xfmt=this._getValue(1,!0));return this.__xfmt},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"_yfmt",{get:function(){void 0===this.__yfmt&&(this.__yfmt=this._getValue(0,!0));return this.__yfmt},enumerable:!0,configurable:!0});HitTestInfo.prototype._setData=function(t,e){this._series=t;this._pointIndex=e};HitTestInfo.prototype._setDataGroup=function(t,e){this._groupIndex=t;this._pointIndex=e};HitTestInfo.prototype._setName=function(t){this._name=t;t&&(this._dist=0)};HitTestInfo.prototype._setDataPoint=function(t){if(t=asType(t,_DataPoint,!0)){this._pointIndex=t.pointIndex;var e=asType(this._chart,FlexChartCore,!0),i=t.seriesIndex;null!==i&&i>=0&&i<e.series.length&&(this._series=e.series[i]);null!=t.item&&(this._item=t.item);null!=t.x&&(this._x=t.x);null!=t.y&&(this._y=t.y);null!=t.xfmt&&(this.__xfmt=t.xfmt);null!=t.yfmt&&(this.__yfmt=t.yfmt);null!=t.name&&(this._name=t.name)}};HitTestInfo.prototype._getValueFmt=function(){var t=this.value;if(null!=t){if(null==this.series){var e=t==Math.round(t)?"{val:n0}":"{val:n}";return format(e,{val:t})}t=this._chart._isRotated()?this.ax._formatValue(t):this.ay._formatValue(t)}return t};HitTestInfo.prototype._getValue=function(t,e){var i=this._chart._getHitTestValue(this.pointIndex,this.groupIndex);if(null!==i)return i;var n=null,r=this._chart,s=this.pointIndex,a=r._isRotated();if(null!==this.series&&null!==s){var o=this.series.getValues(t),h=this.series.getDataType(t);if(o&&this.pointIndex<o.length){n=o[this.pointIndex];h!=DataType.Date||e||(n=new Date(n))}else if(1==t)if(r._xlabels&&r._xlabels.length>0&&s<r._xlabels.length)n=r._xlabels[s];else if(r._xvals&&s<r._xvals.length){n=r._xvals[s];r._xDataType!=DataType.Date||e||(n=new Date(n))}}null!==n&&e&&(a?0==t?n=this.ax._formatValue(n):1==t&&(n=this.ay._formatValue(n)):0==t?n=this.ay._formatValue(n):1==t&&(n=this.ax._formatValue(n)));return n};Object.defineProperty(HitTestInfo.prototype,"ax",{get:function(){return this.series.axisX?this.series.axisX:this._chart.axisX},enumerable:!0,configurable:!0});Object.defineProperty(HitTestInfo.prototype,"ay",{get:function(){return this.series.axisY?this.series.axisY:this._chart.axisY},enumerable:!0,configurable:!0});return HitTestInfo}();export{HitTestInfo};export var SeriesVisibility;!function(t){t[t.Visible=0]="Visible";t[t.Plot=1]="Plot";t[t.Legend=2]="Legend";t[t.Hidden=3]="Hidden"}(SeriesVisibility||(SeriesVisibility={}));export var Marker;!function(t){t[t.Dot=0]="Dot";t[t.Box=1]="Box"}(Marker||(Marker={}));var DataArray=function DataArray(){};export{DataArray};var SeriesEventArgs=function(t){__extends(SeriesEventArgs,t);function SeriesEventArgs(e){var i=t.call(this)||this;i._series=asType(e,SeriesBase);return i}Object.defineProperty(SeriesEventArgs.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0});return SeriesEventArgs}(EventArgs);export{SeriesEventArgs};var SeriesBase=function(){function SeriesBase(t){this._altStyle=null;this._symbolMarker=Marker.Dot;this._visibility=SeriesVisibility.Visible;this._interpolateNulls=null;this._cache={};this.rendering=new Event;this.rendered=new Event;this.initialize(t)}Object.defineProperty(SeriesBase.prototype,"interpolateNulls",{get:function(){return null==this._interpolateNulls?this._chart&&this._chart.interpolateNulls:this._interpolateNulls},set:function(t){if(t!=this._interpolateNulls){this._interpolateNulls=asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"style",{get:function(){return this._style},set:function(t){if(t!=this._style){this._style=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"altStyle",{get:function(){return this._altStyle},set:function(t){if(t!=this._altStyle){this._altStyle=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(t){if(t!=this._symbolStyle){this._symbolStyle=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){if(t!=this._symbolSize){this._symbolSize=asNumber(t,!0,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(t){if((t=asEnum(t,Marker,!0))!=this._symbolMarker){this._symbolMarker=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(t){if(t!=this._binding){this._binding=asString(t,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(t){if(t!=this._bindingX){this._bindingX=asString(t,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){if(t!=this._itemsSource){if(this._cv){this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this);this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this);this._cv=null}this._itemsSource=t;this._cv=asCollectionView(t);if(null!=this._cv){this._cv.currentChanged.addHandler(this._cvCurrentChanged,this);this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)}this._clearValues();this._itemsSource=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=asString(t,!0)},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"visibility",{get:function(){return this._visibility},set:function(t){if((t=asEnum(t,SeriesVisibility))!=this._visibility){this._visibility=t;this._clearValues();this._invalidate();this._chart&&this._chart.onSeriesVisibilityChanged(new SeriesEventArgs(this))}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"tooltipContent",{get:function(){return this._tooltipContent},set:function(t){t!=this._tooltipContent&&(this._tooltipContent=t)},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){if(t!=this._itemFormatter){this._itemFormatter=asFunction(t);this._invalidate()}},enumerable:!0,configurable:!0});SeriesBase.prototype.hitTest=function(t,e){isNumber(t)&&isNumber(e)?t=new Point(t,e):t instanceof MouseEvent&&(t=new Point(t.pageX,t.pageY));asType(t,Point);return this._chart?this._chart._hitTestSeries(t,this._chart.series.indexOf(this)):null};SeriesBase.prototype.getPlotElement=function(t){if(this.hostElement&&t<this._pointIndexes.length){var e=this._pointIndexes[t];if(e<this.hostElement.childNodes.length)return this.hostElement.childNodes[e]}return null};Object.defineProperty(SeriesBase.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){this._axisX=asType(t,Axis,!0);if(this._axisX){var e=this._axisX._chart=this._chart;e&&-1==e.axes.indexOf(this._axisX)&&e.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(SeriesBase.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){this._axisY=asType(t,Axis,!0);if(this._axisY){var e=this._axisY._chart=this._chart;e&&-1==e.axes.indexOf(this._axisY)&&e.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0});SeriesBase.prototype.initialize=function(t){copy(this,t)};SeriesBase.prototype.pointToData=function(t){asType(t,Point);(t=t.clone()).x=this._getAxisX().convertBack(t.x);t.y=this._getAxisY().convertBack(t.y);return t};SeriesBase.prototype.dataToPoint=function(t){asType(t,Point);(t=t.clone()).x=this._getAxisX().convert(t.x);t.y=this._getAxisY().convert(t.y);return t};SeriesBase.prototype.onRendering=function(t,e,i){var n=new SeriesRenderingEventArgs(t,e,i);this.rendering.raise(this,n);return n.cancel};SeriesBase.prototype.onRendered=function(t){this.rendered.raise(this,new RenderEventArgs(t))};Object.defineProperty(SeriesBase.prototype,"_chart",{get:function(){return this.__chart},set:function(t){t!==this.__chart&&(this.__chart=t)},enumerable:!0,configurable:!0});SeriesBase.prototype._getSymbolSize=function(){return null!=this.symbolSize?this.symbolSize:this.chart.symbolSize};Object.defineProperty(SeriesBase.prototype,"_plotter",{get:function(){this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this));return this.__plotter},set:function(t){t!=this.__plotter&&(this.__plotter=t)},enumerable:!0,configurable:!0});SeriesBase.prototype.getDataType=function(t){return 0==t?this._valueDataType:1==t?this._xvalueDataType:null};SeriesBase.prototype.getValues=function(t){if(0==t){if(null==this._values){this._valueDataType=null;if(null!=this._cv){var e=this._bindValues(this._cv.items,this._getBinding(0));this._values=e.values;this._valueDataType=e.dataType}else if(null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView){e=this._bindValues(this._chart.collectionView.items,this._getBinding(0));this._values=e.values;this._valueDataType=e.dataType}}return this._values}if(1==t){if(null==this._xvalues){this._xvalueDataType=null;if(null!=this.bindingX)if(null!=this._cv){e=this._bindValues(this._cv.items,this.bindingX,!0);this._xvalueDataType=e.dataType;this._xvalues=e.values}else{if(null==this._bindingX)return null;if(null!=this._chart&&null!=this._chart.collectionView){e=this._bindValues(this._chart.collectionView.items,this.bindingX,!0);this._xvalueDataType=e.dataType;this._xvalues=e.values}}}return this._xvalues}return null};SeriesBase.prototype.drawLegendItem=function(t,e,i){var n=this._getChartType();null==n&&(n=this._chart._getChartType());var r=this._getLegendStyle(this.style);n===ChartType.Funnel?this._drawFunnelLegendItem(t,e,i,r,this.symbolStyle):this._drawLegendItem(t,e,n,this.name,r,this.symbolStyle)};SeriesBase.prototype._getLegendStyle=function(t){if(t){var e={};t.fill&&(e.fill=t.fill);t.stroke&&(e.stroke=t.stroke);return e}};SeriesBase.prototype.measureLegendItem=function(t,e){var i=this._getChartType();null==i&&(i=this._chart._getChartType());return i===ChartType.Funnel?this._measureLegendItem(t,this._getFunnelLegendName(e)):this._measureLegendItem(t,this.name)};SeriesBase.prototype.legendItemLength=function(){var t=this._getChartType();null==t&&(t=this._chart._getChartType());return t===ChartType.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:this._chart._xvals&&this._chart._xvals.length?this._chart._xvals.length:1:1};SeriesBase.prototype.getDataRect=function(t,e){return null};SeriesBase.prototype._getChartType=function(){return this._chartType};SeriesBase.prototype._clearValues=function(){this._values=null;this._xvalues=null;this.__plotter=null;this._cache={}};SeriesBase.prototype._getBinding=function(t){var e=this.binding;if(e){var i=this.chart?this.chart._bindingSeparator:",";if(i){var n=e.split(i);n&&n.length>t&&(e=n[t].trim())}}return e};SeriesBase.prototype._getBindingValues=function(t){if(this._cache[t])return this._cache[t];var e;null!=this._cv?e=this._cv.items:null!=this._chart&&null!=this._chart.collectionView&&(e=this._chart.collectionView.items);var i=this._bindValues(e,this._getBinding(t));return this._cache[t]=i.values};SeriesBase.prototype._getItem=function(t){var e=null,i=null;null!=this.itemsSource?i=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(i=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource);null!=i&&(e=i[t]);return e};SeriesBase.prototype._getLength=function(){var t=0,e=null;null!=this.itemsSource?e=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(e=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource);null!=e&&(t=e.length);return t};SeriesBase.prototype._setPointIndex=function(t,e){this._pointIndexes[t]=e};SeriesBase.prototype._getDataRect=function(){var t=this.getValues(0),e=this.getValues(1);if(t){for(var i=NaN,n=NaN,r=NaN,s=NaN,a=t.length,o=0;o<a;o++){var h=t[o];if(isArray(h)){var l=h,_=Math.min.apply(Math,l),u=Math.max.apply(Math,l);if(isNaN(n)){n=_;s=u}else{_<n&&(n=_);u>s&&(s=u)}}else isFinite(h)&&(isNaN(n)?n=s=h:h<n?n=h:h>s&&(s=h));if(e){var c=e[o];isFinite(c)&&(isNaN(i)?i=r=c:c<i?i=c:h>s&&(r=c))}}if(!e){i=0;r=a-1}if(!isNaN(n))return new Rect(i,n,r-i,s-n)}return null};SeriesBase.prototype._isCustomAxisX=function(){return!!this._axisX&&(!this._chart||this._axisX!=this.chart.axisX)};SeriesBase.prototype._isCustomAxisY=function(){return!!this._axisY&&(!this._chart||this._axisY!=this.chart.axisY)};SeriesBase.prototype._getAxisX=function(){var t=null;this.axisX?t=this.axisX:this.chart&&(t=this.chart.axisX);return t};SeriesBase.prototype._getAxisY=function(){var t=null;this.axisY?t=this.axisY:this.chart&&(t=this.chart.axisY);return t};SeriesBase.prototype._measureLegendItem=function(t,e){var i=new Size;i.width=SeriesBase._LEGEND_ITEM_WIDTH;i.height=SeriesBase._LEGEND_ITEM_HEIGHT;if(this._name){var n=t.measureString(e,FlexChartCore._CSS_LABEL,FlexChartCore._CSS_LEGEND);i.width+=n.width;i.height<n.height&&(i.height=n.height)}i.width+=3*SeriesBase._LEGEND_ITEM_MARGIN;i.height+=2*SeriesBase._LEGEND_ITEM_MARGIN;return i};SeriesBase.prototype._drawFunnelLegendItem=function(t,e,i,n,r){t.strokeWidth=1;var s=SeriesBase._LEGEND_ITEM_MARGIN,a=null,o=null;null===a&&(a=this._chart._getColorLight(i));null===o&&(o=this._chart._getColor(i));t.fill=a;t.stroke=o;var h=e.top+.5*e.height,l=SeriesBase._LEGEND_ITEM_WIDTH,_=SeriesBase._LEGEND_ITEM_HEIGHT,u=this._getFunnelLegendName(i);t.drawRect(e.left+s,h-.5*_,l,_,null,r||n);null!=u&&FlexChartCore._renderText(t,u,new Point(e.left+_+2*s,h),0,1,FlexChartCore._CSS_LABEL,FlexChartCore._CSS_LEGEND)};SeriesBase.prototype._getFunnelLegendName=function(t){var e,i=this._chart;if(i._xlabels&&i._xlabels.length&&t<i._xlabels.length)e=i._xlabels[t];else if(i._xvals&&i._xvals.length&&t<i._xvals.length){e=i._xvals[t];i._xDataType===DataType.Date&&(e=FlexChartCore._fromOADate(e))}null==e&&(e=this.name);return e.toString()};SeriesBase.prototype._drawLegendItem=function(t,e,i,n,r,s){t.strokeWidth=1;var a=SeriesBase._LEGEND_ITEM_MARGIN,o=null,h=null;null===o&&(o=this._chart._getColorLight(this._chart.series.indexOf(this)));null===h&&(h=this._chart._getColor(this._chart.series.indexOf(this)));t.fill=o;t.stroke=h;var l=e.top+.5*e.height,_=SeriesBase._LEGEND_ITEM_WIDTH,u=SeriesBase._LEGEND_ITEM_HEIGHT;switch(i){case ChartType.Area:case ChartType.SplineArea:case ChartType.StepArea:t.drawRect(e.left+a,l-.5*u,_,u,null,r);break;case ChartType.Bar:case ChartType.Column:t.drawRect(e.left+a,l-.5*u,_,u,null,s||r);break;case ChartType.Scatter:case ChartType.Bubble:var c=.3*_,p=.3*u;this.symbolMarker==Marker.Box?t.drawRect(e.left+a+.5*_-c,l-p,2*c,2*p,null,s||r):t.drawEllipse(e.left+.5*_+a,l,c,p,null,s||r);break;case ChartType.Line:case ChartType.Spline:case ChartType.Step:t.drawLine(e.left+a,l,e.left+_+a,l,null,r);break;case ChartType.LineSymbols:case ChartType.SplineSymbols:case ChartType.StepSymbols:c=.3*_,p=.3*u;this.symbolMarker==Marker.Box?t.drawRect(e.left+a+.5*_-c,l-p,2*c,2*p,null,s||r):t.drawEllipse(e.left+.5*_+a,l,c,p,null,s||r);t.drawLine(e.left+a,l,e.left+_+a,l,null,r);break;case ChartType.Candlestick:case ChartType.HighLowOpenClose:t.drawLine(e.left+a,l,e.left+_+a,l,null,s||r)}this._name&&FlexChartCore._renderText(t,n,new Point(e.left+u+2*a,l),0,1,FlexChartCore._CSS_LABEL,FlexChartCore._CSS_LEGEND)};SeriesBase.prototype._cvCollectionChanged=function(t,e){this._clearValues();this._invalidate()};SeriesBase.prototype._cvCurrentChanged=function(t,e){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()};SeriesBase.prototype._bindValues=function(t,e,i){void 0===i&&(i=!1);var n,r,s;if(null!=t){var a=t.length;n=new Array(t.length);for(var o=e?new Binding(e):null,h=0;h<a;h++){s=null;var l=t[h];null!=o&&(l=o.getValue(l));if(isArray(l)&&l.length>0){s=l;l=l[0]}if(isNumber(l)){n[h]=l;r=DataType.Number}else if(isDate(l)){n[h]=l.valueOf();r=DataType.Date}else if(i&&l){n[h]=h;r=DataType.Number}isArray(s)&&s.length>0&&(n[h]=s)}}var _=new DataArray;_.values=n;_.dataType=r;return _};SeriesBase.prototype._invalidate=function(){this._chart&&this._chart.invalidate()};SeriesBase.prototype._indexToPoint=function(t){if(t>=0&&t<this._values.length){var e=this._values[t],i=this._xvalues?this._xvalues[t]:t;return new Point(i,e)}return null};SeriesBase.prototype._getSymbolFill=function(t){var e=null;this.symbolStyle&&(e=this.symbolStyle.fill);!e&&this.style&&(e=this.style.fill);!e&&this.chart&&(e=this.chart._getColorLight(t));return e};SeriesBase.prototype._getSymbolStroke=function(t){var e=null;this.symbolStyle&&(e=this.symbolStyle.stroke);!e&&this.style&&(e=this.style.stroke);!e&&this.chart&&(e=this.chart._getColor(t));return e};SeriesBase.prototype._getAltSymbolStroke=function(t){var e=null;this.altStyle&&(e=this.altStyle.stroke);return e};SeriesBase.prototype._getAltSymbolFill=function(t){var e=null;this.altStyle&&(e=this.altStyle.fill);return e};SeriesBase.prototype._renderLabels=function(t,e,i,n){this._plotter&&this._plotter._renderLabels(t,this,e,i,n)};SeriesBase._LEGEND_ITEM_WIDTH=10;SeriesBase._LEGEND_ITEM_HEIGHT=10;SeriesBase._LEGEND_ITEM_MARGIN=4;SeriesBase._DEFAULT_SYM_SIZE=10;return SeriesBase}();export{SeriesBase};var Series=function(t){__extends(Series,t);function Series(){return null!==t&&t.apply(this,arguments)||this}Object.defineProperty(Series.prototype,"chartType",{get:function(){return this._chartType},set:function(t){if((t=asEnum(t,ChartType,!0))!=this._chartType){this._chartType=t;this._invalidate()}},enumerable:!0,configurable:!0});return Series}(SeriesBase);export{Series};var FlexPie=function(t){__extends(FlexPie,t);function FlexPie(e,i){var n=t.call(this,e,null,!0)||this;n._areas=[];n._keywords=new _KeyWords;n._startAngle=0;n._innerRadius=0;n._offset=0;n._reversed=!1;n._isAnimated=!1;n._selectedItemPosition=Position.None;n._selectedItemOffset=0;n._pieGroups=[];n._rotationAngles=[];n._centers=[new Point];n._selectedOffset=new Point;n._selectedIndex=-1;n._angles=[];n._colRowLens=[];n._titles=void 0;n._values=[];n._labels=[];n._pels=[];n._sum=0;n._sums=[];n._bindingSeparator=",";n.applyTemplate("wj-control wj-flexchart wj-flexpie",null,null);n._currentRenderEngine=new _SvgRenderEngine(n.hostElement);n._legend=new Legend(n);n._tooltip=new ChartTooltip;n._tooltip.content="<b>{name}</b><br/>{value}";n._tooltip.showDelay=0;n._lbl=new PieDataLabel;n._lbl._chart=n;var r=n;n.hostElement.addEventListener("mousemove",(function(t){var e=r._tooltip;if(e.content&&!r.isTouching){var i=r.hitTest(t,void 0,!0);if(i.distance<=e.threshold){var n=r._getLabelContent(i,r.tooltip.content);r._showToolTip(n,new Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}));n.hostElement.addEventListener("click",(function(t){var e=!0;if(r.selectionMode==SelectionMode.Point){var i=r.hitTest(t),n=FlexChartBase._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(n=r.tooltip.threshold);if(i.distance<=n){i.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=Position.None&&(e=!1);i.pointIndex!=r._selectionIndex&&r._select(i.pointIndex,!0)}else r._selectedIndex>=0&&r._select(null)}if(e&&r.isTouching){var s=r._tooltip;if(s.content){if((i=r.hitTest(t,void 0,!0)).distance<=s.threshold){var a=r._getLabelContent(i,r.tooltip.content);r._showToolTip(a,new Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}}));n.hostElement.addEventListener("mouseleave",(function(t){r._hideToolTip()}));n.deferUpdate((function(){return n.initialize(i)}));return n}Object.defineProperty(FlexPie.prototype,"binding",{get:function(){return this._binding},set:function(t){if(t!=this._binding){this._binding=asString(t,!0);this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){if(t!=this._bindingName){this._bindingName=asString(t,!0);this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){if(t!=this._startAngle){this._startAngle=asNumber(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"offset",{get:function(){return this._offset},set:function(t){if(t!=this._offset){this._offset=asNumber(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){if(t!=this._innerRadius){this._innerRadius=asNumber(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"innerTextStyle",{get:function(){return this._innerTextStyle},set:function(t){if(t!=this._innerText){this._innerTextStyle=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"innerText",{get:function(){return this._innerText},set:function(t){if(t!=this._innerText){this._innerText=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"reversed",{get:function(){return this._reversed},set:function(t){if(t!=this._reversed){this._reversed=asBoolean(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(t){if((t=asEnum(t,Position,!0))!=this._selectedItemPosition){this._selectedItemPosition=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(t){if(t!=this._selectedItemOffset){this._selectedItemOffset=asNumber(t,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){t!=this._isAnimated&&(this._isAnimated=t)},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){if(t!=this._lbl){this._lbl=t;this._lbl&&(this._lbl._chart=this)}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t!=this._selectedIndex){var e=asNumber(t,!0);this._select(e,!0)}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"titles",{get:function(){return this._titles},set:function(t){if(t!==this._titles){this._titles=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexPie.prototype,"chartsPerLine",{get:function(){return this._chartsPerLine},set:function(t){if(t!=this._chartsPerLine){this._chartsPerLine=asNumber(t,!0,!0);this.invalidate()}},enumerable:!0,configurable:!0});FlexPie.prototype._getLabelsForLegend=function(){return this._labels};FlexPie.prototype.hitTest=function(t,e,i){var n=this._toControl(t,e),r=new HitTestInfo(this,n),s=null;if(FlexChartBase._contains(this._rectHeader,n))r._chartElement=ChartElement.Header;else if(FlexChartBase._contains(this._rectFooter,n))r._chartElement=ChartElement.Footer;else if(FlexChartBase._contains(this._rectLegend,n)){r._chartElement=ChartElement.Legend;null!==(s=this.legend._hitTest(n))&&s>=0&&s<this._areas.length&&r._setData(null,s)}else if(FlexChartBase._contains(this._rectChart,n)){this._hitTestData(r,n,i);r._chartElement=ChartElement.ChartArea}else r._chartElement=ChartElement.None;return r};FlexPie.prototype._hitTestData=function(t,e,i){for(var n,r=this._areas.length,s=NaN,a=0;a<r;a++){var o=e.clone(),h=this._areas[a],l=this._rotationAngles[h.gi];if(0!=l){var _=this._centers[h.gi],u=_.x,c=_.y,p=-u+o.x,f=-c+o.y,d=Math.sqrt(p*p+f*f),g=Math.atan2(f,p)-l*Math.PI/180;o.x=u+d*Math.cos(g);o.y=c+d*Math.sin(g)}if(a==this._selectedIndex){o.x-=this._selectedOffset.x;o.y-=this._selectedOffset.y}var m=this._areas[a];if(m.contains(o)){if(!0===i){s=0;n=m;continue}t._setDataGroup(h.gi,m.tag);t._dist=0;if(a!=this._selectedIndex)break}var x=m.distance(o);if(void 0!==x&&(isNaN(s)||x<s||!0===i&&this._isSmallSegment(x,n,m))){s=x;n=m}}if(0!==t._dist&&null!=n){t._setDataGroup(n.gi,n.tag);t._dist=s}};FlexPie.prototype._isSmallSegment=function(t,e,i){return t<=.5*this.tooltip.threshold&&Math.abs(i.sweep)<=.035&&Math.abs(e.sweep/i.sweep)>=10};FlexPie.prototype._performBind=function(){this._initData();if(this._cv){this._selectionIndex=this._cv.currentPosition;var t=this._cv.items;if(t){for(var e=t.length,i=this._getBindings(),n=0;n<i.length;n++){this._values[n]=[];this._sums[n]=0}for(var r=0;r<e;r++){var s=t[r];for(n=0;n<i.length;n++)this._sums[n]+=Math.abs(this._getBindData(s,this._values[n],0==n?this._labels:null,i[n],this.bindingName))}}}};FlexPie.prototype._getBindings=function(){var t=[],e=this.binding;if(e){var i=this._bindingSeparator;i&&(t=e.split(i))}return t};FlexPie.prototype._initData=function(){this._sum=0;this._sums=[];this._values=[];this._labels=[]};FlexPie.prototype._getBindData=function(t,e,i,n,r){var s,a=0,o=n?new Binding(n):null;o&&(s=o.getValue(t));a=0;isNumber(s)?a=asNumber(s):s&&(a=parseFloat(s.toString()));if(!isNaN(a)&&isFinite(a))e.push(a);else{a=0;e.push(a)}var h=r?new Binding(r):null;if(i)if(h&&t){var l=h.getValue(t);l&&(l=l.toString());i.push(l)}else i.push(a.toString());return a};FlexPie.prototype._render=function(e,i,n){void 0===i&&(i=!0);void 0===n&&(n=null);this._selectionAnimationID&&clearInterval(this._selectionAnimationID);this.onRendering(new RenderEventArgs(e));t.prototype._render.call(this,e,i,n)};FlexPie.prototype._prepareRender=function(){this._areas=[]};FlexPie.prototype._renderChart=function(t,e,i){var n=this._rectChart.clone(),r=(new Size(n.width,n.height),e.width),s=e.height,a=this._parseMargin(this.plotMargin),o=this.dataLabel,h=o.content&&o.position==PieLabelPosition.Outside,l=h?(isNumber(o.offset)?o.offset:0)+24:0;isNaN(a.left)&&(a.left=h?l:FlexPie._MARGIN);isNaN(a.right)&&(a.right=h?l:FlexPie._MARGIN);isNaN(a.top)&&(a.top=h?l:FlexPie._MARGIN);isNaN(a.bottom)&&(a.bottom=h?l:FlexPie._MARGIN);e.top+=a.top;s=e.height-(a.top+a.bottom);e.height=s>0?s:24;e.left+=a.left;r=e.width-(a.left+a.right);e.width=r>0?r:24;var _=this._getBindings(),u=this.titles;void 0===u&&_.length>1&&(u=_);var c=this._layout(t,e,u,_.length);this._angles=[];this._pels=[];this._pieGroups=[];this._rotationAngles=[];for(var p=0;p<_.length;p++){var f=c[p];u&&p<u.length&&u[p]&&FlexChartBase._renderText(t,u[p],new Point(f.left+.5*f.width,f.top),1,2,FlexPie._CSS_GROUP_TITLE);var d=t.startGroup("wj-slice-group",null,!0);this._pieGroups.push(d);this._renderData(t,f,p,d);t.endGroup();this._rotationAngles.push(0)}this._highlightCurrent();this.innerText&&this._renderInnerText(t);this.dataLabel.content&&this.dataLabel.position!=PieLabelPosition.None&&this._renderLabels(t);this.onRendered(new RenderEventArgs(t))};FlexPie.prototype._layout=function(t,e,i,n){var r=0,s=n,a=1,o=0;if(i)for(var h=0;h<i.length;h++)o=Math.max(o,t.measureString(i[h],FlexPie._CSS_GROUP_TITLE).height);var l=Math.floor(this.chartsPerLine);if(l>0){s=Math.min(n,l);a=Math.ceil(n/s);var _=Math.floor(e.width/s),u=Math.floor(e.height/a)-o;r=Math.min(_,u)}else for(var c=1;c<=n;c++){var p=Math.floor((n+(c-1))/c);_=Math.floor(e.width/c),u=Math.floor(e.height/p);(u-=o)<_&&(_=u);if(_>r){r=_;s=c;a=p}}for(var f=[],d=.5*(e.width-r*s),g=.5*(e.height-(r+o)*a),m=0;m<a;m++)for(var x=0;x<s;x++)f.push(new Rect(e.left+r*x+8+d,e.top+(r+o)*m+8+g+o,r-16,r-16));return f};FlexPie.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new Size,s=(new Size(i,n),this._getLabelsForLegend()),a=s.length,o=0,h=0,l=this.legend.scrollbar?18:0;this._colRowLens=[];for(var _=0;_<a;_++){var u=this._measureLegendItem(t,s[_]);if(e){if(h+u.height>n&&!this.legend.scrollbar){r.height=n;this._colRowLens.push(o);o=0;h=0}o<u.width&&(o=u.width);h+=u.height}else{if(o+u.width>i-l){r.width=i;this._colRowLens.push(h);h=0;o=0}h<u.height&&(h=u.height);o+=u.width}}if(e){r.height<h&&(r.height=h);this._colRowLens.push(o);r.width=this._colRowLens.reduce((function(t,e){return t+e}),0)}else{r.width<o&&(r.width=o);this._colRowLens.push(h);r.height=this._colRowLens.reduce((function(t,e){return t+e}),0)}return r};FlexPie.prototype._renderLegend=function(t,e,i,n,r,s){for(var a=new Rect(e.x,e.y,r,s),o=this._getLabelsForLegend(),h=o.length,l=0,_=e.clone(),u=0;u<h;u++){var c=this._measureLegendItem(t,o[u]);if(n){if(_.y+c.height>a.top+a.height+1&&!this.legend.scrollbar){_.x+=this._colRowLens[l];l++;_.y=e.y}}else if(_.x+c.width>a.right){_.y+=this._colRowLens[l];l++;_.x=e.x}var p=new Rect(_.x,_.y,c.width,c.height);this._drawLegendItem(t,p,u,o[u]);i.push(p);n?_.y+=c.height:_.x+=c.width}};FlexPie.prototype._renderData=function(t,e,i,n){var r=this._sums[i],s=this.startAngle+180,a=this.innerRadius,o=this.offset;a>1&&(a=1);if(r>0){var h=s*Math.PI/180,l=e.left+.5*e.width,_=e.top+.5*e.height,u=Math.min(.5*e.width,.5*e.height);this._centers[i]=new Point(l,_);var c=Math.max(o,this.selectedItemOffset);c>0&&(o*=u/=1+c);this._radius=u;var p=a*u;this._renderPie(t,i,u,p,h,o)}};FlexPie.prototype._renderPie=function(t,e,i,n,r,s){this._renderSlices(t,this._values[e],this._sums[e],e,i,n,r,2*Math.PI,s)};FlexPie.prototype._getCenter=function(){return this._centers[0]};FlexPie.prototype._renderSlices=function(t,e,i,n,r,s,a,o,h){for(var l,_,u,c=e.length,p=0,f=a,d=1==this.reversed,g=this._centers[n],m=0;m<c;m++)e[m]>0&&p++;var x=1===p?360:359.9/360;for(m=0;m<c;m++){_=g.x;u=g.y;l=t.startGroup("wj-slice");t.fill=this._getColorLight(m);t.stroke=this._getColor(m);var y=Math.abs(e[m]),b=Math.abs(y-i)<1e-10?o:o*y/i;b=Math.min(b,o*x);var v=d?f-.5*b:f+.5*b;if(h>0&&b<o){_+=h*Math.cos(v);u+=h*Math.sin(v)}this._renderSlice(t,_,u,v,n,m,r,s,f,b,o);d?f-=b:f+=b;t.endGroup();this._pels.push(l)}};FlexPie.prototype._renderSlice=function(t,e,i,n,r,s,a,o,h,l,_){var u=this,c=!!this.reversed;this._angles.push(n);if(this.itemFormatter){var p=new HitTestInfo(this,new Point(e+a*Math.cos(n),i+a*Math.sin(n)),ChartElement.SeriesSymbol);p._setData(null,s);this.itemFormatter(t,p,(function(){u._drawSlice(t,r,s,c,e,i,a,o,h,l)}));t.cssPriority=!0}else this._drawSlice(t,r,s,c,e,i,a,o,h,l)};FlexPie.prototype._getSelectedItemOffset=function(t,e){var i=0,n=0,r=0;t==this._selectedIndex&&this.selectedItemOffset>0&&(r=this.selectedItemOffset);if(r>0){i=Math.cos(e)*r*this._radius;n=Math.sin(e)*r*this._radius}return{x:i,y:n}};FlexPie.prototype._renderInnerText=function(t){for(var e=this.innerText,i=this.innerTextStyle,n=0;n<this._centers.length;n++){var r=this._centers[n],s=void 0;if(s=isFunction(e)?e(n):isArray(e)?asString(e[n]):asString(e)){s=format(s,{total:this._sums[n],binding:this._getBindings()[n]});i&&(t.cssPriority=!1);FlexPie._renderText(t,s,r,1,1,FlexChartBase._CSS_TITLE,null,i);t.cssPriority=!0}}};FlexPie.prototype._renderLabels=function(t){var e=this._areas.length,i=this.dataLabel,n=i.position,r="wj-data-label",s=this._rotationAngles,a=i.connectingLine,o=i.offset?i.offset:0;t.stroke="null";t.fill="transparent";t.strokeWidth=1;t.startGroup("wj-data-labels");for(var h=0;h<e;h++){var l=this._areas[h];if(l){var _=l.radius,u=l.langle+s[l.gi],c=1,p=1;if(n==PieLabelPosition.Center||n===PieLabelPosition.Radial||n===PieLabelPosition.Circular)_*=.5*(1+(l.innerRadius||0)/l.radius);else{if((u=_Math.clampAngle(u))<=-170||u>=170){c=2;p=1}else if(u>=-100&&u<=-80){c=1;p=2}else if(u>=-10&&u<=10){c=0;p=1}else if(u>=80&&u<=100){c=1;p=0}else if(-180<u&&u<-90){c=2;p=2}else if(-90<=u&&u<0){c=0;p=2}else if(0<u&&u<90){c=0;p=0}else if(90<u&&u<180){c=2;p=0}if(n==PieLabelPosition.Inside){c=2-c;p=2-p}}u*=Math.PI/180;var f=l.gi?h-l.gi*this._values[0].length:h,d=this._getSelectedItemOffset(f,u),g=d.x,m=d.y,x=_;n==PieLabelPosition.Outside?x+=o:n==PieLabelPosition.Inside&&(x-=o);var y=l.center.x,b=l.center.y,v=this._centers[l.gi],S=y-v.x,C=b-v.y;if(0!=this._rotationAngles[l.gi]){var P=Math.sqrt(S*S+C*C),w=Math.atan2(C,S)+this._rotationAngles[l.gi]*Math.PI/180;y=v.x+P*Math.cos(w);b=v.y+P*Math.sin(w)}var A=new Point(y+g+x*Math.cos(u),b+m+x*Math.sin(u));if(i.border&&n!=PieLabelPosition.Center){0==c?A.x+=2:2==c&&(A.x-=2);0==p?A.y+=2:2==p&&(A.y-=2)}var T=new HitTestInfo(this,A);T._setDataGroup(l.gi,l.tag);var M=this._getLabelContent(T,i.content),L=new DataLabelRenderEventArgs(t,T,A,M);if(i.onRendering)if(i.onRendering(L)){M=L.text;A=L.point}else M=null;if(M){var E,F=180*Math.atan2(b-A.y,y-A.x)/Math.PI;F=(F+360)%360;if(n===PieLabelPosition.Radial||n===PieLabelPosition.Circular){if(n===PieLabelPosition.Radial)F>90&&F<270&&(F+=180);else{F>180&&F<360&&(F+=180);F-=90}(E=FlexChartBase._renderRotatedText(t,M,A,c,p,A,F,r).getBBox()).left=E.x;E.top=E.y}else E=FlexChartBase._renderText(t,M,A,c,p,r);i.border&&t.drawRect(E.left-2,E.top-2,E.width+4,E.height+4,"wj-data-label-border");if(a){var k=new Point(y+g+_*Math.cos(u),b+m+_*Math.sin(u));t.drawLine(A.x,A.y,k.x,k.y,"wj-data-label-line")}}t.cssPriority=!0}}t.endGroup()};FlexPie.prototype._drawSlice=function(t,e,i,n,r,s,a,o,h,l){var _;if(n)if(o>0){0!=l&&t.drawDonutSegment(r,s,a,o,h-l,l);(_=new _DonutSegment(new Point(r,s),a,o,h-l,l,this.startAngle)).tag=i;this._areas.push(_)}else{0!=l&&t.drawPieSegment(r,s,a,h-l,l);(_=new _PieSegment(new Point(r,s),a,h-l,l,this.startAngle)).tag=i;this._areas.push(_)}else{if(o>0){0!=l&&t.drawDonutSegment(r,s,a,o,h,l);(_=new _DonutSegment(new Point(r,s),a,o,h,l,this.startAngle)).tag=i;this._areas.push(_)}else{0!=l&&t.drawPieSegment(r,s,a,h,l);(_=new _PieSegment(new Point(r,s),a,h,l,this.startAngle)).tag=i;this._areas.push(_)}h+=l}_&&(_.gi=e)};FlexPie.prototype._measureLegendItem=function(t,e){var i=new Size;i.width=Series._LEGEND_ITEM_WIDTH;i.height=Series._LEGEND_ITEM_HEIGHT;if(e){var n=t.measureString(e,FlexChartBase._CSS_LABEL,FlexChartBase._CSS_LEGEND);i.width+=n.width;i.height<n.height&&(i.height=n.height)}i.width+=3*Series._LEGEND_ITEM_MARGIN;i.height+=2*Series._LEGEND_ITEM_MARGIN;return i};FlexPie.prototype._drawLegendItem=function(t,e,i,n){t.strokeWidth=1;var r=Series._LEGEND_ITEM_MARGIN,s=null,a=null;null===s&&(s=this._getColorLight(i));null===a&&(a=this._getColor(i));t.fill=s;t.stroke=a;var o=e.top+.5*e.height,h=Series._LEGEND_ITEM_WIDTH,l=Series._LEGEND_ITEM_HEIGHT;t.drawRect(e.left+r,o-.5*l,h,l,null);null!=n&&FlexChartBase._renderText(t,n.toString(),new Point(e.left+l+2*r,o),0,1,FlexChartBase._CSS_LABEL)};FlexPie.prototype._getLabelContent=function(t,e){return isString(e)?this._keywords.replace(e,t):isFunction(e)?e(t):null};FlexPie.prototype._select=function(t,e){void 0===e&&(e=!1);this._highlight(!1,this._selectionIndex);this._selectionIndex=t;if(this.selectionMode==SelectionMode.Point){var i=this._cv;if(i){this._notifyCurrentChanged=!1;i.moveCurrentToPosition(t);this._notifyCurrentChanged=!0}}if(null==t){this._selectedIndex=-1;this.invalidate()}else if(this.isAnimated&&this.selectedItemPosition!=Position.None||!(this.selectedItemOffset>0||this.selectedItemPosition!=Position.None))this._highlight(!0,this._selectionIndex,e);else{this._selectedIndex=t;this.invalidate()}this.onSelectionChanged()};FlexPie.prototype._highlightCurrent=function(){if(this.selectionMode!=SelectionMode.None){var t=-1,e=this._cv;e&&(t=e.currentPosition);this._highlight(!0,t)}};FlexPie.prototype._highlight=function(t,e,i){void 0===i&&(i=!1);if(this.selectionMode==SelectionMode.Point&&null!=e&&e>=0)if(t){for(var n=[],r=0;r<this._pieGroups.length;r++){if(c=this._pels[e+r*this._values[0].length]){c.parentNode.appendChild(c);var s=this._find(c,["ellipse"]);this._highlightItems(this._find(c,["path","ellipse"]),FlexChartBase._CSS_SELECTION,t)}var a=this._angles[e+r*this._values[0].length];if(this.selectedItemPosition!=Position.None&&0!=a){var o=0;this.selectedItemPosition==Position.Left?o=180:this.selectedItemPosition==Position.Top?o=-90:this.selectedItemPosition==Position.Bottom&&(o=90);var h=o*Math.PI/180-a;h*=180/Math.PI;if(i&&this.isAnimated)n.push(h);else{this._rotationAngles[r]=h;this._pieGroups[r].transform.baseVal.getItem(0).setRotate(h,this._centers[r].x,this._centers[r].y)}}var l=this.selectedItemOffset;if(l>0&&s&&0==s.length){var _=this._selectedOffset.x=Math.cos(a)*l*this._radius,u=this._selectedOffset.y=Math.sin(a)*l*this._radius;c&&c.setAttribute("transform","translate("+_.toFixed()+","+u.toFixed()+")")}this._selectedIndex=e}n.length>0&&this._animateSelectionAngle(n,.5)}else{for(r=0;r<this._pieGroups.length;r++){var c;if(c=this._pels[e+r*this._values[0].length]){c.parentNode.insertBefore(c,c.parentNode.childNodes.item(e));c.removeAttribute("transform");this._highlightItems(this._find(c,["path","ellipse"]),FlexChartBase._CSS_SELECTION,t)}}this._selectedIndex==e&&(this._selectedIndex=-1)}};FlexPie.prototype._animateSelectionAngle=function(t,e){var i=this,n=i._pieGroups;i._selectionAnimationID&&clearInterval(this._selectionAnimationID);this._selectionAnimationID=animate((function(e){if(n==i._pieGroups){for(var r=0;r<n.length;r++){var s=_Math.clampAngle(i._rotationAngles[r]),a=_Math.clampAngle(t[r])-s,o=s;i._rotationAngles[r]=s=o+a*e;n[r].transform.baseVal.getItem(0).setRotate(s,i._centers[r].x,i._centers[r].y)}1==e&&clearInterval(i._selectionAnimationID);e>.99&&(i.selectedItemOffset>0||i.selectedItemPosition!=Position.None)&&i.invalidate()}}),1e3*e)};FlexPie.prototype._getHitTestItem=function(t){var e=null,i=null;(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(i=e[t]);return i};FlexPie.prototype._getHitTestValue=function(t,e){null==e&&(e=0);return this._values[e][t]};FlexPie.prototype._getHitTestLabel=function(t){return this._labels[t]};FlexPie._MARGIN=4;FlexPie._CSS_GROUP_TITLE="wj-label";return FlexPie}(FlexChartBase);export{FlexPie};var _Math=function(){function _Math(){}_Math.clampAngle=function(t,e){void 0===e&&(e=0);var i=(t+180)%360-180;i<-180+(e<0?e+360:e)&&(i+=360);return i};return _Math}(),_PieSegment=function(){function _PieSegment(t,e,i,n,r){void 0===r&&(r=0);this._isFull=!1;this._center=t;this._radius=e;this._originAngle=i;this._originSweep=n;n>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*n*180/Math.PI;this._angle=_Math.clampAngle(180*i/Math.PI+this._sweep);this._radius2=e*e;this._startAngle=r}_PieSegment.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y;if(e*e+i*i<=this._radius2){var n=180*Math.atan2(i,e)/Math.PI,r=_Math.clampAngle(this._angle,this._startAngle)-_Math.clampAngle(n,this._startAngle);if(this._isFull||Math.abs(r)<=this._sweep)return!0}return!1};_PieSegment.prototype.distance=function(t){if(this.contains(t))return 0;var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i,r=180*Math.atan2(i,e)/Math.PI,s=_Math.clampAngle(this._angle,this._startAngle)-_Math.clampAngle(r,this._startAngle);if(this._isFull||Math.abs(s)<=this._sweep)return Math.sqrt(n)-this._radius;var a=this.center.clone();a.x+=this.radius*Math.cos(this._originAngle);a.y+=this.radius*Math.sin(this._originAngle);var o=this.center.clone();o.x+=this.radius*Math.cos(this._originAngle+this._originSweep);o.y+=this.radius*Math.sin(this._originAngle+this._originSweep);var h=FlexChartCore._dist(t,this.center,a),l=FlexChartCore._dist(t,this.center,o);return Math.min(h,l)};Object.defineProperty(_PieSegment.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0});Object.defineProperty(_PieSegment.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0});Object.defineProperty(_PieSegment.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0});Object.defineProperty(_PieSegment.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0});Object.defineProperty(_PieSegment.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0});return _PieSegment}();export{_PieSegment};var _DonutSegment=function(){function _DonutSegment(t,e,i,n,r,s){void 0===s&&(s=0);this._isFull=!1;this._center=t;this._radius=e;this._iradius=i;this._originAngle=n;this._originSweep=r;r>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*r*180/Math.PI;this._angle=_Math.clampAngle(180*n/Math.PI+this._sweep);this._radius2=e*e;this._iradius2=i*i;this._startAngle=s}_DonutSegment.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i;if(n>=this._iradius2&&n<=this._radius2){var r=180*Math.atan2(i,e)/Math.PI,s=_Math.clampAngle(this._angle,this._startAngle)-_Math.clampAngle(r,this._startAngle);if(this._isFull||Math.abs(s)<=this._sweep)return!0}return!1};_DonutSegment.prototype.distance=function(t){if(this.contains(t))return 0;var e=this.center.clone();e.x+=this.radius*Math.cos(this._originAngle);e.y+=this.radius*Math.sin(this._originAngle);var i=this.center.clone();i.x+=this._iradius*Math.cos(this._originAngle);i.y+=this._iradius*Math.sin(this._originAngle);var n=this.center.clone();n.x+=this.radius*Math.cos(this._originAngle+this._originSweep);n.y+=this.radius*Math.sin(this._originAngle+this._originSweep);var r=this.center.clone();r.x+=this._iradius*Math.cos(this._originAngle+this._originSweep);r.y+=this._iradius*Math.sin(this._originAngle+this._originSweep);var s=FlexChartCore._dist(t,e,i),a=FlexChartCore._dist(t,n,r);return Math.min(s,a)};Object.defineProperty(_DonutSegment.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0});Object.defineProperty(_DonutSegment.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0});Object.defineProperty(_DonutSegment.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0});Object.defineProperty(_DonutSegment.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0});Object.defineProperty(_DonutSegment.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0});Object.defineProperty(_DonutSegment.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0});return _DonutSegment}();export{_DonutSegment};var LineMarkers=function(){function LineMarkers(){this._moveMarker=function(t){var e=t.currentTarget,i=this._markers,n=e.getAttribute("data-markerIndex");null!=n&&i[n].forEach((function(e){e._moveMarker(t)}))};this._markers=[];this._bindMoveMarker=this._moveMarker.bind(this)}LineMarkers.prototype.attach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,s=n.getAttribute("data-markerIndex");if(null!=s)if((i=r[s])&&isArray(i))i.push(t);else{r[s]=[t];this._bindMoveEvent(n)}else{e=r.length,i=[t];r.push(i);n.setAttribute("data-markerIndex",e);this._bindMoveEvent(n)}};LineMarkers.prototype.detach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,s=n.getAttribute("data-markerIndex");if(null!=s){(e=(i=r[s]).indexOf(t))>-1&&i.splice(e,1);if(0===i.length){(e=r.indexOf(i))>-1&&(r[e]=void 0);this._unbindMoveEvent(n)}}};LineMarkers.prototype._unbindMoveEvent=function(t){var e=this._bindMoveMarker;t.removeEventListener("mousemove",e);"ontouchstart"in window&&t.removeEventListener("touchmove",e)};LineMarkers.prototype._bindMoveEvent=function(t){var e=this._bindMoveMarker;t.addEventListener("mousemove",e);"ontouchstart"in window&&t.addEventListener("touchmove",e)};return LineMarkers}(),lineMarkers=new LineMarkers;export var LineMarkerLines;!function(t){t[t.None=0]="None";t[t.Vertical=1]="Vertical";t[t.Horizontal=2]="Horizontal";t[t.Both=3]="Both"}(LineMarkerLines||(LineMarkerLines={}));export var LineMarkerInteraction;!function(t){t[t.None=0]="None";t[t.Move=1]="Move";t[t.Drag=2]="Drag"}(LineMarkerInteraction||(LineMarkerInteraction={}));export var LineMarkerAlignment;!function(t){t[t.Auto=2]="Auto";t[t.Right=0]="Right";t[t.Left=1]="Left";t[t.Bottom=4]="Bottom";t[t.Top=6]="Top"}(LineMarkerAlignment||(LineMarkerAlignment={}));var LineMarker=function(){function LineMarker(t,e){this._wrapperMousedown=null;this._wrapperMouseup=null;this._savedPosition=new Point;this.positionChanged=new Event;this._chart=t;t._markers.push(this);t.rendered.addHandler(this._initialize,this);this._resetDefaultValue();copy(this,e);this._initialize()}Object.defineProperty(LineMarker.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){if(t!==this._isVisible){this._isVisible=asBoolean(t);this._marker&&this._toggleVisibility()}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(t){t!==this._seriesIndex&&(this._seriesIndex=asNumber(t,!0))},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(t){if(t!==this._horizontalPosition){this._horizontalPosition=asNumber(t,!0);this._savedPosition.x=this._horizontalPosition;if(this._horizontalPosition<0||this._horizontalPosition>1)throw"horizontalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"x",{get:function(){var t=this._chart.axisX,e=this.chart.pageToControl(this._targetPoint);return t.convertBack(e.x)},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"y",{get:function(){var t=this._chart.axisY,e=this.chart.pageToControl(this._targetPoint);return t.convertBack(e.y)},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"content",{get:function(){return this._content},set:function(t){if(t!==this._content){this._content=asFunction(t);this._updateMarkerPosition()}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(t){if(t!==this._verticalPosition){this._verticalPosition=asNumber(t,!0);this._savedPosition.y=this._verticalPosition;if(this._verticalPosition<0||this._verticalPosition>1)throw"verticalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"alignment",{get:function(){return this._alignment},set:function(t){if(t!==this._alignment){this._alignment=t;this._marker&&this._updatePositionByAlignment()}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"lines",{get:function(){return this._lines},set:function(t){if((t=asEnum(t,LineMarkerLines))!=this._lines){this._lines=t;this._marker&&this._resetLinesVisibility()}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"interaction",{get:function(){return this._interaction},set:function(t){if((t=asEnum(t,LineMarkerInteraction))!=this._interaction){this._marker&&this._detach();this._interaction=t;this._marker&&this._attach();this._toggleElesDraggableClass(this._interaction==LineMarkerInteraction.Drag)}},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){t!=this._dragThreshold&&(this._dragThreshold=asNumber(t))},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"dragContent",{get:function(){return this._dragContent},set:function(t){t!==this._dragContent&&(this._dragContent=asBoolean(t));toggleClass(this._dragEle,LineMarker._CSS_LINE_DRAGGABLE,this._interaction===LineMarkerInteraction.Drag&&this._dragContent&&this._lines!==LineMarkerLines.None)},enumerable:!0,configurable:!0});Object.defineProperty(LineMarker.prototype,"dragLines",{get:function(){return this._dragLines},set:function(t){t!=this._dragLines&&(this._dragLines=asBoolean(t))},enumerable:!0,configurable:!0});LineMarker.prototype.onPositionChanged=function(t){this.positionChanged.raise(this,t)};LineMarker.prototype.remove=function(){var t=this._chart;if(this._marker){t.rendered.removeHandler(this._initialize,this);this._detach();this._removeMarker();this._wrapperMoveMarker=null;this._wrapperMousedown=null;this._wrapperMouseup=null}};LineMarker.prototype._attach=function(){var t=this._chart.hostElement;this._interaction!==LineMarkerInteraction.None?addClass(t,LineMarker._CSS_TOUCH_DISABLED):removeClass(t,LineMarker._CSS_TOUCH_DISABLED);lineMarkers.attach(this);this._attachDrag()};LineMarker.prototype._attachDrag=function(){if(this._interaction===LineMarkerInteraction.Drag){this._wrapperMousedown||(this._wrapperMousedown=this._onMousedown.bind(this));this._wrapperMouseup||(this._wrapperMouseup=this._onMouseup.bind(this));this._toggleDragEventAttach(!0)}};LineMarker.prototype._detach=function(){removeClass(this._chart.hostElement,LineMarker._CSS_TOUCH_DISABLED);lineMarkers.detach(this);this._detachDrag()};LineMarker.prototype._detachDrag=function(){this._interaction===LineMarkerInteraction.Drag&&this._toggleDragEventAttach(!1)};LineMarker.prototype._toggleDragEventAttach=function(t){var e=this._chart.hostElement,i=t?"addEventListener":"removeEventListener";e[i]("mousedown",this._wrapperMousedown);document[i]("mouseup",this._wrapperMouseup);"ontouchstart"in window&&e[i]("touchstart",this._wrapperMousedown);"ontouchend"in window&&document[i]("touchend",this._wrapperMouseup)};LineMarker.prototype._onMousedown=function(t){var e,i,n,r,s,a=this._getEventPoint(t);if(this._interaction===LineMarkerInteraction.Drag){r=!(0===(e=getElementRect(this._hLine)).width||0===e.height);s=!(0===(i=getElementRect(this._vLine)).width||0===i.height);n=getElementRect(this._markerContent);if(this._dragContent&&this._pointInRect(a,n)){this._capturedEle=this._markerContent;this._contentDragStartPoint=new Point(a.x,a.y);this._mouseDownCrossPoint=new Point(this._targetPoint.x,this._targetPoint.y)}else if(r&&(Math.abs(e.top-a.y)<=this._dragThreshold||Math.abs(a.y-e.top-e.height)<=this._dragThreshold||a.y>=e.top&&a.y<=e.top+e.height)){this._capturedEle=this._hLine;this._contentDragStartPoint=void 0;addClass(this._chart.hostElement,LineMarker._CSS_LINE_DRAGGABLE)}else if(s&&(Math.abs(i.left-a.x)<=this._dragThreshold||Math.abs(a.x-i.left-i.width)<=this._dragThreshold||a.x>=i.left&&a.x<=i.left+i.width)){this._capturedEle=this._vLine;this._contentDragStartPoint=void 0;addClass(this._chart.hostElement,LineMarker._CSS_LINE_DRAGGABLE)}t.preventDefault()}};LineMarker.prototype._onMouseup=function(t){var e=this._alignment===LineMarkerAlignment.Auto&&this._capturedEle===this._markerContent&&this._lines!==LineMarkerLines.None;this._capturedEle=void 0;this._contentDragStartPoint=void 0;this._mouseDownCrossPoint=void 0;if(e){this._updatePositionByAlignment();this._updatePositionByAlignment()}removeClass(this._chart.hostElement,LineMarker._CSS_LINE_DRAGGABLE)};LineMarker.prototype._moveMarker=function(t){var e,i,n,r,s,a,o=this._chart,h=this._getEventPoint(t),l=this._plotRect,_=this._interaction===LineMarkerInteraction.Drag,u=this._lines===LineMarkerLines.Horizontal,c=this._lines===LineMarkerLines.Vertical,p=this._seriesIndex,f=getElementRect(o.hostElement);if(l&&this._isVisible&&this._interaction!==LineMarkerInteraction.None&&(this._interaction!==LineMarkerInteraction.Drag||this._capturedEle&&this._lines!==LineMarkerLines.None)){if(_)if(this._contentDragStartPoint){h.x=u?this._targetPoint.x:this._mouseDownCrossPoint.x+h.x-this._contentDragStartPoint.x;h.y=c?this._targetPoint.y:this._mouseDownCrossPoint.y+h.y-this._contentDragStartPoint.y}else u||!this._dragLines&&this._capturedEle===this._hLine?h.x=this._targetPoint.x:(c||!this._dragLines&&this._capturedEle===this._vLine)&&(h.y=this._targetPoint.y);if(_&&this._lines===LineMarkerLines.Horizontal||!this._dragLines&&this._capturedEle===this._hLine){if(h.y<=l.top||h.y>=l.top+l.height)return}else if(_&&this._lines===LineMarkerLines.Vertical||!this._dragLines&&this._capturedEle===this._vLine){if(h.x<=l.left||h.x>=l.left+l.width)return}else{var d=this._getTop();if(h.x<=l.left||h.y<=d||h.x>=l.left+l.width||h.y>=d+l.height)return}if(null!=p&&p>=0&&p<o.series.length){if(null==(i=(e=o.series[p]).hitTest(new Point(h.x,NaN)))||null==i.x||null==i.y)return;n=e.axisX||o.axisX;r=e._getAxisY();s=isDate(i.x)?FlexChartCore._toOADate(i.x):i.x;s=isString(s)?i.pointIndex:s;a=isDate(i.y)?FlexChartCore._toOADate(i.y):i.y;var g=this._getElementPaddingValuee(o.hostElement,"padding-left"),m=this._getElementPaddingValuee(o.hostElement,"padding-top");h.x=n.convert(s)+g+f.left;this.chart._stacking!=Stacking.None&&(a=this._calcStackedValue(p,s,a));h.y=r.convert(a)+m+f.top}this._updateMarkerPosition(h);t.preventDefault()}};LineMarker.prototype._calcStackedValue=function(t,e,i){for(var n=i,r=this.chart._stacking==Stacking.Stacked100pc,s=0;s<t;s++){var a=this.chart.series[s],o=a.getValues(1),h=a.getValues(0);if(h)for(var l=0;l<h.length;l++){if(e===(o?o[l]:l)){isFinite(h[l])&&(r||this._sign(i)==this._sign(h[l]))&&(n+=h[l]);break}}}r&&n&&(n/=this.chart._dataInfo.getStackedAbsSum(e))>1&&(n=1);return n};LineMarker.prototype._sign=function(t){return t>0?1:t<0?-1:0};LineMarker.prototype._getElementPaddingValuee=function(t,e){return+window.getComputedStyle(t,null).getPropertyValue(e).replace("px","")};LineMarker.prototype._show=function(t){(t||this._marker).style.display="block"};LineMarker.prototype._hide=function(t){(t||this._marker).style.display="none"};LineMarker.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()};LineMarker.prototype._resetDefaultValue=function(){this._isVisible=!0;this._alignment=LineMarkerAlignment.Auto;this._lines=LineMarkerLines.None;this._interaction=LineMarkerInteraction.None;this._horizontalPosition=null;this._verticalPosition=null;this._content=null;this._seriesIndex=null;this._dragThreshold=15;this._dragContent=!1;this._dragLines=!1;this._targetPoint=new Point};LineMarker.prototype._initialize=function(){var t,e=this._chart.hostElement.querySelector("."+FlexChartCore._CSS_PLOT_AREA);this._plot=e;this._marker||this._createMarker();if(e){this._plotRect=getElementRect(e);t=e.getBBox();this._plotRect.width=t.width;this._plotRect.height=t.height;this._updateMarkerSize();this._updateLinesSize()}this._updateMarkerPosition();this._wrapperMoveMarker=this._moveMarker.bind(this);this._attach()};LineMarker.prototype._createMarker=function(){var t,e;t=document.createElement("div");addClass(t,LineMarker._CSS_MARKER);(e=this._getContainer()).appendChild(t);this._markerContainer=e;this._marker=t;this._createChildren()};LineMarker.prototype._removeMarker=function(){var t=this._markerContainer;t.removeChild(this._marker);this._content=null;this._hLine=null;this._vLine=null;if(!t.hasChildNodes()){this._chart.hostElement.removeChild(this._markerContainer);this._markerContainer=null}this._marker=null};LineMarker.prototype._getContainer=function(){var t=this._chart.hostElement.querySelector(LineMarker._CSS_MARKER_CONTAINER);t||(t=this._createContainer());return t};LineMarker.prototype._createContainer=function(){var t=document.createElement("div"),e=this._chart.hostElement;addClass(t,LineMarker._CSS_MARKER_CONTAINER);e.insertBefore(t,e.firstChild);return t};LineMarker.prototype._createChildren=function(){var t,e,i,n,r=this._marker;(n=document.createElement("div")).style.position="absolute";n.style.height="100%";n.style.width="100%";r.appendChild(n);this._dragEle=n;t=document.createElement("div");addClass(t,LineMarker._CSS_MARKER_CONTENT);r.appendChild(t);this._markerContent=t;e=document.createElement("div");addClass(e,LineMarker._CSS_MARKER_HLINE);r.appendChild(e);this._hLine=e;i=document.createElement("div");addClass(i,LineMarker._CSS_MARKER_VLINE);r.appendChild(i);this._vLine=i;this._toggleElesDraggableClass(this._interaction===LineMarkerInteraction.Drag);this._resetLinesVisibility()};LineMarker.prototype._toggleElesDraggableClass=function(t){toggleClass(this._hLine,LineMarker._CSS_LINE_DRAGGABLE,t);toggleClass(this._vLine,LineMarker._CSS_LINE_DRAGGABLE,t);toggleClass(this._dragEle,LineMarker._CSS_LINE_DRAGGABLE,t&&this._dragContent&&this._lines!==LineMarkerLines.None)};LineMarker.prototype._updateMarkerSize=function(){var t=this._plotRect,e=this._chart.hostElement,i=window.getComputedStyle(e,null),n=getElementRect(e);if(this._marker){this._marker.style.marginTop=t.top-n.top-(parseFloat(i.getPropertyValue("padding-top"))||0)+"px";this._marker.style.marginLeft=t.left-n.left-(parseFloat(i.getPropertyValue("padding-left"))||0)+"px"}};LineMarker.prototype._updateLinesSize=function(){var t=this._plotRect;if(this._hLine&&this._vLine){this._hLine.style.width=t.width+"px";this._vLine.style.height=t.height+"px"}};LineMarker.prototype._resetLinesVisibility=function(){if(this._hLine&&this._vLine){this._hide(this._hLine);this._hide(this._vLine);this._lines!==LineMarkerLines.Horizontal&&this._lines!==LineMarkerLines.Both||this._show(this._hLine);this._lines!==LineMarkerLines.Vertical&&this._lines!==LineMarkerLines.Both||this._show(this._vLine)}};LineMarker.prototype._updateMarkerPosition=function(t){var e,i,n=this._plotRect,r=this._targetPoint,s=!1;this._interaction,LineMarkerInteraction.Drag;if(this._plot){e=n.left+n.width*(this._horizontalPosition||0);i=n.top+n.height*(this._verticalPosition||0);null==this._horizontalPosition&&t?e=t.x:this._savedPosition.x>0&&(e=n.left+n.width*this._savedPosition.x);null==this._verticalPosition&&t?i=t.y:this._savedPosition.y>0&&(i=n.top+n.height*this._savedPosition.y);e===r.x&&i===r.y||(s=!0);r.x=e;r.y=i;this._savedPosition.x=clamp((e-n.left)/n.width,0,1);this._savedPosition.y=clamp((i-n.top)/n.height,0,1);this._toggleVisibility();this._content&&this._updateContent();s&&this._raisePositionChanged(e,i);this._updatePositionByAlignment(!!t)}};LineMarker.prototype._updateContent=function(){var t,e=this._chart,i=this._targetPoint,n=e.hitTest(i);t=this._content.call(null,n,i);this._markerContent.innerHTML=t||""};LineMarker.prototype._raisePositionChanged=function(t,e){this._plotRect;this.onPositionChanged(new Point(t,e))};LineMarker.prototype._updatePositionByAlignment=function(t){var e=this._alignment,i=this._targetPoint,n=this._marker,r=0,s=0,a=n.clientWidth,o=n.clientHeight,h=this._plotRect;if(this._plot){var l=this._getTop();if(!this._capturedEle||this._capturedEle&&this._capturedEle!==this._markerContent){if(e===LineMarkerAlignment.Auto){i.x+a+12>h.left+h.width&&i.x-a>=0&&(s=a);r=o;i.y-o<l&&(r=0)}else{1==(1&e)&&(s=a);2==(2&e)&&(r=o)}this._interaction===LineMarkerInteraction.Move&&0===r&&0===s&&null==this.verticalPosition&&(s=-12)}else{parseInt(this._hLine.style.top)>0&&(r=o);parseInt(this._vLine.style.left)>0&&(s=a)}n.style.left=i.x-s-h.left+"px";n.style.top=i.y-r-l+"px";this._hLine.style.top=r+"px";this._hLine.style.left=h.left-i.x+s+"px";this._vLine.style.top=l-i.y+r+"px";this._vLine.style.left=s+"px"}};LineMarker.prototype._getEventPoint=function(t){return t instanceof MouseEvent?new Point(t.pageX,t.pageY):new Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY)};LineMarker.prototype._pointInRect=function(t,e){return!(!t||!e)&&(t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height)};LineMarker.prototype._getTop=function(){var t=0,e=this.chart._getHostComputedStyle();if(e){t+=this.chart._parsePx(e.paddingTop);t+=this.chart._parsePx(e.borderTopWidth);t+=this.chart._parsePx(e.marginTop)}return this._chart._plotRect.top+this._plot.getBoundingClientRect().top-t};LineMarker._CSS_MARKER="wj-chart-linemarker";LineMarker._CSS_MARKER_HLINE="wj-chart-linemarker-hline";LineMarker._CSS_MARKER_VLINE="wj-chart-linemarker-vline";LineMarker._CSS_MARKER_CONTENT="wj-chart-linemarker-content";LineMarker._CSS_MARKER_CONTAINER="wj-chart-linemarker-container";LineMarker._CSS_LINE_DRAGGABLE="wj-chart-linemarker-draggable";LineMarker._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled";return LineMarker}();export{LineMarker};var _BasePlotter=function(){function _BasePlotter(){this._DEFAULT_WIDTH=2;this._DEFAULT_SYM_SIZE=10;this.clipping=!0}_BasePlotter.prototype.clear=function(){this.seriesCount=0;this.seriesIndex=0};_BasePlotter.prototype._renderLabels=function(t,e,i,n,r){var s=i.length,a=n.dataLabel,o=a.border,h=a.offset,l=a.connectingLine;void 0===h&&(h=l?16:0);o&&(h-=2);for(var _=0;_<s;_++){var u=i[_],c=asType(u.tag,_DataPoint,!0);c&&!u.ignoreLabel&&this._renderLabel(t,u,c,n,a,e,h,r)}};_BasePlotter.prototype._renderLabel=function(t,e,i,n,r,s,a,o){var h=null==r.position?LabelPosition.Top:r.position,l=r.border,_=r.connectingLine,u=new HitTestInfo(n,p);u._setDataPoint(i);var c=n._getLabelContent(u,r.content),p=this._getLabelPoint(s,i);this._getPointAndPosition(p,h,e,n);if(n._plotRect.contains(p)){var f=new DataLabelRenderEventArgs(t,u,p,c);if(r.onRendering)if(r.onRendering(f)){c=f.text;p=f.point}else c=null;if(c){var d=this._renderLabelAndBorder(t,c,h,a,p,_,2,l);if(d){var g=new _RectArea(d);g.tag=i;o.push(g)}}t.cssPriority=!0}};_BasePlotter.prototype._getPointAndPosition=function(t,e,i,n){if(i instanceof _RectArea){var r=i;n._isRotated()?t.y=r.rect.top+.5*r.rect.height:t.x=r.rect.left+.5*r.rect.width}};_BasePlotter.prototype._getLabelPoint=function(t,e){var i=t._getAxisX(),n=t._getAxisY();return new Point(i.convert(e.dataX),n.convert(e.dataY))};_BasePlotter.prototype._renderLabelAndBorder=function(t,e,i,n,r,s,a,o){var h,l="wj-data-label",_="wj-data-label-line",u=FlexChartCore._CSS_DATA_LABELS;switch(i){case LabelPosition.Top:s&&t.drawLine(r.x,r.y,r.x,r.y-n,_);r.y-=a+n;h=FlexChartCore._renderText(t,e,r,1,2,l,u);break;case LabelPosition.Bottom:s&&t.drawLine(r.x,r.y,r.x,r.y+n,_);r.y+=a+n;h=FlexChartCore._renderText(t,e,r,1,0,l,u);break;case LabelPosition.Left:s&&t.drawLine(r.x,r.y,r.x-n,r.y,_);r.x-=a+n;h=FlexChartCore._renderText(t,e,r,2,1,l,u);break;case LabelPosition.Right:s&&t.drawLine(r.x,r.y,r.x+n,r.y,_);r.x+=a+n;h=FlexChartCore._renderText(t,e,r,0,1,l,u);break;case LabelPosition.Center:h=FlexChartCore._renderText(t,e,r,1,1,l,u)}o&&h&&t.drawRect(h.left-a,h.top-a,h.width+2*a,h.height+2*a,"wj-data-label-border");return h};_BasePlotter.prototype.getOption=function(t,e){var i=this.chart._options;e&&(i=i?i[e]:null);if(i&&!isUndefined(i[t])&&null!==i[t])return i[t]};_BasePlotter.prototype.getNumOption=function(t,e){var i=this.chart._options;e&&(i=i?i[e]:null);if(i&&i[t])return asNumber(i[t],!0)};_BasePlotter.prototype.getItemFormatter=function(t){if(t instanceof SeriesBase){var e=t;return e.itemFormatter?e.itemFormatter:this.chart.itemFormatter}return this.chart.itemFormatter};_BasePlotter.cloneStyle=function(t,e){if(!t)return t;var i={};for(var n in t)e&&e.indexOf(n)>=0||(i[n]=t[n]);return i};_BasePlotter.prototype.isValid=function(t,e,i,n){return isFinite(t)&&isFinite(e)&&FlexChartCore._contains(this.chart._plotRect,new Point(t,e))};_BasePlotter.prototype.load=function(){};_BasePlotter.prototype.unload=function(){};_BasePlotter.prototype._createSteps=function(t,e,i){var n=this.getOption("position","step"),r=i||t.length,s=[],a=[],o=this.chart._isRotated();if("center"==n)if(o)for(var h=0;h<r;h++){var l=0==h?e[h+1]-e[h]:e[h]-e[h-1],_=h==r-1?e[h]-e[h-1]:e[h+1]-e[h];s.push(t[h]);a.push(e[h]-.5*l);s.push(t[h]);a.push(e[h]+.5*_)}else for(h=0;h<r;h++){var u=0==h?t[h+1]-t[h]:t[h]-t[h-1],c=h==r-1?t[h]-t[h-1]:t[h+1]-t[h];s.push(t[h]-.5*u);a.push(e[h]);s.push(t[h]+.5*c);a.push(e[h])}else if("end"==n)for(h=0;h<r;h++){if(h>0)if(o){s.push(t[h]);a.push(e[h-1])}else{s.push(t[h-1]);a.push(e[h])}s.push(t[h]);a.push(e[h])}else for(h=0;h<r;h++){s.push(t[h]);a.push(e[h]);if(h<r-1)if(o){s.push(t[h]);a.push(e[h+1])}else{s.push(t[h+1]);a.push(e[h])}}return{x:s,y:a}};return _BasePlotter}();export{_BasePlotter};var _AreaPlotter=function(t){__extends(_AreaPlotter,t);function _AreaPlotter(){var e=t.call(this)||this;e.stacking=Stacking.None;e.isSpline=!1;e.isStep=!1;e.stackPos={};e.stackNeg={};return e}_AreaPlotter.prototype.adjustLimits=function(t,e){this.dataInfo=t;for(var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY(),a=0;a<this.chart.series.length;a++){var o=this.chart.series[a];if(this._isRange(o)){var h=o._getChartType();if(!h||h==ChartType.Area)for(var l=o._getBindingValues(1),_=0;_<l.length;_++)l[_]>s?s=l[_]:l[_]<n&&(n=l[_])}}if(this.isSpline){var u=.1*(s-n);this.chart.axisY._getLogBase()||(n-=u);s+=u}return this.rotated?new Rect(n,i,s-n,r-i):new Rect(i,n,r-i,s-n)};_AreaPlotter.prototype.clear=function(){t.prototype.clear.call(this);this.stackNeg={};this.stackPos={}};_AreaPlotter.prototype.plotSeries=function(t,e,i,n,r,s,a,o){var h=n;if(this._isRange(h))this.plotSeriesRanged(t,e,i,n,r,s,a,o);else{var l=[],_=this.chart.series.indexOf(n),u=n.getValues(0),c=n.getValues(1);if(u){var p=u.length;if(p){c||(c=this.dataInfo.getXVals());var f=!0;if(c)c.length<p&&(p=c.length);else{f=!1;c=new Array(p)}var d=new Array,g=new Array,m=new Array,x=new Array,y=this.stacking!=Stacking.None&&!h._isCustomAxisY(),b=this.stacking==Stacking.Stacked100pc&&!h._isCustomAxisY();void 0!==h._getChartType()&&(y=b=!1);for(var v=this.rotated,S=!1,C=h.interpolateNulls,P=null,w=null,A=this.chart._plotRect,T=0;T<p;T++){var M=f?c[T]:T,L=u[T];(null===P||M>P)&&(P=M);(null===w||M<w)&&(w=M);if(_DataInfo.isValid(M,L)){var E=v?i.convert(M):e.convert(M);if(y){if(b){L/=this.dataInfo.getStackedAbsSum(M)}var F=0;if(L>=0){F=isNaN(this.stackPos[M])?0:this.stackPos[M];L=this.stackPos[M]=F+L}else{F=isNaN(this.stackNeg[M])?0:this.stackNeg[M];L=this.stackNeg[M]=F+L}if(v){F<e.actualMin&&(F=e.actualMin);m.push(e.convert(F));x.push(E)}else{m.push(E);F<i.actualMin&&(F=i.actualMin);x.push(i.convert(F))}}if(v){var k=e.convert(L);if(isNaN(E)||isNaN(k)){S=!0;if(!y&&!0!==C){d.push(void 0);g.push(void 0)}}else{d.push(k);g.push(E);if(FlexChartCore._contains(A,new Point(k,E))){(I=new _CircleArea(new Point(k,E),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(_,T,L,M);this.hitTester.add(I,_)}}}else{k=i.convert(L);if(isNaN(E)||isNaN(k)){S=!0;if(!y&&!0!==C){d.push(void 0);g.push(void 0)}}else{d.push(E);g.push(k);if(FlexChartCore._contains(A,new Point(E,k))){var I;(I=new _CircleArea(new Point(E,k),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(_,T,M,L);this.hitTester.add(I,_)}}}}else{S=!0;if(!y&&!0!==C){d.push(void 0);g.push(void 0)}}}o&&d.forEach((function(t,e){null!=t&&l.push(new Point(t,g[e]))}));var N=this._DEFAULT_WIDTH,R=r._getColorLight(_),B=r._getColor(_),D=_BasePlotter.cloneStyle(n.style,["fill"]),O=_BasePlotter.cloneStyle(n.style,["stroke"]);if(!y&&!0!==C&&S){var V=[],j=[];for(T=0;T<p;T++)if(void 0===d[T]){if(V.length>1){V=(H=this._modifyPoints(V,j)).x;j=H.y;t.stroke=B;t.strokeWidth=N;t.fill="none";t.drawLines(V,j,null,D);this.hitTester.add(new _LinesArea(V,j),_);if(v){V.push(e.convert(e.actualMin),e.convert(e.actualMin));j.push(i.convert(i.actualMax),i.convert(i.actualMin))}else{V.push(V[V.length-1],V[0]);j.push(i.convert(i.actualMin),i.convert(i.actualMin))}t.fill=R;t.stroke="none";t.drawPolygon(V,j,null,O,this.chart._plotrectId)}V=[];j=[]}else{V.push(d[T]);j.push(g[T])}if(V.length>1){V=(H=this._modifyPoints(V,j)).x;j=H.y;t.stroke=B;t.strokeWidth=N;t.fill="none";t.drawLines(V,j,null,D);this.hitTester.add(new _LinesArea(V,j),_);if(v){V.push(e.convert(e.actualMin),e.convert(e.actualMin));j.push(i.convert(i.actualMax),i.convert(i.actualMin))}else{V.push(V[V.length-1],V[0]);j.push(i.convert(i.actualMin),i.convert(i.actualMin))}t.fill=R;t.stroke="none";t.drawPolygon(V,j,null,O,this.chart._plotrectId)}}else{var H;d=(H=this._modifyPoints(d,g)).x;g=H.y;if(y){var G=this._modifyPoints(m,x);m=G.x;x=G.y;d=d.concat(m.reverse());g=g.concat(x.reverse())}else if(v){d.push(e.convert(e.actualMin),e.convert(e.actualMin));g.push(g[g.length-1],g[0])}else{d.push(d[d.length-1],d[0]);g.push(i.convert(i.actualMin),i.convert(i.actualMin))}t.fill=R;t.stroke="none";t.drawPolygon(d,g,null,O,this.chart._plotrectId);if(y){d=d.slice(0,d.length-m.length);g=g.slice(0,g.length-x.length)}else{d=d.slice(0,d.length-2);g=g.slice(0,g.length-2)}t.stroke=B;t.strokeWidth=N;t.fill="none";t.drawLines(d,g,null,D,this.chart._plotrectId);this.hitTester.add(new _LinesArea(d,g),_)}this._drawSymbols(t,n,_);o&&l&&l.length&&o(l)}}}};_AreaPlotter.prototype._isRange=function(t){var e=this.chart?this.chart._bindingSeparator:",",i=null==t.binding?null:t.binding.split(e);return null!=i&&2==i.length};_AreaPlotter.prototype._modifyPoints=function(t,e){var i={x:t,y:e};if(this.isSpline){var n=this._convertToSpline(t,e);i.x=n.xs;i.y=n.ys}else if(this.isStep){var r=this._createSteps(t,e);i.x=r.x;i.y=r.y}return i};_AreaPlotter.prototype.plotSeriesRanged=function(t,e,i,n,r,s,a,o){var h=[],l=this.chart.series.indexOf(n),_=n,u=n.getValues(0),c=n.getValues(1),p=_._getBindingValues(1);if(u){var f=u.length;if(f){c||(c=this.dataInfo.getXVals());var d=!0;if(c)c.length<f&&(f=c.length);else{d=!1;c=new Array(f)}for(var g=new Array,m=new Array,x=new Array,y=this.rotated,b=!1,v=_.interpolateNulls,S=this.chart._plotRect,C=0;C<f;C++){var P=d?c[C]:C,w=u[C],A=p[C];if(_DataInfo.isValid(P,w,A)){var T=y?i.convert(P):e.convert(P);if(y){var M=e.convert(w),L=e.convert(A);if(isNaN(T)||isNaN(M)){b=!0;if(!0!==v){g.push(void 0);m.push(void 0);x.push(void 0)}}else{g.push(M);m.push(T);x.push(L);if(FlexChartCore._contains(S,new Point(M,T))){(E=new _CircleArea(new Point(M,T),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,C,w,P);this.hitTester.add(E,l)}if(FlexChartCore._contains(S,new Point(L,T))){(E=new _CircleArea(new Point(L,T),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,C,A,P);this.hitTester.add(E,l)}}}else{M=i.convert(w),L=i.convert(A);if(isNaN(T)||isNaN(M)){b=!0;if(!0!==v){g.push(void 0);m.push(void 0);x.push(void 0)}}else{g.push(T);m.push(M);x.push(L);if(FlexChartCore._contains(S,new Point(T,M))){(E=new _CircleArea(new Point(T,M),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,C,P,w);this.hitTester.add(E,l)}if(FlexChartCore._contains(S,new Point(T,L))){var E;(E=new _CircleArea(new Point(T,L),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,C,P,A);this.hitTester.add(E,l)}}}}else{b=!0;if(!0!==v){g.push(void 0);m.push(void 0);x.push(void 0)}}}o&&g.forEach((function(t,e){null!=t&&h.push(new Point(t,m[e]))}));var F=this._DEFAULT_WIDTH,k=r._getColorLight(l),I=r._getColor(l),N=_BasePlotter.cloneStyle(n.style,["fill"]),R=_BasePlotter.cloneStyle(n.style,["stroke"]);if(!0!==v&&b){var B=[],D=[],O=[];for(C=0;C<f;C++)if(void 0===g[C]){if(B.length>1){var V=y?O.slice(0).reverse():B.slice(0).reverse(),j=y?D.slice(0).reverse():O.slice(0).reverse();this._drawRangedArea(t,B,D,V,j,k,I,F,R,N);this.hitTester.add(new _LinesArea(B,D),l);this.hitTester.add(new _LinesArea(V,j),l)}B=[];D=[];O=[]}else{B.push(g[C]);D.push(m[C]);O.push(x[C])}if(B.length>1){V=y?O.slice(0).reverse():B.slice(0).reverse(),j=y?D.slice(0).reverse():O.slice(0).reverse();this._drawRangedArea(t,B,D,V,j,k,I,F,R,N);this.hitTester.add(new _LinesArea(B,D),l);this.hitTester.add(new _LinesArea(V,j),l)}}else{var H=y?x.slice(0).reverse():g.slice(0).reverse(),G=y?m.slice(0).reverse():x.slice(0).reverse();this._drawRangedArea(t,g,m,H,G,k,I,F,R,N);this.hitTester.add(new _LinesArea(g,m),l);this.hitTester.add(new _LinesArea(H,G),l)}this._drawSymbols(t,n,l);o&&h&&h.length&&o(h)}}};_AreaPlotter.prototype._drawRangedArea=function(t,e,i,n,r,s,a,o,h,l){if(this.isSpline){var _=this._convertToSpline(e,i),u=this._convertToSpline(n,r);e=_.xs;i=_.ys;n=u.xs;r=u.ys}e=e.concat(n);i=i.concat(r);t.fill=s;t.stroke="none";t.drawPolygon(e,i,null,h);e=e.slice(0,e.length-n.length);i=i.slice(0,i.length-r.length);t.stroke=a;t.strokeWidth=o;t.fill="none";t.drawLines(e,i,null,l);t.drawLines(n,r,null,l)};_AreaPlotter.prototype._convertToSpline=function(t,e){if(t&&e){var i=new _Curve(t,e).calculate();return{xs:i.xs,ys:i.ys}}return{xs:t,ys:e}};_AreaPlotter.prototype._drawSymbols=function(t,e,i){var n=this.getItemFormatter(e);if(null!=n){for(var r=this.hitTester._map[i],s=0;s<r.length;s++){var a=tryCast(r[s],_CircleArea);if(a){var o=a.tag;t.startGroup();var h=new HitTestInfo(this.chart,a.center,ChartElement.SeriesSymbol);h._setDataPoint(o);n(t,h,(function(){}));t.endGroup()}}t.cssPriority=!0}};return _AreaPlotter}(_BasePlotter);export{_AreaPlotter};var _BarPlotter=function(t){__extends(_BarPlotter,t);function _BarPlotter(){var e=null!==t&&t.apply(this,arguments)||this;e.origin=0;e.width=.7;e.isVolume=!1;e._volHelper=null;e.stackPosMap={};e.stackNegMap={};e.stacking=Stacking.None;return e}_BarPlotter.prototype.clear=function(){t.prototype.clear.call(this);this.stackNegMap[this.chart.axisY._uniqueId]={};this.stackPosMap[this.chart.axisY._uniqueId]={};this._volHelper=null};_BarPlotter.prototype.load=function(){t.prototype.load.call(this);if(this.isVolume){var e,i,n,r,s,a,o,h,l=null,_=null;for(a=0;a<this.chart.series.length;a++){s=(e=this.chart.series[a]).getDataType(1)||e.chart._xDataType;i=e._getAxisX();if((n=null===(n=e._getChartType())||isUndefined(n)?this.chart._getChartType():n)===ChartType.Column){var u=this.chart?this.chart._bindingSeparator:",",c=e.binding.split(u).length-1;r=e._getBindingValues(c)}else r=n===ChartType.Candlestick?e._getBindingValues(4):null;if(s===DataType.Date){var p;o=[];h=[];for(a=0;a<e._getLength();a++){p=e._getItem(a)[e.bindingX].valueOf();o.push(p);h.push({value:p,text:Globalize.format(new Date(p),i.format||"d")})}}else o=this.dataInfo.getXVals();l=this.dataInfo.getMinX();_=this.dataInfo.getMaxX();if(r&&r.length>0){this._volHelper=new _VolumeHelper(r,o,l,_,s);i._customConvert=this._volHelper.convert.bind(this._volHelper);i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);h&&h.length>0&&(this._itemsSource=i.itemsSource=h);break}}}};_BarPlotter.prototype.unload=function(){t.prototype.unload.call(this);for(var e,i=0;i<this.chart.series.length;i++)if(e=this.chart.series[i]._getAxisX()){e._customConvert=null;e._customConvertBack=null;e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null)}};_BarPlotter.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),s=t.getMaxY(),a=t.getDeltaX();a<=0&&(a=1);var o=!1;!this.isVolume||this.chart._getChartType()!==ChartType.Column&&this.chart._getChartType()!==ChartType.Candlestick?this.unload():this.load();for(var h=0;h<this.chart.series.length;h++){var l=this.chart.series[h],_=l._getChartType();if((_=null===_||isUndefined(_)?this.chart._getChartType():_)===ChartType.Column||_===ChartType.Bar){if(this._isRange(l)){l._getBindingValues(1).forEach((function(t){t<r?r=t:t>s&&(s=t)}))}}o||"BoxWhisker"==l.constructor.name||(o=!0)}if(this.rotated){!this.chart.axisY._getLogBase()&&t.getDataTypeY()!==DataType.Date&&o&&(this.origin>s?s=this.origin:this.origin<r&&(r=this.origin));return new Rect(r,i-.5*a,s-r,n-i+a)}!this.chart.axisY._getLogBase()&&t.getDataTypeY()!==DataType.Date&&o&&(this.origin>s?s=this.origin:this.origin<r&&(r=this.origin));return new Rect(i-.5*a,r,n-i+a,s-r)};_BarPlotter.prototype._isRange=function(t){var e=this.chart?this.chart._bindingSeparator:",",i=(null==t.binding?"":t.binding.split(e)).length-1;return this.isVolume?2===i:1===i};_BarPlotter.prototype.plotSeries=function(t,e,i,n,r,s,a,o){var h=[],l=this.chart.series.indexOf(n),_=asType(n,SeriesBase),u=this.chart._options,c=this.width,p=0;s=s||0;a=a||1;if(u&&u.groupWidth){var f=u.groupWidth;if(isNumber(f)){var d=asNumber(f);if(isFinite(d)&&d>0){p=d;c=1}}else if(isString(f)){var g=asString(f);if(g&&g.indexOf("%")>=0){g=g.replace("%","");d=parseFloat(g);if(isFinite(d)){d<0?d=0:d>100&&(d=100);p=0;c=d/100}}else{d=parseFloat(g);if(isFinite(d)&&d>0){p=d;c=1}}}}var m=c/a,x=_._getAxisY()._uniqueId,y=this.stackNegMap[x],b=this.stackPosMap[x],v=n.getValues(0),S=n.getValues(1),C=this._isRange(_),P=_._bindValues(null==_._cv?null==this.chart.collectionView?null:this.chart.collectionView.items:_._cv.items,_._getBinding(1)).values;if(v){S||(S=this.dataInfo.getXVals());if(S){var w=this.dataInfo.getDeltaX();if(w>0){c*=w;m*=w}}var A=_._getSymbolFill(l),T=_._getAltSymbolFill(l)||A,M=_._getSymbolStroke(l),L=_._getAltSymbolStroke(l)||M,E=v.length;null!=S&&(E=Math.min(E,S.length));var F,k,I=this.origin,N=0,R=this.stacking!=Stacking.None,B=this.stacking==Stacking.Stacked100pc;void 0!==_._getChartType()&&(R=B=!1);var D=this.getItemFormatter(n),O=e._actualMin,V=e._actualMax,j=i._actualMin,H=i._actualMax;if(this.rotated){I<O?I=O:I>V&&(I=V);_._isCustomAxisY()&&(R=B=!1);for(Y=e.convert(I),U=0;U<E;U++){q=S?S[U]:U,K=v[U],W=Y;this._getSymbolOrigin&&(W=i.convert(this._getSymbolOrigin(I,U)));if(C&&P&&P.length){Z=P[U];_DataInfo.isValid(Z)&&(W=e.convert(Z))}if(this._getSymbolStyles){A=(J=this._getSymbolStyles(U))&&J.fill?J.fill:A;T=J&&J.fill?J.fill:T;M=J&&J.stroke?J.fill:M;L=J&&J.stroke?J.fill:L}F=K>0?A:T;k=K>0?M:L;t.fill=F;t.stroke=k;if(_DataInfo.isValid(q,K))if(R){$=q+.5*c;if((Q=q-.5*c)<j&&$<j||Q>H&&$>H)continue;Q=i.convert(Math.max(Q,j));$=i.convert(Math.min($,H));if(B){K/=this.dataInfo.getStackedAbsSum(q)}et=0;if(K>=0){et=isNaN(b[q])?0:b[q];at=e.convert(et);tt=e.convert(et+K);b[q]=et+K}else{et=isNaN(y[q])?0:y[q];at=e.convert(et);tt=e.convert(et+K);y[q]=et+K}o&&h.push(new Point(tt,i.convert(q)));if(!_DataInfo.isValid(at,tt))continue;it=new Rect(Math.min(at,tt),Math.min(Q,$),Math.abs(tt-at),Math.abs($-Q));if(p>0){(_t=1-p/it.height)<0&&(_t=0);var G=it.top+.5*it.height;it.top+=(G-it.top)*_t;it.height=Math.min(p,it.height)}rt=new _RectArea(it);this.drawSymbol(t,it,n,U,new Point(tt,it.top+.5*it.height),D);n._setPointIndex(U,N);N++;st=B?Math.min(et+K,1):et+K;rt.tag=new _DataPoint(l,U,st,q);this.hitTester.add(rt,l)}else{$=q-.5*c+(s+1)*m;if((Q=q-.5*c+s*m)<j&&$<j||Q>H&&$>H)continue;Q=i.convert(Math.max(Q,j));$=i.convert(Math.min($,H));var z=e.convert(K);if(!_DataInfo.isValid(z,Q,$))continue;var X=new Rect(Math.min(z,W),Math.min(Q,$),Math.abs(W-z),Math.abs($-Q));o&&h.push(new Point(z,(Q+$)/2));if(p>0){(_t=1-(lt=p/a)/X.height)<0&&(_t=0);G=i.convert(q);X.top+=(G-X.top)*_t;X.height=Math.min(lt,X.height)}rt=new _RectArea(X);this.drawSymbol(t,X,n,U,new Point(z,X.top+.5*X.height),D);n._setPointIndex(U,N);N++;rt.tag=new _DataPoint(l,U,K,q);this.hitTester.add(rt,l)}else o&&h.push(null)}}else{I<j?I=j:I>H&&(I=H);var Y=i.convert(I);_._isCustomAxisY()&&(R=B=!1);for(var U=0;U<E;U++){var W=Y,q=S?S[U]:U,K=v[U];this._getSymbolOrigin&&(W=i.convert(this._getSymbolOrigin(I,U,E)));if(C&&P&&P.length){var Z=P[U];_DataInfo.isValid(Z)&&(W=i.convert(Z))}if(this._getSymbolStyles){var J;A=(J=this._getSymbolStyles(U,E))&&J.fill?J.fill:A;T=J&&J.fill?J.fill:T;M=J&&J.stroke?J.stroke:M;L=J&&J.stroke?J.stroke:L}F=K>0?A:T;k=K>0?M:L;t.fill=F;t.stroke=k;t.strokeWidth=null;if(_DataInfo.isValid(q,K))if(R){var Q,$,tt=q+.5*c;if((at=q-.5*c)<O&&tt<O||at>V&&tt>V)continue;at=e.convert(at);tt=e.convert(tt);if(!_DataInfo.isValid(at,tt))continue;if(B){K/=this.dataInfo.getStackedAbsSum(q)}var et=0;if(K>=0){et=isNaN(b[q])?0:b[q];Q=i.convert(Math.max(et,j));$=i.convert(Math.max(et+K,j));b[q]=et+K}else{et=isNaN(y[q])?0:y[q];Q=i.convert(et);$=i.convert(et+K);y[q]=et+K}o&&h.push(new Point(e.convert(q),$));if(!_DataInfo.isValid(Q,$))continue;var it=new Rect(Math.min(at,tt),Math.min(Q,$),Math.abs(tt-at),Math.abs($-Q));if(p>0){(_t=1-p/it.width)<0&&(_t=0);var nt=it.left+.5*it.width;it.left+=(nt-it.left)*_t;it.width=Math.min(p,it.width)}var rt=new _RectArea(it);this.drawSymbol(t,it,n,U,new Point(it.left+.5*it.width,$),D);n._setPointIndex(U,N);N++;var st=B?Math.min(et+K,1):et+K;rt.tag=new _DataPoint(l,U,q,st);this.hitTester.add(rt,l)}else{var at,tt=q-.5*c+(s+1)*m;if((at=q-.5*c+s*m)<O&&tt<O||at>V&&tt>V)continue;at=e.convert(at);tt=e.convert(tt);var ot=i.convert(K);if(!_DataInfo.isValid(ot,at,tt))continue;var ht=new Rect(Math.min(at,tt),Math.min(ot,W),Math.abs(tt-at),Math.abs(W-ot));o&&h.push(new Point((at+tt)/2,ot));if(p>0){var lt,_t;(_t=1-(lt=p/a)/ht.width)<0&&(_t=0);nt=e.convert(q);ht.left+=(nt-ht.left)*_t;ht.width=Math.min(lt,ht.width)}var rt=new _RectArea(ht);this.drawSymbol(t,ht,n,U,new Point(ht.left+.5*ht.width,ot),D);n._setPointIndex(U,N);N++;rt.tag=new _DataPoint(l,U,q,K);this.hitTester.add(rt,l)}else o&&h.push(null)}}o&&h&&h.length&&o(h)}};_BarPlotter.prototype.drawSymbol=function(t,e,i,n,r,s){var a=this;if(s){t.startGroup();var o=new HitTestInfo(this.chart,r,ChartElement.SeriesSymbol);o._setData(i,n);s(t,o,(function(){a.drawDefaultSymbol(t,e,i)}));t.cssPriority=!0;t.endGroup()}else this.drawDefaultSymbol(t,e,i)};_BarPlotter.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)};return _BarPlotter}(_BasePlotter);export{_BarPlotter};var _FunnelPlotter=function(t){__extends(_FunnelPlotter,t);function _FunnelPlotter(){var e=null!==t&&t.apply(this,arguments)||this;e.stacking=Stacking.None;return e}_FunnelPlotter.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();return new Rect(i,n,r-i,s-n)};_FunnelPlotter.prototype.plotSeries=function(t,e,i,n,r,s,a,o){var h=this.chart.series.indexOf(n);if(!(h>0)){var l,_,u,c,p,f=asType(n,SeriesBase),d=this.chart._options,g=n.getValues(0),m=n.getValues(1),x=this.chart._plotRect,y=d&&d.funnel&&null!=d.funnel.neckWidth?d.funnel.neckWidth:.2,b=d&&d.funnel&&null!=d.funnel.neckHeight?d.funnel.neckHeight:0,v=y*x.width,S=0,C=0,P=0,w=0,A=x.left,T=x.top,M=x.width,L=x.height;if(g){this.rotated&&(T+=x.height);v=v||1;m||(m=this.dataInfo.getXVals());var E=g.length;null!=m&&(E=Math.min(E,m.length));var F=0;for(S=0;S<E;S++)if(_DataInfo.isValid(g[S])){C+=g[S];g[S]>F&&(F=g[S])}var k,I,N=0;if(d&&d.funnel&&"rectangle"===d.funnel.type&&F>0){b=L/E;y=M;var R=M/F;for(S=0;S<E;S++){var B=m?m[S]:S,D=g[S],O=f._getSymbolFill(S),V=f._getAltSymbolFill(S)||O,j=f._getSymbolStroke(S),H=f._getAltSymbolStroke(S)||j;if(this._getSymbolStyles){O=(U=this._getSymbolStyles(S,E))&&U.fill?U.fill:O;V=U&&U.fill?U.fill:V;j=U&&U.stroke?U.stroke:j;H=U&&U.stroke?U.stroke:H}k=D>0?O:V;I=D>0?j:H;t.fill=k;t.stroke=I;if(_DataInfo.isValid(B)&&_DataInfo.isValid(D)){R||(R=M/D);var G=R*D;A+=(y-G)/2;this.rotated&&(T-=b);t.drawRect(A,T,G,b);z=new _FunnelSegment(new Point(A,T),G,b,G,b);this.rotated||(T+=b);y=G;z.tag=new _DataPoint(h,S,B,D);this.hitTester.add(z,h);n._setPointIndex(S,N);N++}}}else{P=x.left+x.width*(1-y)/2;w=x.top+x.height*(this.rotated?b:1-b);_=(1-y)*x.width/2/(x.height*(1-b));if(isNaN(_)||!isFinite(_)){M=v;A=P;T=w}l=x.width*y*x.height+x.width*(1-y)/2*x.height*(1-b);for(S=0;S<E;S++){B=m?m[S]:S,D=g[S];var z,X=[],Y=[];O=f._getSymbolFill(S),V=f._getAltSymbolFill(S)||O,j=f._getSymbolStroke(S),H=f._getAltSymbolStroke(S)||j;if(this._getSymbolStyles){var U;O=(U=this._getSymbolStyles(S,E))&&U.fill?U.fill:O;V=U&&U.fill?U.fill:V;j=U&&U.stroke?U.stroke:j;H=U&&U.stroke?U.stroke:H}k=D>0?O:V;I=D>0?j:H;t.fill=k;t.stroke=I;if(_DataInfo.isValid(B)&&_DataInfo.isValid(D)){var W=l*D/C;if(M>v){c=this._getTrapezoidOffsetY(M,W,_);if(this.rotated)if(T-c>w){X=[A,A+(u=_*c),A+M-u,A+M];Y=[T,T-c,T-c,T];z=new _FunnelSegment(new Point(A,T-c),M,c,M-2*u,0,!0);M-=2*u;A+=u;T-=c}else{u=_*(c=T-w);p=(W-=this._getTrapezoidArea(M,_,c))/v;X.push(A,A+u,A+u,A+u+v,A+u+v,A+M);Y.push(T,T-c,T-c-p,T-c-p,T-c,T);z=new _FunnelSegment(new Point(A,T-c-p),M,c+p,v,p,!0);M=v;A+=u;T=T-c-p}else if(T+c<w){X=[A,A+(u=_*c),A+M-u,A+M];Y=[T,T+c,T+c,T];z=new _FunnelSegment(new Point(A,T),M,c,M-2*u,0);M-=2*u;A+=u;T+=c}else{u=_*(c=w-T);p=(W-=this._getTrapezoidArea(M,_,c))/v;X.push(A,A+u,A+u,A+u+v,A+u+v,A+M);Y.push(T,T+c,T+c+p,T+c+p,T+c,T);z=new _FunnelSegment(new Point(A,T),M,c+p,v,p);M=v;A+=u;T=T+c+p}t.drawPolygon(X,Y)}else{p=W/v;this.rotated&&(T-=p);t.drawRect(A,T,M,p);z=new _FunnelSegment(new Point(A,T),v,p,v,p);this.rotated||(T+=p)}z.tag=new _DataPoint(h,S,B,D);this.hitTester.add(z,h);n._setPointIndex(S,N);N++}}}}}};_FunnelPlotter.prototype._getTrapezoidArea=function(t,e,i){var n=i*e;return n*i+(t-2*n)*i};_FunnelPlotter.prototype._getTrapezoidOffsetY=function(t,e,i){var n=Math.pow(t/2/i,2)-e/i;return t/2/i-Math.sqrt(n>=0?n:0)};_FunnelPlotter.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)};_FunnelPlotter.prototype._getPointAndPosition=function(t,e,i,n){var r=i;t.x=r.center.x;t.y=r.center.y;e=null==e?LabelPosition.Center:e};return _FunnelPlotter}(_BasePlotter);export{_FunnelPlotter};var _FunnelSegment=function(){function _FunnelSegment(t,e,i,n,r,s){void 0===s&&(s=!1);this._startPoint=t;this._width=e;this._height=i;this._neckWidth=n;this._neckHeight=r;this._center=new Point(this._startPoint.x+e/2,this._startPoint.y+i/2);this._offsetX=(e-n)/2;this._offsetY=i-r;this._rotated=s}_FunnelSegment.prototype.contains=function(t){var e=this._startPoint,i=this._offsetX,n=this._offsetY;if(this._rotated){if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y<e.y+this._neckHeight)return!1;if(t.x<this._center.x)return(e.y+this._height-t.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(e.y+this._height-t.y)/(e.x+this._width-t.x)<n/i}}else if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y>e.y+n)return!1;if(t.x<this._center.x)return(t.y-e.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(t.y-e.y)/(e.x+this._width-t.x)<n/i}return!1};_FunnelSegment.prototype.distance=function(t){if(this.contains(t))return 0;var e=this._startPoint,i=this._width,n=this._height,r=this._offsetX,s=this._offsetY;if(this._rotated){if(t.y>e.y+n)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y+n-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y+n-t.y,2)):t.y-e.y-n;if(t.y<e.y)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):e.y-t.y;if(!(t.y<e.y+n-s))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y-n,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-n+s/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-n+s-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-n-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-n+s/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-n+s-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}else{if(t.y<e.y)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y-t.y,2)):e.y-t.y;if(t.y>e.y+n)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):t.y-e.y-n;if(!(t.y>e.y+s))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-s/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-s-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-s/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-s-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}};Object.defineProperty(_FunnelSegment.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0});return _FunnelSegment}();export{_FunnelSegment};var _FinancePlotter=function(t){__extends(_FinancePlotter,t);function _FinancePlotter(){var e=null!==t&&t.apply(this,arguments)||this;e.isCandle=!0;e.isArms=!1;e.isEqui=!1;e.isVolume=!1;e._volHelper=null;e._symWidth=.7;return e}_FinancePlotter.prototype.clear=function(){t.prototype.clear.call(this);this._volHelper=null};_FinancePlotter.prototype.load=function(){t.prototype.load.call(this);if(this.isVolume){var e,i,n,r,s,a,o,h,l=null,_=null;for(a=0;a<this.chart.series.length;a++){s=(e=this.chart.series[a]).getDataType(1)||e.chart._xDataType;i=e._getAxisX();r=(n=null===(n=e._getChartType())||isUndefined(n)?this.chart._getChartType():n)===ChartType.Column?e._getBindingValues(1):n===ChartType.Candlestick?e._getBindingValues(4):null;if(s===DataType.Date){var u;o=[];h=[];for(a=0;a<e._getLength();a++){u=e._getItem(a)[e.bindingX].valueOf();o.push(u);h.push({value:u,text:Globalize.format(new Date(u),i.format||"d")})}}else o=this.dataInfo.getXVals();l=this.dataInfo.getMinX();_=this.dataInfo.getMaxX();if(r&&r.length>0){this._volHelper=new _VolumeHelper(r,o,l,_,s);i._customConvert=this._volHelper.convert.bind(this._volHelper);i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);h&&h.length>0&&(this._itemsSource=i.itemsSource=h);break}}}};_FinancePlotter.prototype.unload=function(){t.prototype.unload.call(this);for(var e,i=0;i<this.chart.series.length;i++)if(e=this.chart.series[i]._getAxisX()){e._customConvert=null;e._customConvertBack=null;e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null)}};_FinancePlotter.prototype.parseSymbolWidth=function(t){this._isPixel=void 0;if(t)if(isNumber(t)){var e=asNumber(t);if(isFinite(e)&&e>0){this._symWidth=e;this._isPixel=!0}}else if(isString(t)){var i=asString(t);if(i&&i.indexOf("%")>=0){i=i.replace("%","");var n=parseFloat(i);if(isFinite(n)){n<0?n=0:n>100&&(n=100);this._symWidth=n/100;this._isPixel=!1}}else{n=parseFloat(t);if(isFinite(n)&&n>0){this._symWidth=n;this._isPixel=!0}}}};_FinancePlotter.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY(),a=t.getDeltaX(),o=this.chart._xDataType;a<=0&&(a=1);var h=this.chart.series,l=h.length,_=0;this.parseSymbolWidth(this.symbolWidth);!this.isVolume||this.chart._getChartType()!==ChartType.Column&&this.chart._getChartType()!==ChartType.Candlestick?this.unload():this.load();for(var u=0;u<l;u++){var c=h[u];if(!c._isCustomAxisY()){var p=c._getBinding(1),f=c._getBinding(2),d=c._getBinding(3),g=c._getLength();if(g){var m=c._getSymbolSize();m>_&&(_=m);for(var x=0;x<g;x++){var y=c._getItem(x);if(y){[p?y[p]:null,f?y[f]:null,d?y[d]:null].forEach((function(t){if(_DataInfo.isValid(t)&&null!==t){(isNaN(n)||t<n)&&(n=t);(isNaN(s)||t>s)&&(s=t)}}))}}}}}var b=r-i,v=this.chart._plotRect;if(v&&v.width&&!this.isVolume){isNaN(m)&&c&&(m=c._getSymbolSize());m+=2;var S=v.width/(v.width-m)*b;i-=.5*(S-b);b=S}return!(o===DataType.Date&&this.isVolume||o===DataType.Number)||this.chart._getChartType()!==ChartType.Column&&this.chart._getChartType()!==ChartType.Candlestick?this.chart._isRotated()?new Rect(n,i,s-n,b):new Rect(i,n,b,s-n):new Rect(i-.5*a,n,r-i+a,s-n)};_FinancePlotter.prototype.plotSeries=function(t,e,i,n,r,s,a,o){var h=this,l=asType(n,SeriesBase),_=this.chart.series.indexOf(n),u=n.getValues(0),c=n.getValues(1),p=this._symWidth,f=this.chart._isRotated();if(u){c||(c=this.dataInfo.getXVals());if(c){var d=this.dataInfo.getDeltaX();d>0&&!1===this._isPixel&&(p*=d)}var g=u.length,m=!0;if(c)g=Math.min(g,c.length);else{m=!1;c=new Array(g)}var x=this._DEFAULT_WIDTH,y=l._getSymbolFill(_),b=l._getAltSymbolFill(_)||"transparent",v=l._getSymbolStroke(_),S=l._getAltSymbolStroke(_)||v,C=void 0===this._isPixel?l._getSymbolSize():p;t.stroke=v;t.strokeWidth=x;t.fill=y;for(var P,w,A=l._getBinding(1),T=l._getBinding(2),M=l._getBinding(3),L=f?i.actualMin:e.actualMin,E=f?i.actualMax:e.actualMax,F=0,k=null,I=null,N=this.getItemFormatter(n),R=0;R<g;R++)if(k=l._getItem(R)){var B=m?c[R]:R;if(_DataInfo.isValid(B)&&L<=B&&B<=E){var D=u[R],O=A?k[A]:null,V=T?k[T]:null,j=M?k[M]:null;t.startGroup();if(this.isEqui&&null!==I){if(I[M]!==k[M]){P=I[M]<k[M]?b:y;w=I[M]<k[M]?S:v}}else{P=V<j?b:y;w=V<j?S:v}t.fill=P;t.stroke=w;t.strokeWidth=x;if(N){var H=new HitTestInfo(this.chart,new Point(e.convert(B),i.convert(D)),ChartElement.SeriesSymbol);H._setData(l,R);N(t,H,(function(){h._drawSymbol(t,e,i,_,R,P,C,B,D,O,V,j)}));t.cssPriority=!0}else this._drawSymbol(t,e,i,_,R,P,C,B,D,O,V,j);t.endGroup();n._setPointIndex(R,F);F++}I=k}}};_FinancePlotter.prototype._drawSymbol=function(t,e,i,n,r,s,a,o,h,l,_,u){var c,p=null,f=null,d=null,g=null,m=this.chart._isRotated(),x=m?new _DataPoint(n,r,h,o):new _DataPoint(n,r,o,h);if(m){var y=i;i=e;e=y}if(!1===this._isPixel&&(d=e.convert(o-.5*a))>(g=e.convert(o+.5*a))){var b=d;d=g;g=b}o=e.convert(o);if(!1!==this._isPixel){d=o-.5*a;g=o+.5*a}if(this.isCandle){if(_DataInfo.isValid(_)&&_DataInfo.isValid(u)){_=i.convert(_);u=i.convert(u);f=(p=Math.min(_,u))+Math.abs(_-u);if(m){t.drawRect(p,d,f-p||1,g-d||1);c=new _RectArea(new Rect(p,d,f-p||1,g-d||1))}else{t.drawRect(d,p,g-d||1,f-p||1);c=new _RectArea(new Rect(d,p,g-d||1,f-p||1))}c.tag=x;this.hitTester.add(c,n)}if(_DataInfo.isValid(h)){h=i.convert(h);if(null!==p)if(m){t.drawLine(f,o,h,o);c.rect.width=c.rect.width+h}else{t.drawLine(o,p,o,h);c.rect.top=h;c.rect.height=c.rect.height+h}}if(_DataInfo.isValid(l)){l=i.convert(l);if(null!==f)if(m){t.drawLine(p,o,l,o);c.rect.left=l;c.rect.width=c.rect.width+l}else{t.drawLine(o,f,o,l);c.rect.height=c.rect.height+l}}}else if(this.isEqui){if(_DataInfo.isValid(h)&&_DataInfo.isValid(l)){h=i.convert(h);l=i.convert(l);f=(p=Math.min(h,l))+Math.abs(h-l);t.drawRect(d,p,g-d||1,f-p||1);(c=new _RectArea(new Rect(d,p,g-d||1,f-p||1))).tag=x;this.hitTester.add(c,n)}}else if(this.isArms){if(_DataInfo.isValid(_)&&_DataInfo.isValid(u)){_=i.convert(_);u=i.convert(u);f=(p=Math.min(_,u))+Math.abs(_-u);t.drawRect(d,p,g-d||1,f-p||1)}if(_DataInfo.isValid(h)&&null!==p){h=i.convert(h);t.drawLine(o,p,o,h)}if(_DataInfo.isValid(l)&&null!==f){l=i.convert(l);t.drawLine(o,f,o,l)}if(_DataInfo.isValid(h)&&_DataInfo.isValid(l)){t.fill="transparent";f=(p=Math.min(h,l))+Math.abs(h-l);t.drawRect(d,p,g-d||1,f-p||1);(c=new _RectArea(new Rect(d,p,g-d||1,f-p||1))).tag=x;this.hitTester.add(c,n)}}else{if(_DataInfo.isValid(h)&&_DataInfo.isValid(l)){h=i.convert(h);l=i.convert(l);f=(p=Math.min(h,l))+Math.abs(h-l);if(m){t.drawLine(l,o,h,o);c=new _RectArea(new Rect(p,d,f-p||1,g-d||1))}else{t.drawLine(o,l,o,h);c=new _RectArea(new Rect(d,p,g-d||1,f-p||1))}c.tag=x;this.hitTester.add(c,n)}if(_DataInfo.isValid(_)){_=i.convert(_);m?t.drawLine(_,d,_,o):t.drawLine(d,_,o,_)}if(_DataInfo.isValid(u)){u=i.convert(u);m?t.drawLine(u,o,u,g):t.drawLine(o,u,g,u)}}};return _FinancePlotter}(_BasePlotter);export{_FinancePlotter};var _LinePlotter=function(t){__extends(_LinePlotter,t);function _LinePlotter(){var e=t.call(this)||this;e.hasSymbols=!1;e.hasLines=!0;e.isSpline=!1;e.isStep=!1;e.hitTestSymbols=!0;e.stacking=Stacking.None;e.stackPos={};e.stackNeg={};e.clipping=!1;return e}_LinePlotter.prototype.clear=function(){t.prototype.clear.call(this);this.stackNeg={};this.stackPos={}};_LinePlotter.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();if(this.isSpline&&!this.chart.axisY._getLogBase()){var a=.1*(s-n);n-=a;s+=a}return this.rotated?new Rect(n,i,s-n,r-i):new Rect(i,n,r-i,s-n)};_LinePlotter.prototype.plotSeries=function(t,e,i,n,r,s,a,o){var h=[],l=asType(n,SeriesBase),_=this.chart.series.indexOf(n),u=n.getValues(0),c=n.getValues(1);if(u){c||(c=this.dataInfo.getXVals());var p=_BasePlotter.cloneStyle(n.style,["fill"]),f=u.length,d=!0;if(c)f=Math.min(f,c.length);else{d=!1;c=new Array(f)}var g=this._DEFAULT_WIDTH,m=l._getSymbolFill(_),x=l._getAltSymbolFill(_)||m,y=l._getSymbolStroke(_),b=l._getAltSymbolStroke(_)||y,v=l._getSymbolSize();t.stroke=y;t.strokeWidth=g;t.fill=m;var S=new Float64Array(f),C=new Float64Array(f),P=0,w=new Int8Array(f),A=0,T=this.rotated,M=this.stacking!=Stacking.None&&!l._isCustomAxisY(),L=this.stacking==Stacking.Stacked100pc&&!l._isCustomAxisY();void 0!==l._getChartType()&&(M=L=!1);for(var E=l.interpolateNulls,F=!1,k=this.getItemFormatter(n),I=0;I<f;I++){var N=d?c[I]:I,R=u[I];if(isFinite(N)&&isFinite(R)){if(M){if(L){R/=this.dataInfo.getStackedAbsSum(N)}if(R>=0){var B=isNaN(this.stackPos[N])?0:this.stackPos[N];R=this.stackPos[N]=B+R}else{B=isNaN(this.stackNeg[N])?0:this.stackNeg[N];R=this.stackNeg[N]=B+R}}var D;if(T){D=new _DataPoint(_,I,R,N);var O=e.convert(R);R=i.convert(N);N=O}else{D=new _DataPoint(_,I,N,R);N=e.convert(N);R=i.convert(R)}if(isNaN(N)||isNaN(R)){F=!0;if(!0!==E){S[P]=NaN;C[P++]=NaN}w[A++]=1;o&&h.push(null)}else{S[P]=N;C[P++]=R;A++;o&&h.push(new Point(N,R));if(this.hitTestSymbols){var V=new _CircleArea(new Point(N,R),.5*v);V.tag=D;this.hitTester.add(V,_)}}}else{F=!0;if(!0!==E){S[P]=NaN;C[P++]=NaN}w[A++]=1;o&&h.push(null)}}var j=0;if(this.hasLines){t.fill=null;if(F&&!0!==E){var H=[],G=[];for(I=0;I<f;I++)if(isNaN(S[I])){if(H.length>1){this._drawLines(t,H,G,null,p,this.chart._plotrectId);this.hitTester.add(new _LinesArea(H,G),_);j++}H=[];G=[]}else{H.push(S[I]);G.push(C[I])}if(H.length>1){this._drawLines(t,H,G,null,p,this.chart._plotrectId);this.hitTester.add(new _LinesArea(H,G),_);j++}}else{this._drawLines(t,S,C,null,p,this.chart._plotrectId,P);this.hitTester.add(new _LinesArea(S,C),_);j++}}if(this.hasSymbols&&v>0||k){t.fill=m;var z=0;for(I=0;I<f;I++)if(!E||!w[I]){N=S[z],R=C[z];if(!1===this.hasLines||k){t.fill=u[I]>0?m:x;t.stroke=u[I]>0?y:b;t.strokeWidth=g}if(this.isValid(N,R,e,i)){this._drawSymbol(t,N,R,v,l,I,k);n._setPointIndex(I,j);j++}z++}}o&&h&&h.length&&o(h)}};_LinePlotter.prototype._drawLines=function(t,e,i,n,r,s,a){if(this.isSpline&&a>3)t.drawSplines(e,i,n,r,s,a);else if(this.isStep){var o=this._createSteps(e,i,a);e=o.x;i=o.y;t.drawLines(e,i,n,r,s)}else t.drawLines(e,i,n,r,s,a)};_LinePlotter.prototype._drawSymbol=function(t,e,i,n,r,s,a){var o=this;if(a){t.startGroup();var h=new HitTestInfo(this.chart,new Point(e,i),ChartElement.SeriesSymbol);h._setData(r,s);a(t,h,(function(){o.hasSymbols&&n>0&&o._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)}));t.cssPriority=!0;t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)};_LinePlotter.prototype._drawDefaultSymbol=function(t,e,i,n,r,s){r==Marker.Dot?t.drawEllipse(e,i,.5*n,.5*n,null,s):r==Marker.Box&&t.drawRect(e-.5*n,i-.5*n,n,n,null,s)};return _LinePlotter}(_BasePlotter);export{_LinePlotter};var _BubblePlotter=function(t){__extends(_BubblePlotter,t);function _BubblePlotter(){var e=t.call(this)||this;e._MIN_SIZE=5;e._MAX_SIZE=30;e.hasLines=!1;e.hasSymbols=!0;e.clipping=!0;e.hitTestSymbols=!1;return e}_BubblePlotter.prototype.adjustLimits=function(e,i){var n=this.getNumOption("minSize","bubble");this._minSize=n||this._MIN_SIZE;var r=this.getNumOption("maxSize","bubble");this._maxSize=r||this._MAX_SIZE;for(var s=this.chart.series,a=s.length,o=NaN,h=NaN,l=0;l<a;l++){if((m=s[l])._getChartType()==ChartType.Bubble||null==m._getChartType()&&m._chart._getChartType()==ChartType.Bubble){if(x=m._getBindingValues(1))for(var _=x.length,u=0;u<_;u++)if(isFinite(x[u])){(isNaN(o)||x[u]<o)&&(o=x[u]);(isNaN(h)||x[u]>h)&&(h=x[u])}}}this._minValue=o;this._maxValue=h;var c=t.prototype.adjustLimits.call(this,e,i),p=i.left,f=i.right,d=i.top,g=i.bottom;for(l=0;l<a;l++){var m;if((m=s[l])._getChartType()==ChartType.Bubble||null==m._getChartType()&&m._chart._getChartType()==ChartType.Bubble){var x=m._getBindingValues(1),y=m.getValues(1),b=m.getValues(0);if(x&&y&&b){var v=x.length;for(u=0;u<v;u++){var S=y?y[u]:u,C=b[u],P=x[u];if(_DataInfo.isValid(S,C,P)){S=i.left+i.width*(S-c.left)/c.width;C=i.top+i.height*(C-c.top)/c.height;S-(P=this._minSize+(this._maxSize-this._minSize)*(P-o)/(h-o))<p&&(p=S-P);S+P>f&&(f=S+P);C-P<d&&(d=C-P);C+P>g&&(g=C+P)}}}}}p=i.left-p+5;f=f-i.right+5;d=i.top-d+5;g=g-i.bottom+5;var w=this.chart.axisX,A=this.chart.axisY;if(!w._isLogAxis())if(this.stacking==Stacking.Stacked100pc&&this.rotated){var T=(i.width-this._maxSize)/c.width;c.left-=.5*this._maxSize/T;c.width+=this._maxSize/T}else{T=(i.width-(p+f))/c.width;c.left-=p/T;c.width+=(p+f)/T}if(!A._isLogAxis())if(this.stacking!=Stacking.Stacked100pc||this.rotated){M=(i.height-(d+g))/c.height;c.top-=d/M;c.height+=(d+g)/M}else{var M=(i.height-this._maxSize)/c.height;c.top-=.5*this._maxSize/M;c.height+=this._maxSize/M}return c};_BubblePlotter.prototype._drawSymbol=function(t,e,i,n,r,s,a){var o=this;if(null==this._minSize){var h=this.getNumOption("minSize","bubble");this._minSize=h||this._MIN_SIZE}if(null==this._maxSize){var l=this.getNumOption("maxSize","bubble");this._maxSize=l||this._MAX_SIZE}var _=r._getItem(s);if(_){var u=r._getBinding(1);if(u){n=_[u];if(isFinite(n)){null==n&&(n=this._minValue);var c=this._minValue==this._maxValue?1:Math.sqrt((n-this._minValue)/(this._maxValue-this._minValue));n=this._minSize+(this._maxSize-this._minSize)*c;if(a){var p=new HitTestInfo(this.chart,new Point(e,i),ChartElement.SeriesSymbol);p._setData(r,s);t.startGroup();a(t,p,(function(){o._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)}));t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle);var f=r.getValues(1);f||(f=this.dataInfo.getXVals());var d=f?f[s]:s,g=r.getValues(0)[s],m=this.chart.series.indexOf(r),x=new _CircleArea(new Point(e,i),.5*n);x.tag=new _DataPoint(m,s,d,g);this.hitTester.add(x,m)}}}};return _BubblePlotter}(_LinePlotter);export{_BubblePlotter};_registerModule("wijmo.chart",selfModule);